function EVENT_START_SET( evtNo )
{
	this.Field.MoveOffPlayer();

	if (evtNo == 1)
	{
		this.Field.SetPlayerVisible(false);
		this.Field.SetDigimonVisible(false);
		this.WaitFrame(1);
	}
	else if (evtNo == 0)
	{
		this.WaitFrame(1);
	}
}

function EVENT_END_SET( evtNo )
{
	if (evtNo == 1)
	{
		this.Field.SetPlayerVisible(true);
		this.Field.SetDigimonVisible(true);
	}
	else if (evtNo == 0)
	{
	}

	this.Field.MoveOnPlayer();
}

function YES_NO_WARP( textNo, MapName, Area, Locater, Angle )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenYesNoInfo(textNo);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);

	switch(result)
	{
	case 1:
		this.HM_ChangeField(MapName, Area, Locater, Angle);
		return true;
		break;

	case 2:
		this.Field.MoveOnPlayer();
		return false;
		break;

	case 3:
		this.Field.MoveOnPlayer();
		return false;
		break;
	}
}

function YES_NO_CONNECT_JUMP( textNo, MapName, Area, Locater, Angle )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenYesNoInfo(textNo);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);
	local select = 0;

	switch(result)
	{
	case 1:
		select = 1;
		this.Field.StartCJEffect();
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}

	if (select > 0)
	{
		while (!this.Field.IsEndCJEffect())
		{
			this.WaitFrame(this.Util.SecondFromFrame(0.1));
		}

		this.HM_ChangeField(MapName, Area, Locater, Angle);
	}
}

function YES_NO_CONNECT_JUMP_VER2( textNo, MapName, Area, Locater, Angle, MoveLocater )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenYesNoInfo(textNo);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);
	local select = 0;

	switch(result)
	{
	case 1:
		select = 1;
		this.Field.MovePlayer(MoveLocater);

		while (this.Field.IsMovePlayer())
		{
			this.WaitFrame(this.Util.SecondFromFrame(0.1));
		}

		this.Field.StartCJEffect();
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}

	if (select > 0)
	{
		while (!this.Field.IsEndCJEffect())
		{
			this.WaitFrame(this.Util.SecondFromFrame(0.1));
		}

		this.HM_ChangeField(MapName, Area, Locater, Angle);
		return true;
	}

	return false;
}

function YES_NO_CONNECT_JUMP_TO_EDEN( textNo, MoveLocater )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenYesNoInfo(textNo);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);
	local select = 0;

	switch(result)
	{
	case 1:
		select = 1;
		this.Field.MovePlayer(MoveLocater);

		while (this.Field.IsMovePlayer())
		{
			this.WaitFrame(this.Util.SecondFromFrame(0.1));
		}

		this.Field.StartCJEffect();
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}

	if (select > 0)
	{
		while (!this.Field.IsEndCJEffect())
		{
			this.WaitFrame(this.Util.SecondFromFrame(0.1));
		}

		this.Field.SetEdenLogOut(1, 4, "t05", 4);
		this.Field.ChangeScene(8, 1);
		return true;
	}

	return false;
}

function YES_NO_BATTLE( textNo, FlagNo, battleNo, battleMap )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenYesNoInfo(textNo);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);

	switch(result)
	{
	case 1:
		this.Flag.Set(FlagNo);
		this.Battle.Encount(battleNo, battleMap);
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}
}

function YES_NO_WARPtoEDEN_SELECT( Ftype )
{
	if (this.Flag.Check(1002) && !this.Flag.Check(1108))
	{
		this.Field.SetEdenLogOut(1, 0, "t05", 4);
	}

	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			this.Field.MoveOffPlayer();
			this.Window.OpenYesNoInfo(17);
			this.WaitYesNoInfoWindow();
			local result = this.Window.GetResultYesNoInfo();
			this.Window.CloseYesNoInfo();
			this.WaitCloseYesNoInfoWindow();

			switch(result)
			{
			case 1:
				if (Ftype == 1)
				{
					this.Field.WarpIn("EFF_FLD_WARP_IN", 30, false, true, false);
					this.WaitFrame(1.0);
				}

				if (this.Common.GetPlayerSex() == 1)
				{
					this.Field.PlayAnimation("pc001", "ff03", 0.2, false);
					this.WaitFrame(0.69999999);
					this.Sound.PlaySE("fe_046", false);

					while (!this.Field.IsEndAnimation("pc001"))
					{
						this.WaitFrame(this.Util.SecondFromFrame(1));
					}
				}
				else
				{
					this.Field.PlayAnimation("pc002", "ff03", 0.2, false);
					this.WaitFrame(0.69999999);
					this.Sound.PlaySE("fe_046", false);

					while (!this.Field.IsEndAnimation("pc002"))
					{
						this.WaitFrame(this.Util.SecondFromFrame(1));
					}
				}

				this.Field.SetPlayerVisible(false);
				this.Field.ChangeScene(8, 1);
				break;

			case 2:
				this.Field.MoveOnPlayer();
				break;

			case 3:
				this.Field.MoveOnPlayer();
				break;
			}

			if (result == 1)
			{
				break;
			}

			this.Field.PlayerIconVisible(true);
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function EDEN_LANDING( Ftype )
{
	if (this.Flag.Check(5))
	{
		this.Field.MoveOffPlayer();
		this.Field.SetPlayerVisible(false);
		this.Field.SetDigimonVisible(false);
		this.WaitFrame(0.5);
		this.Debug.Log("LANDING");

		if (this.Common.GetPlayerSex() == 1)
		{
			this.Field.PlayAnimation("pc001", "ff04", 0.0, false);
			this.Sound.PlaySE("fe_047", false);
			this.Field.SetPlayerVisible(true);

			while (!this.Field.IsEndAnimation("pc001"))
			{
				this.WaitFrame(this.Util.SecondFromFrame(1));
			}
		}
		else
		{
			this.Field.PlayAnimation("pc002", "ff04", 0.0, false);
			this.Sound.PlaySE("fe_047", false);
			this.Field.SetPlayerVisible(true);

			while (!this.Field.IsEndAnimation("pc002"))
			{
				this.WaitFrame(this.Util.SecondFromFrame(1));
			}
		}

		if (Ftype == 1 || this.Common.GetFieldGuest() != 0)
		{
			this.Field.WarpOut("EFF_FLD_WARP_OUT", 30, false, true, false);
			this.WaitFrame(1.5);
		}

		this.Field.MoveOnPlayer();
	}
}

function KEYWORD_EVENT_START( keyID )
{
	this.Keyword.EventHappen(keyID);
}

function SET_KEYICON_KEY( npcNo )
{
	this.Field.SetNpcIcon(npcNo, 6);
}

function SET_KEYICON_LOCK( keyID, npcNo )
{
	this.Field.SetNpcIcon(npcNo, 7);
}

function SET_KEYICON_SWING( keyID, npcNo )
{
	this.Field.SetNpcKeywordID(npcNo, keyID);
	this.Field.SetNpcIcon(npcNo, 8);
}

function KEYWORD_TALK( keyID )
{
	local dataName = this.Keyword.GetTalkDataName();
	this.Talk.Load(dataName);
	this.Talk.SetMode(1);
	local index = 0;
	local messageType = -1;
	local useResult = -2;
	local isProgress = false;
	local msgID = this.Keyword.GetMessageID(keyID, index, messageType, useResult, isProgress);

	while (msgID != -1)
	{
		messageType = this.Keyword.GetMessageType(keyID, msgID);

		switch(messageType)
		{
		case 3:
			this.Keyword.UnlockDirectionIncorrect();
			break;

		case 4:
			this.Sound.PlaySE("fe_077", false);
			this.Keyword.UnlockDirectionCorrect();
			this.Keyword.AdvanceProgress(keyID);
			isProgress = true;
			break;

		case 5:
			this.Sound.PlaySE("fe_078", false);
			this.Keyword.UnlockDirectionCorrect();
			this.Keyword.AdvanceProgress(keyID);
			isProgress = true;
			break;
		}

		if (this.Keyword.GetProgress(160) == 1 && !this.Flag.Check(1601))
		{
			break;
		}
		else if (this.Keyword.GetProgress(161) == 1 && !this.Flag.Check(1602))
		{
			break;
		}
		else if (this.Keyword.GetProgress(300) == 1 && this.Quest.GetProgress(53) == 1)
		{
			break;
		}
		else if (this.Keyword.GetProgress(400) == 1 && this.Quest.GetProgress(50) == 1)
		{
			break;
		}
		else if (this.Keyword.GetProgress(401) == 1 && this.Quest.GetProgress(50) == 3)
		{
			break;
		}
		else if (this.Keyword.GetProgress(500) == 1 && this.Quest.GetProgress(52) == 5)
		{
			break;
		}
		else if (this.Keyword.GetProgress(800) == 1 && this.Quest.GetProgress(58) == 1)
		{
			break;
		}
		else if (this.Keyword.GetProgress(801) == 1 && this.Quest.GetProgress(58) == 2)
		{
			break;
		}
		else if (this.Keyword.GetProgress(802) == 1 && this.Quest.GetProgress(58) == 3)
		{
			break;
		}
		else if (this.Keyword.GetProgress(2800) == 1 && this.Quest.GetProgress(158) == 5 && !this.Flag.Check(5564))
		{
			break;
		}
		else if (this.Keyword.GetProgress(2801) == 1 && this.Quest.GetProgress(158) == 5 && !this.Flag.Check(5564))
		{
			break;
		}
		else if (this.Keyword.GetProgress(2802) == 1 && this.Quest.GetProgress(158) == 5 && !this.Flag.Check(5564))
		{
			break;
		}
		else if (this.Keyword.GetProgress(304) == 1)
		{
			break;
		}
		else
		{
		}

		this.Message(msgID);

		if (dataName == "keyword_t2001_npc_0110" && msgID == 200)
		{
			if (!this.Flag.Check(14002))
			{
				this.INFO_WINDOW(7241);
				this.Flag.Set(14002);
			}
		}

		if (dataName == "keyword_d13105_npc_0002" && msgID == 200)
		{
			this.Debug.Log("keyword_d13105_npc_0002");
			this.Flag.Set(11325);
			this.Flag.Set(11326);
		}

		if (dataName == "keyword_d13109_npc_0000" && msgID == 200)
		{
			this.Debug.Log("keyword_d13109_npc_0000");
			this.Flag.Set(11323);
		}

		if (dataName == "keyword_d13109_npc_0004" && msgID == 200)
		{
			this.Debug.Log("keyword_d13109_npc_0004");
			this.Flag.Set(11324);
		}

		if (dataName == "keyword_d12201_npc_0006" && msgID == 200)
		{
			this.Debug.Log("keyword_d12201_npc_0006");
			this.Flag.Set(11309);
			this.Flag.Set(11327);
		}

		if (dataName == "keyword_d12201_npc_0018" && msgID == 200)
		{
			this.Debug.Log("keyword_d12201_npc_0018");
			this.Flag.Set(11308);
		}

		switch(messageType)
		{
		case 1:
			this.Window.OpenInfoGetKeyword(keyID);
			this.WaitInfoWindow();
			this.Window.CloseInfo();
			this.WaitCloseInfoWindow();
			isProgress = true;
			break;

		case 2:
			this.Talk.Close();
			this.Keyword.OpenUseWindow();

			while (!this.Keyword.IsNextUseWindow())
			{
				this.WaitFrame(this.Util.SecondFromFrame(1));
			}

			useResult = this.Keyword.GetResultUseWindow();

			if (useResult >= 0)
			{
				keyID = useResult;
			}

			this.Keyword.CloseUseWindow();

			while (!this.Keyword.IsEndCloseUseWindow())
			{
				this.WaitFrame(this.Util.SecondFromFrame(1));
			}

			index = -1;
			break;
		}

		index++;
		msgID = this.Keyword.GetMessageID(keyID, index, messageType, useResult, isProgress);
	}

	if (index > 0)
	{
		this.MessageClose();
	}

	this.TalkExit();
	return useResult;
}

function ELEVATOR_UP( objName, locatorName )
{
	this.Field.MoveOffPlayer();
	this.Field.MovePlayer(locatorName);

	while (this.Field.IsMovePlayer())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	this.Field.MoveOffPlayer();
	this.Field.StartElevator(objName, 8.0, 0.125, true);

	while (!this.Field.IsEndElevator(objName))
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function ELEVATOR_DOWN( objName, locatorName )
{
	this.Field.SetEnableSecurityEffect(false);
	this.Field.SetEnablePasteColorEffect(false);
	this.Field.MoveOffPlayer();
	this.Field.MovePlayer(locatorName);

	while (this.Field.IsMovePlayer())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	this.Field.MoveOffPlayer();
	this.Field.StartElevator(objName, 8.0, -0.125, true);

	while (!this.Field.IsEndElevator(objName))
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	this.Field.SetEnableSecurityEffect(true);
	this.Field.SetEnablePasteColorEffect(true);
}

function LIFT_MOTION( objName, locatorName, flag, height, speed, type )
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			this.Field.SetEnableSecurityEffect(false);
			this.Field.SetEnablePasteColorEffect(false);
			this.Field.MoveOffPlayer();
			this.Field.MovePlayer(locatorName);

			while (this.Field.IsMovePlayer())
			{
				this.WaitFrame(this.Util.SecondFromFrame(0.1));
			}

			this.Field.MoveOffPlayer();
			this.Field.StartElevator(objName, height, speed, false);

			if (type == 0)
			{
				while (!this.Field.IsEndElevator(objName))
				{
					this.WaitFrame(this.Util.SecondFromFrame(0.1));
				}
			}
			else if (type == 1)
			{
				while (!this.Field.IsEndElevator(objName))
				{
					this.WaitFrame(this.Util.SecondFromFrame(0.1));
				}
			}

			if (this.Flag.Check(flag))
			{
				this.Flag.Clear(flag);
			}
			else
			{
				this.Flag.Set(flag);
			}

			this.Field.MoveOnPlayer();
			this.Field.SetEnableSecurityEffect(true);
			this.Field.SetEnablePasteColorEffect(true);
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function LIFT_STATUS( objName, height, speed )
{
	this.Field.StartElevator(objName, height, speed, false);
}

function EV_NAKANO( windowNo )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenMultiSelect(windowNo);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.EV_SE_START();
		this.HM_ChangeField("t05", 12, "start_01", 0);
		break;

	case 2:
		this.EV_SE_START();
		this.HM_ChangeField("t05", 10, "start_01", 0);
		break;

	case 3:
		this.EV_SE_START();
		this.HM_ChangeField("t05", 7, "start_01", 0);
		break;

	case 4:
		this.EV_SE_START();
		this.HM_ChangeField("t05", 3, "start_01", 0);
		break;

	case 5:
		this.Field.MoveOnPlayer();
		break;

	case -1:
		this.Field.MoveOnPlayer();
		break;
	}
}

function EV_SE_START()
{
	this.FADE_OUT(0, 0.5);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("fe_018", false);

	while (!this.Sound.IsPlaySE("fe_018"))
	{
		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function EV_HOSIPTAL_LEFT( windowNo )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenMultiSelect(windowNo);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.HOSPITAL_EV_SE_START("obj_gk_0001");
		this.WaitFrame(2);
		this.HM_ChangeField("t04", 3, "start_02", 0);
		break;

	case 2:
		this.HOSPITAL_EV_SE_START("obj_gk_0001");
		this.WaitFrame(2);
		this.HM_ChangeField("t04", 2, "start_01", 0);
		break;

	case 3:
		this.HOSPITAL_EV_SE_START("obj_gk_0001");
		this.WaitFrame(2);
		this.HM_ChangeField("t04", 1, "start_01", 0);
		break;

	case 4:
		this.Field.MoveOnPlayer();
		break;

	case -1:
		this.Field.MoveOnPlayer();
		break;
	}

	this.Field.PlayerIconVisible(true);
}

function EV_HOSIPTAL_RIGHT( windowNo )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenMultiSelect(windowNo);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.HOSPITAL_EV_SE_START("obj_gk_0000");
		this.WaitFrame(2);
		this.HM_ChangeField("t04", 3, "start_00", 0);
		break;

	case 2:
		this.HOSPITAL_EV_SE_START("obj_gk_0000");
		this.WaitFrame(2);
		this.HM_ChangeField("t04", 2, "start_00", 0);
		break;

	case 3:
		this.HOSPITAL_EV_SE_START("obj_gk_0000");
		this.WaitFrame(2);
		this.HM_ChangeField("t04", 1, "start_02", 0);
		break;

	case 4:
		this.Field.MoveOnPlayer();
		break;

	case -1:
		this.Field.MoveOnPlayer();
		break;
	}

	this.Field.PlayerIconVisible(true);
}

function HOSPITAL_EV_SE_START( objName )
{
	this.Sound.PlaySE("fe_018", false);
	this.Field.StartGimmickAnime(objName);
	this.WaitFrame(2);
	this.FADE_OUT(0, 0.5);
	this.WaitFrame(0.5);
}

function HOME_APPEAR( locator, angle )
{
	this.Sound.PlaySE("fe_021", false);
	this.HM_ChangeField("t05", 4, locator, angle);
}

function QUEST_FREE_27_QUESTION()
{
	this.Window.OpenMultiSelect(402);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.INFO_WINDOW(5013);
		this.Flag.Set(9247);
		break;

	case 2:
		this.INFO_WINDOW(5014);
		this.Flag.Set(9248);
		break;

	case 3:
		this.INFO_WINDOW(5015);
		this.Flag.Set(9249);
		break;

	case 4:
		this.INFO_WINDOW(5016);
		this.Flag.Set(9250);
		break;

	case 5:
		break;
	}
}

function EV_D14_1ST( windowNo, locatorNo )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenMultiSelect(windowNo);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 3, locatorNo, 0);
		break;

	case 2:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 2, locatorNo, 0);
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;

	case -1:
		this.Field.MoveOnPlayer();
		break;
	}

	this.Field.PlayerIconVisible(true);
}

function EV_D14_2ND( windowNo, locatorNo )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenMultiSelect(windowNo);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 7, locatorNo, 0);
		break;

	case 2:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 6, locatorNo, 0);
		break;

	case 3:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 5, locatorNo, 0);
		break;

	case 4:
		this.Field.MoveOnPlayer();
		break;

	case -1:
		this.Field.MoveOnPlayer();
		break;
	}

	this.Field.PlayerIconVisible(true);
}

function EV_D14_3RD( windowNo, locatorNo )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenMultiSelect(windowNo);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 12, locatorNo, 0);
		break;

	case 2:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 11, locatorNo, 0);
		break;

	case 3:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 10, locatorNo, 0);
		break;

	case 4:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 9, locatorNo, 0);
		break;

	case 5:
		this.Field.MoveOnPlayer();
		break;

	case -1:
		this.Field.MoveOnPlayer();
		break;
	}

	this.Field.PlayerIconVisible(true);
}

function EV_D14_THROUGH( windowNo, AREA, locatorNo, locatorNo_02 )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenMultiSelect(windowNo);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.EV_SE_START();
		this.HM_ChangeField("d14", AREA, locatorNo, 0);
		break;

	case 2:
		this.EV_SE_START();
		this.HM_ChangeField("d14", 1, locatorNo_02, 0);
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;

	case -1:
		this.Field.MoveOnPlayer();
		break;
	}

	this.Field.PlayerIconVisible(true);
}

function EV_D14_CASE2( windowNo, AREA, locatorNo, AREA_02, locatorNo_02 )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenMultiSelect(windowNo);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.EV_SE_START();
		this.HM_ChangeField("d14", AREA, locatorNo, 0);
		break;

	case 2:
		this.EV_SE_START();
		this.HM_ChangeField("d14", AREA_02, locatorNo_02, 0);
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;

	case -1:
		this.Field.MoveOnPlayer();
		break;
	}

	this.Field.PlayerIconVisible(true);
}

function MOYAMOYA_DELETE( objName, index )
{
	this.Field.SetEffectAnime(objName, index, 30, 80);
	this.Sound.PlaySE("fe_063", false);
	this.Field.PlayEffect(objName, index, false, false);

	while (!this.Field.IsEndEffect(objName))
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function CHAPTER_END_SAVE( mapName, Area )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenYesNoInfo(5055);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);

	switch(result)
	{
	case 1:
		if (this.Flag.Check(3100) && this.Flag.Check(3199))
		{
			this.Flag.Clear(3005);
			this.Flag.Clear(3006);
			this.Flag.Clear(3007);
			this.Flag.Clear(3008);
			this.Flag.Clear(3009);
			this.Flag.Clear(3010);
			this.Flag.Clear(3011);
			this.Flag.Clear(3012);
			this.Flag.Clear(3018);
			this.Flag.Clear(3013);
			this.Flag.Clear(3019);
			this.Flag.Clear(3014);
			this.Flag.Clear(3099);
			this.Flag.Clear(3199);
		}

		this.Field.SaveUI(mapName, Area);

		while (!this.Field.IsEndSaveUI())
		{
			this.WaitFrame(this.Util.SecondFromFrame(1));
		}

		this.Field.MoveOnPlayer();
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}
}

function FIELD_MEDAL( ItemNo, num, FlagNo, Effect_loc )
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			if (!this.Flag.Check(FlagNo))
			{
				this.Field.MoveOffPlayer();
				this.Window.OpenInfoGetItem(ItemNo, num);
				this.WaitInfoWindow();
				this.Window.CloseInfo();
				this.WaitCloseInfoWindow();
				this.Flag.Set(FlagNo);
				this.Field.EffectVisible(Effect_loc, false);
				this.Field.MoveOnPlayer();
			}
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function QUEST_TALK( mesNo )
{
	this.Talk.Load("quest_iteme");
	this.Talk.SetMode(1);
	local i = 0;
	local QNo = 0;
	local toneC = 0;
	local str = "";

	for( i = 400; i <= 632; i++ )
	{
		if (this.Quest.GetReceiveStatus(i) == 1)
		{
			QNo = i;
		}
	}

	if (QNo == 451 || QNo == 452 || QNo == 489 || QNo == 502 || QNo == 522 || QNo == 523 || QNo == 543 || QNo == 423 || QNo == 516 || QNo == 519 || QNo == 566 || QNo == 576 || QNo == 599 || QNo == 617 || QNo == 428 || QNo == 483 || QNo == 493 || QNo == 498 || QNo == 504 || QNo == 556 || QNo == 578 || QNo == 624 || QNo == 453 || QNo == 459 || QNo == 465 || QNo == 475 || QNo == 508 || QNo == 518 || QNo == 567 || QNo == 574 || QNo == 585 || QNo == 591 || QNo == 615 || QNo == 464 || QNo == 506 || QNo == 512 || QNo == 514 || QNo == 539 || QNo == 541 || QNo == 571 || QNo == 630)
	{
		toneC = 2;
	}
	else if (QNo == 400 || QNo == 401 || QNo == 405 || QNo == 412 || QNo == 606 || QNo == 456 || QNo == 497 || QNo == 503 || QNo == 553 || QNo == 588)
	{
		toneC = 4;
	}
	else
	{
		toneC = 3;
	}

	if (this.Quest.GetProgress(QNo) == 1)
	{
		this.Message(mesNo);
		this.Message(mesNo + 1);
		this.Message(mesNo + 2);
		this.Message(mesNo + 3);
		this.MessageClose();
		this.Quest.AdvanceProgress(QNo);
	}
	else if (this.Quest.GetProgress(QNo) == 2)
	{
		str = "tone:";
		str += toneC;
		this.Debug.Log(str);

		if (toneC == 2)
		{
			this.Message(mesNo + 1);
		}
		else if (toneC == 3)
		{
			this.Message(mesNo + 2);
		}
		else if (toneC == 4)
		{
			this.Message(mesNo + 3);
		}

		this.MessageClose();
	}
	else if (this.Quest.GetProgress(QNo) == 3)
	{
		this.Message(mesNo + 10);
		this.MessageClose();

		if (this.Item.GetNum(622) >= 1)
		{
			this.INFO_DEL_ITEM(622, 1);
		}
		else if (this.Item.GetNum(623) >= 1)
		{
			this.INFO_DEL_ITEM(622, 1);
		}
		else if (this.Item.GetNum(624) >= 1)
		{
			this.INFO_DEL_ITEM(624, 1);
		}

		this.Message(mesNo + 11);
		this.MessageClose();
		this.Quest.AdvanceProgress(QNo);
	}
	else if (this.Quest.GetProgress(QNo) == 4)
	{
		this.Message(mesNo + 11);
		this.MessageClose();
	}

	this.TalkExit();
}

function LOST_OBJECT( objNo, ItemNo )
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			local i = 0;
			local QNo = 0;

			for( i = 400; i <= 632; i++ )
			{
				if (this.Quest.GetReceiveStatus(i) == 1)
				{
					QNo = i;
				}
			}

			if (this.Quest.GetProgress(QNo) == 2)
			{
				this.Field.MoveOffPlayer();
				this.INFO_GET_ITEM(ItemNo, 1);
				this.Quest.AdvanceProgress(QNo);
				this.Field.EffectVisible(objNo, false);
				this.Field.MoveOnPlayer();
			}
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function QUEST_CLIENT_ViSIBLE( QNo, npcNo )
{
	if (this.Quest.GetReceiveStatus(QNo) == 1)
	{
		this.Field.SetNpcVisible(npcNo, true);
	}
	else
	{
		this.Field.SetNpcVisible(npcNo, false);
	}
}

function TUTORIAL_WINDOW( id )
{
	this.Window.OpenTutorial(id);
	this.WaitTutorialWindow();
	this.Window.CloseTutorial();
	this.WaitCloseTutorialWindow();
}

function HUCKER_BATTLE_SELECT( Mes, battleNo, battleMap )
{
	this.Field.MoveOffPlayer();
	this.NPC_MESSAGE("quest_hucker", 401);
	this.Window.OpenYesNoInfo(5065);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);

	switch(result)
	{
	case 1:
		this.NPC_MESSAGE("quest_hucker", Mes);
		this.Battle.Encount(battleNo, battleMap);
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}
}

function HUCKER_BATTLE_SELECT_DLC( Mes, battleNo, battleMap )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenYesNoInfo(5065);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);

	switch(result)
	{
	case 1:
		this.NPC_MESSAGE("quest_hucker", Mes);
		this.Battle.Encount(battleNo, battleMap);
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}
}

function HUCKER_END_MESSAGE( texID )
{
	this.Talk.Load("quest_hucker");
	this.Talk.SetMode(1);
	this.Message(texID);
	this.MessageClose();

	if (this.Quest.GetProgress(329) == 2)
	{
		this.Message(432);
	}
	else
	{
		this.Message(431);
	}

	this.MessageClose();
	this.TalkExit();
}

function V_UCHIDA_TALK( verNo, npcID )
{
	this.Talk.Load("v_uchikda_message");
	this.Talk.SetMode(1);

	if (!this.Flag.Check(9463))
	{
		this.Message(verNo * 100);
		this.Message(verNo * 100 + 1);
		this.MessageClose();
		this.WaitFrame(0.5);

		if (verNo == 1)
		{
			this.INFO_GET_ITEM(396, 1);
		}
		else if (verNo == 2)
		{
			this.INFO_GET_ITEM(202, 1);
			this.INFO_GET_ITEM(1254, 1);
		}
		else if (verNo == 3)
		{
			this.INFO_GET_ITEM(400, 1);
		}
		else if (verNo == 4)
		{
			this.INFO_GET_ITEM(203, 1);
			this.INFO_GET_ITEM(1317, 1);
		}
		else if (verNo == 5)
		{
			this.INFO_GET_ITEM(395, 1);
		}
		else if (verNo == 6)
		{
			this.INFO_GET_ITEM(204, 1);
			this.INFO_GET_ITEM(1472, 1);
		}
		else if (verNo == 7)
		{
			this.INFO_GET_ITEM(398, 1);
		}
		else if (verNo == 8)
		{
			this.INFO_GET_ITEM(205, 1);
			this.INFO_GET_ITEM(1470, 1);
		}
		else if (verNo == 9)
		{
			this.INFO_GET_ITEM(399, 1);
		}
		else if (verNo == 10)
		{
			this.INFO_GET_ITEM(206, 1);
			this.INFO_GET_ITEM(1382, 1);
		}
		else if (verNo == 11)
		{
			this.INFO_GET_ITEM(381, 1);
		}
		else if (verNo == 12)
		{
			this.INFO_GET_ITEM(207, 1);
			this.INFO_GET_ITEM(1385, 1);
			this.INFO_GET_ITEM(1386, 1);
		}
		else if (verNo == 13)
		{
			this.INFO_GET_ITEM(397, 1);
		}
		else if (verNo == 14)
		{
			this.INFO_GET_ITEM(208, 1);
			this.INFO_GET_ITEM(1474, 1);
			this.INFO_GET_ITEM(1476, 1);
			this.INFO_GET_ITEM(1475, 1);
		}

		this.WaitFrame(0.5);
		this.Message(verNo * 100 + 50);
		this.MessageClose();
		this.TalkExit();

		if (verNo != 14)
		{
			this.FADE_OUT(0, 0.5);
			this.WaitFrame(0.5);
			this.Field.SetNpcVisible(npcID, false);
			this.WaitFrame(0.5);
			this.FADE_IN(0, 0.5);
		}
	}
	else
	{
		this.Message(1450);
		this.MessageClose();
		this.TalkExit();
	}
}

function GET_CSP( get_CSP, Move )
{
	local tpNum = 0;
	this.Field.MoveOffPlayer();
	this.Common.AddTP(get_CSP);
	tpNum = get_CSP;
	this.Window.SetReplaceNumberInfo(tpNum);
	this.INFO_WINDOW(5067);

	if (Move == 0)
	{
		this.Field.MoveOnPlayer();
	}
	else if (Move == 1)
	{
	}
}

function PC_WARP_EFFECT_IN()
{
	this.Field.MoveOffPlayer();
	this.Field.WarpIn("EFF_FLD_WARP_IN", 30, false, false, false);

	while (!this.Field.IsEndWarp())
	{
		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}

	this.Flag.Set(9040);
}

function PC_WARP_EFFECT_OUT()
{
	if (this.Flag.Check(9040))
	{
		this.Field.MoveOffPlayer();
		this.Field.WarpOut("EFF_FLD_WARP_OUT", 30, false, false, false);
		this.FADE_IN(0, 0.5);

		while (!this.Field.IsEndWarp())
		{
			this.WaitFrame(this.Util.SecondFromFrame(0.1));
		}

		this.Flag.Clear(9040);
		this.Field.MoveOnPlayer();
	}
}

function MirrorDungeon_EXIT( type )
{
	this.Field.MoveOffPlayer();
	this.Window.OpenYesNoInfo(5068);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);

	switch(result)
	{
	case 1:
		if (type == 0)
		{
			this.Field.WarpIn("EFF_FLD_WARP_IN", 30, false, false, false);

			while (!this.Field.IsEndWarp())
			{
				this.WaitFrame(this.Util.SecondFromFrame(0.1));
			}
		}

		this.HM_ChangeField("t30", 1, "start_01", 330);
		return true;
		break;

	case 2:
		this.Field.MoveOnPlayer();
		return false;
		break;

	case 3:
		this.Field.MoveOnPlayer();
		return false;
		break;
	}
}

function LOGOUT_NG_TEXT()
{
	if (this.Flag.Check(4))
	{
		if ((this.Flag.Check(1000) && !this.Flag.Check(1003)) && (this.Keyword.GetProgress(100) == 0 || this.Keyword.GetProgress(100) == -2))
		{
			this.NPC_MESSAGE("field_text", 0);
		}
		else if ((this.Flag.Check(1000) && !this.Flag.Check(1003)) && this.Keyword.GetProgress(100) == 1)
		{
			this.NPC_MESSAGE("field_text", 1);
		}
		else if (this.Flag.Check(1003) && !this.Flag.Check(1099))
		{
			this.Field.MoveOffPlayer();
			this.Talk.Load("field_text");
			this.Talk.SetMode(1);
			this.Message(2);
			this.Message(3);
			this.MessageClose();
			this.TalkExit();
			this.Field.MoveOnPlayer();
		}
		else if (this.Quest.GetProgress(57) == 2 || this.Quest.GetProgress(57) == 3)
		{
			this.NPC_MESSAGE("quest_106", 1000);
		}

		this.Flag.Clear(4);
	}
}

function bbs_force_return_check()
{
	this.Debug.Log("Quest_Check");

	if (this.Quest.GetReceiveStatus(39) == 2 && this.Quest.GetReceiveStatus(95) == 2 && !this.Flag.Check(11329))
	{
		this.Debug.Log("Quest_Check_3");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(29) == 2 && !this.Flag.Check(11410))
	{
		this.Debug.Log("Quest_Check_4");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(18) == 2 && this.Quest.GetReceiveStatus(20) == 2 && this.Quest.GetReceiveStatus(28) == 2 && !this.Flag.Check(11501))
	{
		this.Debug.Log("Quest_Check_5_1");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(5) == 2 && this.Quest.GetReceiveStatus(8) == 2 && this.Quest.GetReceiveStatus(19) == 2 && this.Quest.GetReceiveStatus(25) == 2 && !this.Flag.Check(11517))
	{
		this.Debug.Log("Quest_Check_5_2");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(12) == 2 && this.Quest.GetReceiveStatus(31) == 2 && !this.Flag.Check(11614))
	{
		this.Debug.Log("Quest_Check_6");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(3) == 2 && this.Quest.GetReceiveStatus(9) == 2 && !this.Flag.Check(11799))
	{
		this.Debug.Log("Quest_Check_7");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(4) == 2 && this.Quest.GetReceiveStatus(6) == 2 && !this.Flag.Check(11899))
	{
		this.Debug.Log("Quest_Check_8");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(7) == 2 && !this.Flag.Check(11905))
	{
		this.Debug.Log("Quest_Check_9");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(22) == 2 && !this.Flag.Check(12001))
	{
		this.Debug.Log("Quest_Check_10");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && !this.Flag.Check(12110))
	{
		this.Debug.Log("Quest_Check_11");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(11) == 2 && this.Quest.GetReceiveStatus(21) == 2 && this.Quest.GetReceiveStatus(30) == 2 && !this.Flag.Check(12302))
	{
		this.Debug.Log("Quest_Check_13");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(10) == 2 && this.Quest.GetReceiveStatus(17) == 2 && this.Quest.GetReceiveStatus(23) == 2 && !this.Flag.Check(12405))
	{
		this.Debug.Log("Quest_Check_14");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(16) == 2 && this.Quest.GetReceiveStatus(24) == 2 && !this.Flag.Check(12601))
	{
		this.Debug.Log("Quest_Check_16");
		this.Quest.BBSForceReturnField();
	}
	else if (this.Quest.GetReceiveStatus(13) == 2 && this.Quest.GetReceiveStatus(15) == 2 && this.Quest.GetReceiveStatus(61) == 2 && !this.Flag.Check(12702))
	{
		this.Debug.Log("Quest_Check_17");
		this.Quest.BBSForceReturnField();
	}
}

function HM_field_init()
{
	this.Flag.Clear(19235);
	this.Flag.Clear(19267);
	this.Flag.Clear(19297);
	this.Flag.Clear(19298);
	this.HM_labo_hacker_set();
	this.HM_EDEN_LANDING_SET();
	this.Flag.Clear(19017);
	this.Flag.Clear(19018);
	this.Flag.Clear(19019);
	this.Flag.Clear(19020);
	this.Flag.Clear(19038);
	this.Flag.Clear(19039);
	this.Flag.Clear(19040);
	this.Flag.Clear(19041);
	this.Flag.Clear(19042);
	this.Flag.Clear(19043);
	this.Flag.Set(10017);
	this.Flag.Clear(15506);
	this.HM_guest_teima();
	this.HM_Quest_Receive_Check();

	if (this.Flag.Check(19200) || this.Flag.Check(15780))
	{
		this.Flag.Set(19272);
	}
	else
	{
		this.Flag.Clear(19272);
	}

	if (this.Flag.Check(12799) && !this.Flag.Check(10055))
	{
		this.Flag.Clear(19269);
	}
	else
	{
		this.Flag.Set(19269);
	}
}

function HM_field_load_skip_init()
{
	this.HM_map_release();
	this.HM_ap_Set();
	this.HM_emblem_main_story_gest_back();
	this.Flag.Clear(19246);
	this.Flag.Clear(19252);
}

function HM_labo_hacker_set()
{
	if (this.Quest.GetReceiveStatus(73) == 2)
	{
		this.Flag.Set(15383);
	}

	if (this.Quest.GetReceiveStatus(80) == 2)
	{
		this.Flag.Set(15384);
	}

	if (this.Quest.GetReceiveStatus(66) == 2)
	{
		this.Flag.Set(15385);
	}

	if (this.Quest.GetReceiveStatus(71) == 2)
	{
		this.Flag.Set(15386);
	}

	if (this.Quest.GetReceiveStatus(69) == 2)
	{
		this.Flag.Set(15387);
	}

	if (this.Quest.GetReceiveStatus(70) == 2)
	{
		this.Flag.Set(15388);
	}

	if (this.Quest.GetReceiveStatus(83) == 2)
	{
		this.Flag.Set(15389);
	}

	if (this.Quest.GetReceiveStatus(75) == 2)
	{
		this.Flag.Set(15390);
	}

	if (this.Quest.GetReceiveStatus(77) == 2)
	{
		this.Flag.Set(15391);
	}

	if (this.Quest.GetReceiveStatus(79) == 2)
	{
		this.Flag.Set(15392);
	}

	if (this.Quest.GetReceiveStatus(76) == 2)
	{
		this.Flag.Set(15393);
	}

	if (this.Quest.GetReceiveStatus(84) == 2)
	{
		this.Flag.Set(15394);
	}

	if (this.Quest.GetReceiveStatus(82) == 2)
	{
		this.Flag.Set(15395);
	}

	if (this.Quest.GetReceiveStatus(68) == 2)
	{
		this.Flag.Set(15396);
	}

	if (this.Quest.GetReceiveStatus(81) == 2)
	{
		this.Flag.Set(15397);
	}

	if (this.Quest.GetReceiveStatus(78) == 2)
	{
		this.Flag.Set(15398);
	}

	if (this.Quest.GetReceiveStatus(65) == 2)
	{
		this.Flag.Set(15399);
	}
}

function HM_Quest_Receive_Check()
{
	local i = 0;
	local check = 0;
	local quest_start_num = 1;
	local quest_end_num = 144;
	local emblem_init_check_flag = 1;
	this.Flag.Clear(19268);

	for( i = quest_start_num; i <= quest_end_num; i++ )
	{
		if (this.Quest.GetReceiveStatus(i) == 1)
		{
			this.Flag.Set(19268);

			if (65 <= i && i <= 74)
			{
				if (this.Quest.GetProgress(i) <= 2)
				{
					this.Debug.Log("Emblem_Quest_IS_RECEIVE");
					emblem_init_check_flag = 0;
				}
			}
		}
	}

	if (emblem_init_check_flag == 1)
	{
		this.HM_emblem_init();
	}
}

function HM_DLC_Digimon_Receive( DLC_flag_id, Digimon_id, Digimon_GET_id, Flag_id, Info_id, CS_Flag_id )
{
	this.INFO_WINDOW(Info_id);

	if (this.Common.GetPartyEmptyNum() == 0)
	{
		this.Debug.Log("NO_SLOT");
		this.Message(3040);
		this.MessageClose();
		return 1;
	}
	else if (this.Common.GetFreePartyMemory() < this.Digimon.GetMemory(Digimon_id))
	{
		this.Debug.Log("NO_MEMORY");
		this.Message(3030);
		this.Talk.SetString(this.Common.GetCharName(Digimon_id + 1000));
		this.Talk.SetNumber(this.Digimon.GetMemory(Digimon_id));
		this.Message(3031);
		this.MessageClose();
		return 2;
	}
	else
	{
		this.Debug.Log("GET");
		this.Field.AddPartyFormal(Digimon_GET_id);
		this.Flag.Set(Flag_id);
		this.Flag.Set(DLC_flag_id);
		this.Flag.Set(CS_Flag_id);
		return 0;
	}
}

function HM_Digimon_Invisible()
{
	if (this.Flag.Check(12200) && !this.Flag.Check(12209))
	{
		this.Field.SetEnableDigimonDraw(false);
	}
	else
	{
		this.Field.SetEnableDigimonDraw(true);
	}
}

function HM_ChangeField( map, area, loc, rote )
{
	this.Flag.Set(19252);
	this.Field.ChangeField(map, area, loc, rote);
}

function HM_guest_teima()
{
	this.Flag.Clear(10033);

	if (this.Common.GetFieldGuest() == 1805)
	{
		this.Flag.Set(10033);
	}

	if (this.Common.GetFieldGuest() == 1050)
	{
		this.Flag.Set(10033);
	}

	if (this.Common.GetFieldGuest() == 1391)
	{
		this.Flag.Set(10033);
	}

	if (this.Common.GetFieldGuest() == 1035)
	{
		this.Flag.Set(10033);
	}

	if (this.Common.GetFieldGuest() == 1072)
	{
		this.Flag.Set(10033);
	}

	if (this.Common.GetFieldGuest() == 1359)
	{
		this.Flag.Set(10033);
	}
}

function HM_ap_Set()
{
	this.Flag.Set(19247);

	if (this.Flag.Check(11000) && !this.Flag.Check(11218))
	{
		this.Flag.Clear(19247);
	}
}

function Tutorial_069()
{
	if (this.Flag.Check(19248) && !this.Flag.Check(14364))
	{
		this.Field.MoveOffPlayer();

		if (!this.Flag.Check(19245))
		{
			this.FADE_IN(0, 0.5);
			this.WaitFrame(0.5);
		}

		this.TUTORIAL_WINDOW(69);
		this.Flag.Set(14364);
		this.WaitFrame(0.1);
		this.Field.MoveOnPlayer();
	}

	this.Flag.Clear(19245);
}

function HM_Digi_Line_Send()
{
	local Chika_Flag = 17406;

	if (this.Quest.GetProgress(20) >= 1 && this.Quest.GetProgress(20) <= 4)
	{
		this.Flag.Set(10026);
		this.Digiline.SetEnable(false);
	}
	else if (this.Flag.Check(12502) && !this.Flag.Check(12505))
	{
		this.Flag.Set(10026);
		this.Digiline.SetEnable(false);
	}
	else if (this.Flag.Check(12509) && !this.Flag.Check(12513))
	{
		this.Flag.Set(10026);
		this.Digiline.SetEnable(false);
	}
	else if (this.Flag.Check(12708) && !this.Flag.Check(12710))
	{
		this.Flag.Set(10026);
		this.Digiline.SetEnable(false);
	}
	else if (this.Flag.Check(12823))
	{
		this.Flag.Set(10026);
		this.Digiline.SetEnable(false);
	}
	else
	{
		this.Flag.Clear(10026);
		this.Digiline.SetEnable(true);
	}

	if (this.Flag.Check(11203) && !this.Flag.Check(19420))
	{
		this.Digiline.Send(45001);
		this.Digiline.Send(45002);
		this.Digiline.Send(45003);
		this.Flag.Set(19420);
	}

	if (this.Flag.Check(11205) && !this.Flag.Check(19421))
	{
		this.Digiline.Send(45004);
		this.Digiline.Send(45005);
		this.Digiline.Send(45006);
		this.Flag.Set(19421);
	}

	if (this.Flag.Check(11303) && !this.Flag.Check(19422))
	{
		this.Digiline.Send(45007);
		this.Digiline.Send(45008);
		this.Digiline.Send(45009);
		this.Flag.Set(19422);
	}

	if (this.Flag.Check(11306) && !this.Flag.Check(19423))
	{
		this.Digiline.Send(45010);
		this.Flag.Set(19423);
	}

	if (this.Flag.Check(11313) && !this.Flag.Check(19424))
	{
		this.Digiline.Send(45011);
		this.Flag.Set(19424);
	}

	if (this.Flag.Check(11403) && !this.Flag.Check(19425))
	{
		this.Digiline.Send(45012);
		this.Flag.Set(19425);
	}

	if (this.Flag.Check(11407) && !this.Flag.Check(19426))
	{
		this.Digiline.Send(45013);
		this.Flag.Set(19426);
	}

	if (this.Flag.Check(11409) && !this.Flag.Check(19427))
	{
		this.Digiline.Send(45014);
		this.Flag.Set(19427);
	}

	if (this.Flag.Check(11416) && !this.Flag.Check(19428))
	{
		this.Digiline.Send(45015);
		this.Flag.Set(19428);
	}

	if (this.Flag.Check(11500) && !this.Flag.Check(19429))
	{
		this.Digiline.Send(45016);
		this.Digiline.Send(45017);
		this.Digiline.Send(45018);
		this.Flag.Set(19429);
	}

	if (this.Flag.Check(11502) && !this.Flag.Check(19430))
	{
		this.Digiline.Send(45019);
		this.Flag.Set(19430);
	}

	if (this.Flag.Check(11511) && !this.Flag.Check(19431))
	{
		this.Digiline.Send(45021);
		this.Flag.Set(19431);
	}

	if (this.Flag.Check(11511) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19432))
	{
		this.Digiline.Send(45020);
		this.Flag.Set(19432);
	}

	if (this.Flag.Check(11516) && !this.Flag.Check(19433))
	{
		this.Digiline.Send(45022);
		this.Digiline.Send(45023);
		this.Digiline.Send(45024);
		this.Flag.Set(19433);
	}

	if (this.Flag.Check(11603) && !this.Flag.Check(19434))
	{
		this.Digiline.Send(45025);
		this.Digiline.Send(45026);
		this.Flag.Set(19434);
	}

	if (this.Flag.Check(11613) && !this.Flag.Check(19435))
	{
		this.Digiline.Send(45027);
		this.Digiline.Send(45029);
		this.Flag.Set(19435);
	}

	if (this.Flag.Check(11613) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19436))
	{
		this.Digiline.Send(45028);
		this.Flag.Set(19436);
	}

	if (this.Flag.Check(11702) && !this.Flag.Check(19437))
	{
		this.Digiline.Send(45031);
		this.Digiline.Send(45032);
		this.Digiline.Send(45033);
		this.Flag.Set(19437);
	}

	if (this.Flag.Check(11702) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19438))
	{
		this.Digiline.Send(45030);
		this.Flag.Set(19438);
	}

	if (this.Flag.Check(11705) && !this.Flag.Check(19439))
	{
		this.Digiline.Send(45034);
		this.Digiline.Send(45035);
		this.Digiline.Send(45036);
		this.Flag.Set(19439);
	}

	if (this.Flag.Check(11802) && !this.Flag.Check(19440))
	{
		this.Digiline.Send(45037);
		this.Flag.Set(19440);
	}

	if (this.Flag.Check(11802) && !this.Flag.Check(19441))
	{
		this.Digiline.Send(45038);
		this.Flag.Set(19441);
	}

	if (this.Flag.Check(11815) && !this.Flag.Check(19442))
	{
		this.Digiline.Send(45040);
		this.Digiline.Send(45041);
		this.Flag.Set(19442);
	}

	if (this.Flag.Check(11815) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19443))
	{
		this.Digiline.Send(45039);
		this.Flag.Set(19443);
	}

	if (this.Flag.Check(11904) && !this.Flag.Check(19444))
	{
		this.Digiline.Send(45042);
		this.Flag.Set(19444);
	}

	if (this.Flag.Check(11906) && !this.Flag.Check(19445))
	{
		this.Digiline.Send(45043);
		this.Digiline.Send(45044);
		this.Flag.Set(19445);
	}

	if (this.Flag.Check(11909) && !this.Flag.Check(19446))
	{
		this.Digiline.Send(45045);
		this.Flag.Set(19446);
	}

	if (this.Flag.Check(11909) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19447))
	{
		this.Digiline.Send(45046);
		this.Flag.Set(19447);
	}

	if (this.Flag.Check(12001) && !this.Flag.Check(19448))
	{
		this.Digiline.Send(45047);
		this.Digiline.Send(45048);
		this.Flag.Set(19448);
	}

	if (this.Flag.Check(12007) && !this.Flag.Check(19449))
	{
		this.Digiline.Send(45049);
		this.Digiline.Send(45050);
		this.Digiline.Send(45051);
		this.Flag.Set(19449);
	}

	if (this.Flag.Check(12010) && !this.Flag.Check(19450))
	{
		if (this.Flag.Check(Chika_Flag))
		{
			this.Digiline.Send(45052);
			this.Flag.Set(19450);
		}
	}

	if (this.Flag.Check(12102) && !this.Flag.Check(19451))
	{
		this.Digiline.Send(45053);
		this.Flag.Set(19451);
	}

	if (this.Flag.Check(12109) && !this.Flag.Check(19452))
	{
		this.Digiline.Send(45054);
		this.Flag.Set(19452);
	}

	if (this.Flag.Check(12112) && !this.Flag.Check(19453))
	{
		if (this.Flag.Check(Chika_Flag))
		{
			this.Digiline.Send(45055);
			this.Flag.Set(19453);
		}
	}

	if (this.Flag.Check(12114) && !this.Flag.Check(19454))
	{
		this.Digiline.Send(45056);
		this.Flag.Set(19454);
	}

	if (this.Flag.Check(12202) && !this.Flag.Check(19455))
	{
		this.Digiline.Send(45058);
		this.Flag.Set(19455);
	}

	if (this.Flag.Check(12202) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19456))
	{
		this.Digiline.Send(45057);
		this.Flag.Set(19456);
	}

	if (this.Flag.Check(12202) && !this.Flag.Check(19457))
	{
		this.Digiline.Send(45059);
		this.Flag.Set(19457);
	}

	if (this.Flag.Check(12300) && !this.Flag.Check(19458))
	{
		this.Digiline.Send(45061);
		this.Digiline.Send(45062);
		this.Flag.Set(19458);
	}

	if (this.Flag.Check(12300) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19459))
	{
		this.Digiline.Send(45060);
		this.Flag.Set(19459);
	}

	if (this.Flag.Check(12402) && !this.Flag.Check(19460))
	{
		this.Digiline.Send(45063);
		this.Digiline.Send(45064);
		this.Flag.Set(19460);
	}

	if (this.Flag.Check(12405) && !this.Flag.Check(19461))
	{
		this.Digiline.Send(45066);
		this.Flag.Set(19461);
	}

	if (this.Flag.Check(12405) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19462))
	{
		this.Digiline.Send(45065);
		this.Flag.Set(19462);
	}

	if (this.Flag.Check(12406) && !this.Flag.Check(19463))
	{
		this.Digiline.Send(45067);
		this.Digiline.Send(45068);
		this.Flag.Set(19463);
	}

	if (this.Flag.Check(12501) && !this.Flag.Check(19464))
	{
		this.Digiline.Send(45069);
		this.Digiline.Send(45070);
		this.Flag.Set(19464);
	}

	if (this.Flag.Check(12508) && !this.Flag.Check(19465))
	{
		this.Digiline.Send(45072);
		this.Flag.Set(19465);
	}

	if (this.Flag.Check(12508) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19466))
	{
		this.Digiline.Send(45071);
		this.Flag.Set(19466);
	}

	if (this.Flag.Check(12600) && !this.Flag.Check(19467) && this.Quest.GetReceiveStatus(16) == 2)
	{
		this.Digiline.Send(45074);
		this.Flag.Set(19467);
	}

	if (this.Flag.Check(12600) && this.Flag.Check(Chika_Flag) && !this.Flag.Check(19468))
	{
		this.Digiline.Send(45073);
		this.Flag.Set(19468);
	}

	if (this.Flag.Check(12602) && !this.Flag.Check(19469))
	{
		this.Digiline.Send(45075);
		this.Digiline.Send(45076);
		this.Digiline.Send(45077);
		this.Flag.Set(19469);
	}

	if (this.Flag.Check(12700) && !this.Flag.Check(19470))
	{
		if (this.Flag.Check(Chika_Flag))
		{
			this.Digiline.Send(45078);
			this.Flag.Set(19470);
		}
	}

	if (this.Flag.Check(12702) && !this.Flag.Check(19471))
	{
		this.Digiline.Send(45079);
		this.Digiline.Send(45080);
		this.Flag.Set(19471);
	}

	if (this.Flag.Check(12707) && !this.Flag.Check(19472))
	{
		this.Digiline.Send(45081);
		this.Digiline.Send(45082);
		this.Digiline.Send(45083);
		this.Flag.Set(19472);
	}

	if (this.Flag.Check(12804) && !this.Flag.Check(19473))
	{
		if (this.Flag.Check(Chika_Flag))
		{
			this.Digiline.Send(45084);
			this.Digiline.Send(45085);
			this.Flag.Set(19473);
		}
	}

	if (this.Flag.Check(12807) && !this.Flag.Check(19474))
	{
		this.Digiline.Send(45086);
		this.Digiline.Send(45087);
		this.Flag.Set(19474);
	}

	if (this.Flag.Check(12811) && !this.Flag.Check(19475))
	{
		if (this.Flag.Check(19481))
		{
			this.Digiline.Send(45088);
			this.Flag.Set(19475);
		}
	}

	if (this.Quest.GetProgress(46) >= 1 && !this.Flag.Check(19476))
	{
		this.Digiline.Send(65001);
		this.Digiline.Send(65002);
		this.Flag.Set(19476);
	}

	if (this.Quest.GetProgress(47) >= 1 && !this.Flag.Check(19477))
	{
		this.Digiline.Send(65003);
		this.Flag.Set(19477);
	}

	if (this.Quest.GetProgress(50) >= 3 && !this.Flag.Check(19478))
	{
		this.Digiline.Send(65004);
		this.Flag.Set(19478);
	}

	if (this.Quest.GetProgress(60) >= 1 && !this.Flag.Check(19479))
	{
		this.Digiline.Send(65006);
		this.Flag.Set(19479);
	}

	if (this.Flag.Check(11321) && !this.Flag.Check(11403) || this.Flag.Check(12120))
	{
		this.Flag.Set(19414);
	}
	else
	{
		this.Flag.Clear(19414);
	}

	if (this.Flag.Check(11406) && !this.Flag.Check(11500) || this.Flag.Check(11602) && !this.Flag.Check(11613) || this.Flag.Check(12006) && !this.Flag.Check(12023))
	{
		this.Flag.Set(19417);
	}
	else
	{
		this.Flag.Clear(19417);
	}

	if (this.Flag.Check(11918) && !this.Flag.Check(12003) || this.Flag.Check(12022) || this.Flag.Check(12120))
	{
		this.Flag.Set(19415);
	}
	else
	{
		this.Flag.Clear(19415);
	}

	if (this.Flag.Check(12023) && !this.Flag.Check(12212) || this.Flag.Check(12120))
	{
		this.Flag.Set(19412);
	}
	else
	{
		this.Flag.Clear(19412);
	}

	if (this.Flag.Check(12100) || this.Flag.Check(12120))
	{
		this.Flag.Set(19416);
	}

	if (this.Flag.Check(12120))
	{
		this.Flag.Set(19410);
	}

	if (this.Flag.Check(12212) && !this.Flag.Check(12404) || this.Flag.Check(12506) && !this.Flag.Check(12516) || this.Flag.Check(12700) && !this.Flag.Check(12701) || this.Flag.Check(12707))
	{
		this.Flag.Set(19418);
	}
	else
	{
		this.Flag.Clear(19418);
	}

	if (this.Flag.Check(12707))
	{
		this.Flag.Set(19411);
		this.Flag.Set(19419);
	}
}

function Event_BBS_Check_Text()
{
	if (this.Flag.Check(15500))
	{
		this.Field.MoveOffPlayer();

		if (this.Flag.Check(19297) || this.Flag.Check(19298))
		{
			this.HM_Play_BGM_CustomSound(this.Work.Get(40), 0.0);
		}
		else
		{
			this.HM_Play_BGM(this.Work.Get(40), 0.0);
		}

		if (this.Flag.Check(15507))
		{
			this.Field.SetVisible(true);
			this.FADE_IN(0, 0.5);
		}

		this.Flag.Clear(15507);
		this.Talk.Load("t5003");
		this.Talk.SetMode(1);
		this.Message(306);
		this.MessageClose();
		this.TalkExit();
		this.Field.MoveOnPlayer();
	}

	this.Flag.Clear(15500);
}

function HM_CHAPTER_END_SAVE( mapName, Area, Locater, Angle )
{
	this.Field.MoveOffPlayer();
	this.Fade.CloseLoading();
	this.Window.OpenYesNoInfo(5055);
	this.WaitYesNoInfoWindow();
	local result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	this.WaitFrame(0.5);

	switch(result)
	{
	case 1:
		this.Field.SaveUI(mapName, Area);
		local i = 0;

		while (!this.Field.IsEndSaveUI())
		{
			this.WaitFrame(this.Util.SecondFromFrame(1));
		}

		this.Field.MoveOnPlayer();
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}

	this.Flag.Clear(19294);
	this.Flag.Clear(19295);
	this.HM_ChangeField(mapName, Area, Locater, Angle);
}

function HM_GAME_END_SAVE( mapName, Area, Locater, Angle )
{
	this.Field.MoveOffPlayer();
	this.INFO_WINDOW(3200);
	local loop_flag = 1;
	loop_flag = 1;

	while (loop_flag == 1)
	{
		this.Window.OpenYesNoInfo(6015);
		this.WaitYesNoInfoWindow();
		local result = this.Window.GetResultYesNoInfo();
		this.Window.CloseYesNoInfo();
		this.WaitCloseYesNoInfoWindow();
		this.WaitFrame(0.5);

		switch(result)
		{
		case 1:
			this.Field.SaveUI(mapName, Area);
			local i = 0;

			while (!this.Field.IsEndSaveUI())
			{
				this.WaitFrame(this.Util.SecondFromFrame(1));
			}

			loop_flag = 0;
			break;

		case 2:
			this.Window.OpenYesNoInfo(6016);
			this.WaitYesNoInfoWindow();
			local result = this.Window.GetResultYesNoInfo();
			this.Window.CloseYesNoInfo();
			this.WaitCloseYesNoInfoWindow();
			this.WaitFrame(0.5);

			switch(result)
			{
			case 1:
				loop_flag = 0;
				break;

			case 2:
				loop_flag = 1;
				break;

			case 3:
				loop_flag = 1;
				break;
			}

			break;

		case 3:
			this.Window.OpenYesNoInfo(6016);
			this.WaitYesNoInfoWindow();
			local result = this.Window.GetResultYesNoInfo();
			this.Window.CloseYesNoInfo();
			this.WaitCloseYesNoInfoWindow();
			this.WaitFrame(0.5);

			switch(result)
			{
			case 1:
				loop_flag = 0;
				continue;

			case 2:
				loop_flag = 1;
				continue;

			case 3:
				loop_flag = 1;
				  // [134]  OP_JMP            0      0    0    0

			default:
				break;
			}
		}
	}

	this.Flag.Clear(19294);
	this.Flag.Clear(19295);
	this.Field.MoveOnPlayer();
	this.HM_ChangeField(mapName, Area, Locater, Angle);
}

function HM_map_release()
{
	this.Flag.Set(14035);

	if (this.Quest.GetProgress(2) == 2)
	{
		this.Flag.Set(14025);
	}

	if (this.Flag.Check(11205))
	{
		this.Flag.Set(14000);
	}

	if (this.Flag.Check(11208))
	{
		this.Flag.Set(14001);
	}

	if (this.Flag.Check(11210))
	{
		this.Flag.Set(14011);
	}

	if (this.Quest.GetProgress(39) == 1 || this.Quest.GetProgress(95) == 1)
	{
		this.Flag.Set(14016);
	}

	if (this.Flag.Check(11306))
	{
		this.Flag.Set(14023);
	}

	if (this.Flag.Check(11307))
	{
		this.Flag.Set(14038);
	}

	if (this.Flag.Check(11311))
	{
		this.Flag.Clear(14038);
	}

	if (this.Flag.Check(11315))
	{
		this.Flag.Set(14008);
	}

	if (this.Flag.Check(11402))
	{
		this.Flag.Set(14027);
	}

	if (this.Flag.Check(11407))
	{
		this.Flag.Set(14026);
	}

	if (this.Flag.Check(11410))
	{
		this.Flag.Set(14003);
	}

	if (this.Flag.Check(11412))
	{
		this.Flag.Set(14022);
	}

	if (this.Flag.Check(11413))
	{
		this.Flag.Set(14021);
	}

	if (this.Flag.Check(11501))
	{
		this.Flag.Set(14028);
	}

	if (this.Flag.Check(11511))
	{
		this.Flag.Set(14007);
	}

	if (this.Flag.Check(11909))
	{
		this.Flag.Set(14037);
	}

	if (this.Flag.Check(12007))
	{
		this.Flag.Set(14024);
	}

	if (this.Flag.Check(12102))
	{
		this.Flag.Set(14006);
	}

	if (this.Flag.Check(12122))
	{
		this.Flag.Set(14034);
	}

	if (this.Flag.Check(12115))
	{
		this.Flag.Set(14010);
	}

	if (this.Flag.Check(12202))
	{
		this.Flag.Set(14031);
	}

	if (this.Flag.Check(12508))
	{
		this.Flag.Set(14005);
	}

	if (this.Flag.Check(12701))
	{
		this.Flag.Set(14032);
	}

	if (this.Flag.Check(12800) || this.Quest.GetReceiveStatus(54) == 1)
	{
		this.Flag.Set(14033);
	}

	if (this.Quest.GetProgress(16) >= 3 && this.Quest.GetProgress(16) <= 4)
	{
		this.Flag.Set(14041);
	}
	else
	{
		this.Flag.Clear(14041);
	}

	if (this.Quest.GetProgress(18) >= 4 && this.Quest.GetProgress(18) <= 5)
	{
		this.Flag.Set(14039);
	}
	else
	{
		this.Flag.Clear(14039);
	}

	if (this.Quest.GetProgress(22) == 3 || this.Quest.GetReceiveStatus(22) == 2)
	{
		this.Flag.Set(14029);
	}

	if (this.Quest.GetProgress(22) == 5 || this.Quest.GetReceiveStatus(22) == 2)
	{
		this.Flag.Set(14030);
	}

	if (this.Quest.GetProgress(22) >= 6 && this.Quest.GetProgress(22) <= 7)
	{
		this.Flag.Set(14040);
	}
	else
	{
		this.Flag.Clear(14040);
	}

	if (this.Quest.GetProgress(25) >= 2 && this.Quest.GetProgress(25) <= 4)
	{
		this.Flag.Set(14056);
	}
	else
	{
		this.Flag.Clear(14056);
	}

	if (this.Quest.GetProgress(27) >= 1 && this.Quest.GetProgress(27) <= 4)
	{
		this.Flag.Set(14055);
	}
	else
	{
		this.Flag.Clear(14055);
	}

	if (this.Quest.GetProgress(28) >= 1 && this.Quest.GetProgress(28) <= 4)
	{
		this.Flag.Set(14054);
	}
	else
	{
		this.Flag.Clear(14054);
	}

	if (this.Quest.GetProgress(31) >= 3 && this.Quest.GetProgress(31) <= 4)
	{
		this.Flag.Set(14053);
	}
	else
	{
		this.Flag.Clear(14053);
	}

	if (this.Quest.GetProgress(63) >= 3 && this.Quest.GetProgress(63) <= 5)
	{
		this.Flag.Set(14042);
	}
	else
	{
		this.Flag.Clear(14042);
	}

	if (this.Quest.GetProgress(36) >= 3 && this.Quest.GetProgress(36) <= 6)
	{
		this.Flag.Set(14049);
	}
	else
	{
		this.Flag.Clear(14049);
	}

	if (this.Quest.GetProgress(37) >= 3 && this.Quest.GetProgress(37) <= 5)
	{
		this.Flag.Set(14043);
	}
	else
	{
		this.Flag.Clear(14043);
	}

	if (this.Quest.GetProgress(38) >= 1 && this.Quest.GetProgress(38) <= 3)
	{
		this.Flag.Set(14051);
	}
	else
	{
		this.Flag.Clear(14051);
	}

	if (this.Quest.GetProgress(40) >= 3 && this.Quest.GetProgress(40) <= 6)
	{
		this.Flag.Set(14044);
	}
	else
	{
		this.Flag.Clear(14044);
	}

	if (this.Quest.GetProgress(42) >= 1 && this.Quest.GetProgress(42) <= 4)
	{
		this.Flag.Set(14045);
	}
	else
	{
		this.Flag.Clear(14045);
	}

	if (this.Quest.GetProgress(48) >= 1 && this.Quest.GetProgress(48) <= 5)
	{
		this.Flag.Set(14047);
	}
	else
	{
		this.Flag.Clear(14047);
	}

	if (this.Quest.GetProgress(50) >= 1 && this.Quest.GetProgress(50) <= 5)
	{
		this.Flag.Set(14046);
	}
	else
	{
		this.Flag.Clear(14046);
	}

	if (this.Quest.GetProgress(51) >= 1 && this.Quest.GetProgress(51) <= 4)
	{
		this.Flag.Set(14050);
	}
	else
	{
		this.Flag.Clear(14050);
	}

	if (this.Quest.GetProgress(52) >= 5 && this.Quest.GetProgress(52) <= 6)
	{
		this.Flag.Set(14052);
	}
	else
	{
		this.Flag.Clear(14052);
	}

	if (this.Quest.GetProgress(53) >= 1 && this.Quest.GetProgress(53) <= 3)
	{
		this.Flag.Set(14048);
	}
	else
	{
		this.Flag.Clear(14048);
	}

	if (this.Quest.GetProgress(64) >= 2 && this.Quest.GetProgress(64) <= 5 || this.Quest.GetReceiveStatus(64) == 2)
	{
		this.Flag.Set(14036);
	}
	else
	{
		this.Flag.Clear(14036);
	}
}

function HM_map_move_limit( Textdate, TextID, MoveFlag, locatorName )
{
	this.Field.MoveOffPlayer();
	this.NPC_MESSAGE(Textdate, TextID);

	if (MoveFlag == true)
	{
		this.Field.MovePlayer(locatorName);

		while (this.Field.IsMovePlayer())
		{
			this.WaitFrame(this.Util.SecondFromFrame(0.1));
		}
	}

	this.Field.MoveOnPlayer();
}

function HM_Play_BGM( BGMnum, fade_time )
{
	if (!this.Flag.Check(19252))
	{
		if (this.Flag.Check(19235))
		{
			if (BGMnum < 10)
			{
				this.Field.PlayBGM("M0" + BGMnum + "_b", fade_time);
			}
			else
			{
				this.Field.PlayBGM("M" + BGMnum + "_b", fade_time);
			}
		}
		else if (this.Flag.Check(19267))
		{
			if (BGMnum < 10)
			{
				this.Debug.Log("BGM_ID_M0" + BGMnum + "_04");
				this.Field.PlayBGM("M0" + BGMnum + "_04", fade_time);
			}
			else
			{
				this.Debug.Log("BGM_ID_M" + BGMnum + "_04");
				this.Field.PlayBGM("M" + BGMnum + "_04", fade_time);
			}
		}
		else if (BGMnum < 10)
		{
			this.Field.PlayBGM("M0" + BGMnum, fade_time);
		}
		else
		{
			this.Field.PlayBGM("M" + BGMnum, fade_time);
		}
	}

	this.Flag.Clear(19252);
	this.Tutorial_069();
	this.HM_Digi_Line_Send();
}

function HM_Play_BGM_CustomSound( BGMnum, fade_time )
{
	if (!this.Flag.Check(19252))
	{
		if (this.Flag.Check(19235))
		{
			if (BGMnum < 10)
			{
				this.Field.PlayBGM_CustomSound("M0" + BGMnum + "_b", fade_time);
			}
			else
			{
				this.Field.PlayBGM_CustomSound("M" + BGMnum + "_b", fade_time);
			}
		}
		else if (this.Flag.Check(19267))
		{
			if (BGMnum < 10)
			{
				this.Debug.Log("BGM_ID_M0" + BGMnum + "_04");
				this.Field.PlayBGM_CustomSound("M0" + BGMnum + "_04", fade_time);
			}
			else
			{
				this.Debug.Log("BGM_ID_M" + BGMnum + "_04");
				this.Field.PlayBGM_CustomSound("M" + BGMnum + "_04", fade_time);
			}
		}
		else if (BGMnum < 10)
		{
			this.Field.PlayBGM_CustomSound("M0" + BGMnum, fade_time);
		}
		else
		{
			this.Field.PlayBGM_CustomSound("M" + BGMnum, fade_time);
		}
	}

	this.Flag.Clear(19252);
	this.Tutorial_069();
	this.HM_Digi_Line_Send();
}

function HM_Play_BGM_load_set( BGMnum, _b_flag )
{
	this.Work.Set(40, BGMnum);

	if ("_b" == _b_flag)
	{
		this.Flag.Set(19235);
	}

	if ("_04" == _b_flag)
	{
		this.Flag.Set(19267);
	}
}

function HM_EVENT_START_SET( EvtVer )
{
	if (EvtVer == 0)
	{
		this.Sound.StopBGM(0.0);
		this.Field.SetVisible(true);
		this.Field.MoveOffPlayer();
		this.FADE_IN(0, 0.5);
	}

	if (EvtVer == 1)
	{
		this.Field.MoveOffPlayer();
		this.FADE_OUT(0, 0.5);
		this.Field.SetPlayerVisible(false);
		this.Field.SetDigimonVisible(false);
		this.Field.SetTBoxVisible(-1, false);
	}

	if (EvtVer == 2)
	{
		this.Field.SetVisible(true);
		this.Field.MoveOffPlayer();
	}

	this.WaitFrame(0.1);
}

function HM_EVENT_END_SET( evtNo )
{
	this.Field.SetVisible(true);

	if (evtNo == 1)
	{
		this.Field.SetPlayerVisible(true);
		this.Field.SetDigimonVisible(true);
		this.FADE_IN(0, 0.5);
		this.Field.SetTBoxVisible(-1, true);
	}

	if (evtNo == 2)
	{
	}
	else
	{
		if (this.Flag.Check(19297) || this.Flag.Check(19298))
		{
			this.HM_Play_BGM_CustomSound(this.Work.Get(40), 0.0);
		}
		else
		{
			this.HM_Play_BGM(this.Work.Get(40), 0.0);
		}

		this.WaitFrame(0.5);
	}

	this.WaitFrame(0.1);
	this.Field.MoveOnPlayer();
}

function HM_TALK_TO_VISTA_EVENT()
{
	this.Field.MoveOffPlayer();
	this.Field.SetPlayerVisible(false);
	this.Field.SetDigimonVisible(false);
	this.Field.SetTBoxVisible(-1, false);
}

function HM_MAP_SET_INVISIBLE( ObjFlag, NPCFlag, EffctFlag, TraserFlag, PlayerFlag )
{
	if (ObjFlag == false)
	{
		this.Field.SetGimmickVisible("", false);
	}
	else
	{
		this.Field.SetGimmickVisible("", true);
	}

	if (NPCFlag == false)
	{
		this.Field.SetNpcVisible("", false);
	}
	else
	{
		this.Field.SetNpcVisible("", true);
	}

	if (EffctFlag == false)
	{
		this.Field.EffectVisible("", false);
	}
	else
	{
		this.Field.EffectVisible("", true);
	}

	if (TraserFlag == false)
	{
		this.Field.SetTBoxVisible(-1, false);
	}
	else
	{
		this.Field.SetTBoxVisible(-1, true);
	}

	if (PlayerFlag == false)
	{
		this.Field.SetPlayerVisible(false);
		this.Field.SetDigimonVisible(false);
	}
	else
	{
		this.Field.SetPlayerVisible(true);
		this.Field.SetDigimonVisible(true);
	}
}

function Message_Yes_No_Select( MesID )
{
	this.Window.OpenYesNoInfo(MesID);
	this.WaitYesNoInfoWindow();
	local Result = this.Window.GetResultYesNoInfo();
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
	return Result;
}

function HM_quest_release()
{
	this.Flag.Set(16900);
	this.Flag.Set(16902);
	this.Flag.Set(16904);
	this.Flag.Set(16906);
	this.Flag.Set(16908);
	this.Flag.Set(16911);

	if (this.Quest.GetReceiveStatus(53) == 2)
	{
		this.Flag.Set(16910);
	}

	if (this.Flag.Check(11303))
	{
		this.Flag.Set(15634);

		if (this.Quest.GetProgress(95) == 5)
		{
			this.Flag.Set(15574);
			this.Flag.Set(15578);
			this.Flag.Set(15586);
		}
	}

	if (this.Flag.Check(11409))
	{
		this.Flag.Set(15569);
		this.Flag.Set(15576);
		this.Flag.Set(15579);
		this.Flag.Set(15585);
	}

	if (this.Flag.Check(11500))
	{
		this.Flag.Set(15559);
	}

	if (this.Flag.Check(11516))
	{
		this.Flag.Set(15544);
		this.Flag.Set(15565);
		this.Flag.Set(15594);
	}

	if (this.Flag.Check(11613))
	{
		this.Flag.Set(15571);
		this.Flag.Set(15581);
		this.Flag.Set(15589);
	}

	if (this.Flag.Check(11705))
	{
		this.Flag.Set(15542);
		this.Flag.Set(15587);
		this.Flag.Set(15604);
	}

	if (this.Flag.Check(11815))
	{
		this.Flag.Set(15566);
		this.Flag.Set(15567);
		this.Flag.Set(15605);
	}

	if (this.Flag.Check(11923) == true)
	{
		this.Flag.Set(15546);
		this.Flag.Set(15592);
		this.Flag.Set(15597);
		this.Flag.Set(15606);
	}

	if (this.Flag.Check(12000))
	{
		this.Flag.Set(15575);
		this.Flag.Set(15607);
	}

	if (this.Flag.Check(12109))
	{
		this.Flag.Clear(16911);
		this.Flag.Set(16912);
		this.Flag.Set(15580);
		this.Flag.Set(15602);
		this.Flag.Set(15590);
		this.Flag.Set(15596);
		this.Flag.Set(15608);
		this.Flag.Set(15609);
	}

	if (this.Flag.Check(12300))
	{
		this.Flag.Set(15570);
		this.Flag.Set(15584);
		this.Flag.Set(15598);
		this.Flag.Set(15599);
		this.Flag.Set(15610);
	}

	if (this.Flag.Check(12404))
	{
		this.Flag.Set(15582);
		this.Flag.Set(15583);
		this.Flag.Set(15601);
		this.Flag.Set(15611);
	}

	if (this.Flag.Check(12600))
	{
		this.Flag.Clear(16902);
		this.Flag.Clear(16904);
		this.Flag.Clear(16906);
		this.Flag.Set(16903);
		this.Flag.Set(16905);
		this.Flag.Set(16907);
		this.Flag.Set(15555);
		this.Flag.Set(15564);
		this.Flag.Set(15577);
		this.Flag.Set(15593);
		this.Flag.Set(15595);
		this.Flag.Set(15612);
	}

	if (this.Flag.Check(12700))
	{
		this.Flag.Clear(16900);
		this.Flag.Clear(16908);
		this.Flag.Set(16901);
		this.Flag.Set(16909);
		this.Flag.Set(15552);
		this.Flag.Set(15554);
		this.Flag.Set(15588);
		this.Flag.Set(15591);
		this.Flag.Set(15600);
		this.Flag.Set(15613);
	}

	if (this.Flag.Check(10055))
	{
		this.Flag.Set(15603);
	}
}

function HM_V_Uchida_Talk()
{
	this.Talk.Load("v_uchikda_message");
	this.Talk.SetMode(1);

	if (this.Flag.Check(12799))
	{
		this.Message(1400);
		this.Message(1401);
		this.INFO_GET_ITEM(1037, 1);
		this.INFO_GET_ITEM(208, 1);
		this.Message(1450);
		this.Flag.Set(15363);
	}
	else if (this.Flag.Check(12699))
	{
		this.Message(1300);
		this.Message(1301);
		this.INFO_GET_ITEM(1019, 1);
		this.INFO_GET_ITEM(397, 1);
		this.Message(1350);
		this.Flag.Set(15362);
	}
	else if (this.Flag.Check(12599))
	{
		this.Message(1200);
		this.Message(1201);
		this.INFO_GET_ITEM(1185, 1);
		this.INFO_GET_ITEM(207, 1);
		this.Message(1250);
		this.Flag.Set(15361);
	}
	else if (this.Flag.Check(12499))
	{
		this.Message(1100);
		this.Message(1101);
		this.INFO_GET_ITEM(1113, 1);
		this.INFO_GET_ITEM(399, 1);
		this.Message(1150);
		this.Flag.Set(15360);
	}
	else if (this.Flag.Check(12399))
	{
		this.Message(1000);
		this.Message(1001);
		this.INFO_GET_ITEM(1058, 1);
		this.INFO_GET_ITEM(206, 1);
		this.Message(1050);
		this.Flag.Set(15359);
	}
	else if (this.Flag.Check(12299))
	{
		this.Message(900);
		this.Message(901);
		this.INFO_GET_ITEM(1271, 1);
		this.INFO_GET_ITEM(205, 1);
		this.Message(950);
		this.Flag.Set(15358);
	}
	else if (this.Flag.Check(12199))
	{
		this.Message(800);
		this.Message(801);
		this.INFO_GET_ITEM(1355, 1);
		this.INFO_GET_ITEM(1433, 1);
		this.INFO_GET_ITEM(54, 3);
		this.Message(850);
		this.Flag.Set(15357);
	}
	else if (this.Flag.Check(12099))
	{
		this.Message(700);
		this.Message(701);
		this.INFO_GET_ITEM(1036, 1);
		this.INFO_GET_ITEM(1038, 1);
		this.INFO_GET_ITEM(56, 3);
		this.Message(750);
		this.Flag.Set(15356);
	}
	else if (this.Flag.Check(11999))
	{
		this.Message(600);
		this.Message(601);
		this.INFO_GET_ITEM(1489, 1);
		this.INFO_GET_ITEM(204, 1);
		this.Message(650);
		this.Flag.Set(15355);
	}
	else if (this.Flag.Check(11899))
	{
		this.Message(500);
		this.Message(501);
		this.INFO_GET_ITEM(1264, 1);
		this.INFO_GET_ITEM(398, 1);
		this.Message(550);
		this.Flag.Set(15354);
	}
	else if (this.Flag.Check(11799))
	{
		this.Message(400);
		this.Message(401);
		this.INFO_GET_ITEM(1020, 1);
		this.INFO_GET_ITEM(203, 1);
		this.Message(450);
		this.Flag.Set(15353);
	}
	else if (this.Flag.Check(11699))
	{
		this.Message(300);
		this.Message(301);
		this.INFO_GET_ITEM(1261, 1);
		this.INFO_GET_ITEM(1096, 1);
		this.INFO_GET_ITEM(400, 1);
		this.Message(350);
		this.Flag.Set(15352);
	}
	else if (this.Flag.Check(11599))
	{
		this.Message(200);
		this.Message(201);
		this.INFO_GET_ITEM(1405, 1);
		this.INFO_GET_ITEM(202, 1);
		this.Message(250);
		this.Flag.Set(15351);
	}
	else if (this.Flag.Check(11499))
	{
		this.Message(100);
		this.Message(101);
		this.INFO_GET_ITEM(1087, 1);
		this.INFO_GET_ITEM(1088, 1);
		this.INFO_GET_ITEM(201, 1);
		this.Message(150);
		this.Flag.Set(15350);
	}

	this.MessageClose();
	this.TalkExit();
}

function HM_BASE_MENU()
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			this.Field.MoveOffPlayer();
			this.Window.OpenYesNoInfo(6002);
			this.WaitYesNoInfoWindow();
			local result = this.Window.GetResultYesNoInfo();
			this.Window.CloseYesNoInfo();
			this.WaitCloseYesNoInfoWindow();
			this.WaitFrame(0.5);
			local select = 0;

			switch(result)
			{
			case 1:
				this.Field.SetEdenLogOut(0, 0, "t04", 7);
				this.Field.ChangeScene(15, 1);
				break;

			case 2:
				this.Field.MoveOnPlayer();
				break;

			case 3:
				this.Field.MoveOnPlayer();
				break;
			}

			this.Field.PlayerIconVisible(true);
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function Quest_Back_to_base()
{
	if (!this.Flag.Check(12403))
	{
		this.HM_ChangeField("t50", 3, "start_00", 180);
	}
	else
	{
		this.HM_ChangeField("t04", 7, "start_00", 180);
	}
}

function HM_Logout_MirrorDungeon()
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			this.Field.MoveOffPlayer();
			this.Window.OpenYesNoInfo(5068);
			this.WaitYesNoInfoWindow();
			local result = this.Window.GetResultYesNoInfo();
			this.Window.CloseYesNoInfo();
			this.WaitCloseYesNoInfoWindow();
			this.WaitFrame(0.5);

			switch(result)
			{
			case 1:
				this.Field.WarpIn("EFF_FLD_WARP_IN", 30, false, false, false);

				while (!this.Field.IsEndWarp())
				{
					this.WaitFrame(this.Util.SecondFromFrame(0.1));
				}

				this.HM_ChangeField("t30", 1, "start_01", 330);
				break;

			case 2:
				this.Field.MoveOnPlayer();
				break;

			case 3:
				this.Field.MoveOnPlayer();
				break;
			}

			this.Field.PlayerIconVisible(true);
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function HM_floor_on_off_change( FlagNo, CameraFlag, CameraData )
{
	this.Field.SetEnableCheckObject(false);
	this.Field.MoveOffPlayer();

	if (CameraFlag == true)
	{
		this.FADE_OUT(0, 0.5);
		this.Field.ScriptCamera(CameraData, 0, true);
		this.FADE_IN(0, 0.5);
	}

	this.WaitFrame(1.0);
	this.FADE_OUT(1, 0.5);
	this.Sound.PlaySE("fe_068", false);

	if (this.Flag.Check(FlagNo))
	{
		this.Flag.Clear(FlagNo);
	}
	else
	{
		this.Flag.Set(FlagNo);
	}

	this.HM_floor_on_off_set();
	this.WaitFrame(0.1);
	this.FADE_IN(1, 0.5);
	this.WaitFrame(1.0);

	if (CameraFlag == true)
	{
		this.FADE_OUT(0, 0.5);
		this.Field.ScriptCameraStill(false);
		this.FADE_IN(0, 0.5);
	}

	this.Field.MoveOnPlayer();
	this.Field.SetEnableCheckObject(true);
}

function HM_EDEN_LANDING_SET()
{
	if (this.Flag.Check(10021))
	{
		if (this.Flag.Check(11510) && !this.Flag.Check(11516))
		{
			if (!this.Flag.Check(19268))
			{
				this.Common.SetControlPlayerType(4);
				this.Flag.Set(16800);
			}
			else
			{
				this.Flag.Clear(16800);
			}
		}

		this.Field.SetPlayerVisible(false);
		this.Field.SetDigimonVisible(false);
	}
}

function HM_EDEN_LANDING( Ftype )
{
	if (this.Flag.Check(10021))
	{
		this.Field.MoveOffPlayer();

		if (this.Flag.Check(11510) && !this.Flag.Check(11516) && this.Common.GetControlPlayerType() == 4)
		{
			this.Field.SetPlayerVisible(true);
			this.Field.SetDigimonVisible(true);
		}
		else
		{
			this.Field.SetPlayerVisible(false);
			this.Field.SetDigimonVisible(false);
			this.WaitFrame(0.5);
			this.FADE_IN(0, 0.5);
			this.Field.PlayAnimation(this.Common.GetPlayerModelName(), "ff04", 0.0, false);
			this.Sound.PlaySE("fe_047", false);
			this.Field.SetPlayerVisible(true);

			while (!this.Field.IsEndAnimation(this.Common.GetPlayerModelName()))
			{
				this.WaitFrame(this.Util.SecondFromFrame(1));
			}

			if (Ftype == 1 || this.Common.GetFieldGuest() != 0)
			{
				this.Field.WarpOut("EFF_FLD_WARP_OUT", 30, false, true, false);
				this.WaitFrame(1.5);
			}
		}

		this.Field.MoveOnPlayer();
	}

	this.Flag.Clear(10021);
}

function HM_EDEN_LANDING_FROM_AREA( Ftype )
{
	if (this.Flag.Check(19078))
	{
		if (this.Flag.Check(11510) && !this.Flag.Check(11516))
		{
			this.Field.SetPlayerVisible(true);
			this.Common.SetControlPlayerType(4);
			this.Flag.Set(16800);
		}
		else
		{
			this.Flag.Clear(16800);
		}

		this.Field.MoveOffPlayer();

		if (this.Flag.Check(11510) && !this.Flag.Check(11516))
		{
		}
		else
		{
			this.Field.SetPlayerVisible(false);
			this.Field.SetDigimonVisible(false);
			this.WaitFrame(0.5);
			this.FADE_IN(0, 0.5);
			this.Field.PlayAnimation(this.Common.GetPlayerModelName(), "ff04", 0.0, false);
			this.Sound.PlaySE("fe_047", false);
			this.Field.SetPlayerVisible(true);

			while (!this.Field.IsEndAnimation(this.Common.GetPlayerModelName()))
			{
				this.WaitFrame(this.Util.SecondFromFrame(1));
			}

			if (Ftype == 1 || this.Common.GetFieldGuest() != 0)
			{
				this.Field.WarpOut("EFF_FLD_WARP_OUT", 30, false, true, false);
				this.WaitFrame(1.5);
			}
		}

		this.Field.MoveOnPlayer();
	}

	this.Flag.Clear(19078);
}

function HM_EDEN_LEAVING_TO_AREA( map, area, point, loc )
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			this.Field.MoveOffPlayer();
			this.Field.WarpIn("EFF_FLD_WARP_IN", 30, false, true, false);
			this.WaitFrame(1.0);

			if (this.Flag.Check(11510) && !this.Flag.Check(11516))
			{
				this.HM_EVENT_START_SET(1);
			}
			else
			{
				this.Field.PlayAnimation(this.Common.GetPlayerModelName(), "ff03", 0.2, false);
				this.Sound.PlaySE("fe_046", false);

				while (!this.Field.IsEndAnimation(this.Common.GetPlayerModelName()))
				{
					this.WaitFrame(this.Util.SecondFromFrame(1));
				}

				this.Field.SetPlayerVisible(false);
			}

			this.HM_ChangeField(map, area, point, loc);

			if (this.Flag.Check(11510) && !this.Flag.Check(11599))
			{
				this.Common.SetControlPlayerType(1);
				this.Flag.Clear(16800);
			}

			this.Field.MoveOnPlayer();
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function HM_PC_WARP_EFFECT_IN()
{
	this.Field.MoveOffPlayer();
	this.Field.WarpIn("EFF_FLD_WARP_IN", 30, false, false, false);

	while (!this.Field.IsEndWarp())
	{
		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function HM_EDEN_LEAVING( Ftype )
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			this.Field.MoveOffPlayer();
			this.Window.OpenYesNoInfo(17);
			this.WaitYesNoInfoWindow();
			local result = this.Window.GetResultYesNoInfo();
			this.Window.CloseYesNoInfo();
			this.WaitCloseYesNoInfoWindow();

			switch(result)
			{
			case 1:
				if (Ftype == 1)
				{
					this.Field.WarpIn("EFF_FLD_WARP_IN", 30, false, true, false);
					this.WaitFrame(1.0);
				}

				if (this.Flag.Check(11510) && !this.Flag.Check(11599))
				{
					this.HM_EVENT_START_SET(1);
				}
				else
				{
					this.Field.PlayAnimation(this.Common.GetPlayerModelName(), "ff03", 0.2, false);
					this.Sound.PlaySE("fe_046", false);

					while (!this.Field.IsEndAnimation(this.Common.GetPlayerModelName()))
					{
						this.WaitFrame(this.Util.SecondFromFrame(1));
					}

					this.Field.SetPlayerVisible(false);
				}

				this.Field.ChangeScene(8, 1);

				if (this.Flag.Check(11510) && !this.Flag.Check(11599))
				{
					this.Common.SetControlPlayerType(1);
					this.Flag.Clear(16800);
				}

				this.Flag.Clear(19482);
				this.Flag.Clear(19483);
				break;

			case 2:
				this.Field.MoveOnPlayer();
				break;

			case 3:
				this.Field.MoveOnPlayer();
				break;
			}

			if (result == 1)
			{
				break;
			}

			this.Field.PlayerIconVisible(true);
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function HM_LIFT_MOTION( objName, locatorName, flag, height, speed )
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			this.Field.SetEnableSecurityEffect(false);
			this.Field.SetEnablePasteColorEffect(false);
			this.Field.MoveOffPlayer();
			this.Field.MovePlayer(locatorName);

			if (this.Flag.Check(flag))
			{
				this.Flag.Clear(flag);
			}
			else
			{
				this.Flag.Set(flag);
			}

			this.set_col_off();

			while (this.Field.IsMovePlayer())
			{
				this.WaitFrame(this.Util.SecondFromFrame(0.1));
			}

			this.Field.MoveOffPlayer();
			this.Field.StartElevator(objName, height, speed, false);

			while (!this.Field.IsEndElevator(objName))
			{
				this.WaitFrame(this.Util.SecondFromFrame(0.1));
			}

			this.set_col_on();
			this.Field.MoveOnPlayer();
			this.Field.SetEnableSecurityEffect(true);
			this.Field.SetEnablePasteColorEffect(true);
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function HM_QUEST_TALK( QNo, mesNo )
{
	this.Talk.Load("HM_quest_iteme");
	this.Talk.SetMode(1);

	if (this.Quest.GetProgress(QNo) == 1)
	{
		this.Message(mesNo);
		this.Message(mesNo + 1);
		this.Message(mesNo + 2);
		this.Message(mesNo + 3);
		this.MessageClose();
		this.Quest.AdvanceProgress(QNo);
	}
	else if (this.Quest.GetProgress(QNo) == 2)
	{
		this.Message(mesNo + 1);
		this.Message(mesNo + 2);
		this.Message(mesNo + 3);
		this.MessageClose();
	}
	else if (this.Quest.GetProgress(QNo) == 3)
	{
		this.Message(mesNo + 4);
		this.MessageClose();
		this.INFO_DEL_ITEM(622, 1);
		this.Message(mesNo + 5);
		this.MessageClose();
		this.Quest.AdvanceProgress(QNo);
	}
	else if (this.Quest.GetProgress(QNo) == 4)
	{
		this.Message(mesNo + 5);
		this.MessageClose();
	}

	this.TalkExit();
}

function HM_LOST_OBJECT( QNo, efNo, ItemNo )
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			if (this.Quest.GetProgress(QNo) == 2)
			{
				this.Field.MoveOffPlayer();
				this.INFO_GET_ITEM(ItemNo, 1);
				this.Quest.AdvanceProgress(QNo);
				this.Field.EffectVisible(efNo, false);
				this.Field.MoveOnPlayer();
			}
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function HM_QUEST_CLIENT_ViSIBLE( QNo, npcNo )
{
	if (this.Quest.GetReceiveStatus(QNo) == 1)
	{
		this.Field.SetNpcVisible(npcNo, true);
	}
	else
	{
		this.Field.SetNpcVisible(npcNo, false);
	}

	if (this.Quest.GetProgress(QNo) == 1 || this.Quest.GetProgress(QNo) == 3)
	{
		this.Field.IconOnID(npcNo, 4, 0.0, 0.0);
	}
	else
	{
		this.Field.IconOffID(npcNo, 4);
	}
}

function HM_NABIT_SET( Gimick_Loc, Flag_num, index, x, y, z, loc, mot, mot02 )
{
	if (!this.Flag.Check(Flag_num))
	{
		this.Debug.Log("X:" + x * 0.1);
		this.Debug.Log("y:" + y * 0.1);
		this.Debug.Log("z:" + z * 0.1);
		this.Field.LoadNpc(index, "mob034", x * 0.1, y * 0.1, z * 0.1, loc);

		while (!this.Field.IsEndLoadNpc())
		{
			this.WaitFrame(this.Util.SecondFromFrame(1));
		}

		this.Field.SetGimmickVisible(Gimick_Loc, true);
		this.Field.SetNpcAnime(0, "fn14", 0.5, true);
	}
	else
	{
		this.Field.SetGimmickVisible(Gimick_Loc, false);
	}
}

function HM_NABIT_RESTORATION( effect, Flag_num, NPC_index, Anime_data, Anime_blendtime )
{
	if (!this.Flag.Check(Flag_num))
	{
		local tuet62_flag = 0;
		this.Field.MoveOffPlayer();
		this.Field.SetEffect(effect, "EFF_COM_L_HEAL", 0.0, 0.0, 0.0, true);
		this.Field.SetEffectAnime(effect, 0, 0, 600);
		this.Field.PlayEffect(effect, 0, false, false);
		this.Sound.PlaySE("bt_541", false);
		this.WaitFrame(2.0);
		this.Field.SetNpcAnime(NPC_index, Anime_data, Anime_blendtime + 1, true);
		this.WaitFrame(Anime_blendtime + 0.5);

		if (Flag_num == 15023)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(10);
			this.Message(11);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(921, 1);
			this.INFO_GET_ITEM(1, 3);
			this.INFO_GET_ITEM(7, 3);
			tuet62_flag = 1;
		}
		else if (Flag_num == 15024)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(20);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1474, 1);
			this.INFO_GET_ITEM(4, 1);
		}
		else if (Flag_num == 15025)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(30);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1231, 1);
			this.INFO_GET_ITEM(10, 1);
		}
		else if (Flag_num == 15026)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(40);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(922, 1);
			this.INFO_GET_ITEM(2, 2);
			this.INFO_GET_ITEM(8, 2);
			tuet62_flag = 1;
		}
		else if (Flag_num == 15027)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(50);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1470, 1);
			this.INFO_GET_ITEM(26, 3);
			this.INFO_GET_ITEM(28, 3);
		}
		else if (Flag_num == 15028)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(60);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(923, 1);
			this.INFO_GET_ITEM(21, 3);
			tuet62_flag = 1;
		}
		else if (Flag_num == 15029)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(70);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1472, 1);
			this.INFO_GET_ITEM(527, 1);
		}
		else if (Flag_num == 15030)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(80);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(924, 1);
			this.INFO_GET_ITEM(23, 3);
			tuet62_flag = 1;
		}
		else if (Flag_num == 15031)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(90);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1254, 1);
			this.INFO_GET_ITEM(30, 3);
			this.INFO_GET_ITEM(31, 3);
		}
		else if (Flag_num == 15032)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(100);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(925, 1);
			this.INFO_GET_ITEM(52, 2);
			this.INFO_GET_ITEM(55, 2);
			tuet62_flag = 1;
		}
		else if (Flag_num == 15033)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(110);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1317, 1);
			this.INFO_GET_ITEM(12, 3);
		}
		else if (Flag_num == 15034)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(120);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(926, 1);
			this.INFO_GET_ITEM(528, 1);
			tuet62_flag = 1;
		}
		else if (Flag_num == 15035)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(130);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1410, 1);
			this.INFO_GET_ITEM(24, 3);
		}
		else if (Flag_num == 15036)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(140);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1092, 1);
			this.INFO_GET_ITEM(79, 1);
		}
		else if (Flag_num == 15037)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(150);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(927, 1);
			this.INFO_GET_ITEM(529, 1);
			tuet62_flag = 1;
		}
		else if (Flag_num == 15038)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(160);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1385, 1);
			this.INFO_GET_ITEM(1386, 1);
			this.INFO_GET_ITEM(350, 1);
		}
		else if (Flag_num == 15039)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(170);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(928, 1);
			this.INFO_GET_ITEM(53, 2);
			tuet62_flag = 1;
		}
		else if (Flag_num == 15040)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(180);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1382, 1);
			this.INFO_GET_ITEM(207, 1);
		}
		else if (Flag_num == 15041)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(190);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(1476, 1);
			this.INFO_GET_ITEM(1475, 1);
			this.INFO_GET_ITEM(13, 3);
		}
		else if (Flag_num == 15042)
		{
			this.Talk.Load("broken_nabit");
			this.Talk.SetMode(1);
			this.Message(200);
			this.Message(201);
			this.MessageClose();
			this.TalkExit();
			this.INFO_GET_ITEM(929, 1);
			this.INFO_GET_ITEM(25, 3);
			this.INFO_GET_ITEM(22, 2);
			tuet62_flag = 1;
		}

		this.WaitFrame(1.0);
		this.FADE_OUT(0, 1.0);
		this.Field.DeleteNpc(0);
		this.Field.SetGimmickVisible(effect, false);
		this.FADE_IN(0, 1.0);
		this.Flag.Set(Flag_num);

		if (tuet62_flag == 1)
		{
			if (!this.Flag.Check(14357))
			{
				this.WaitFrame(1.0);
				this.Field.MoveOffPlayer();
				this.TUTORIAL_WINDOW(62);
				this.Flag.Set(14357);
				this.Flag.Set(10514);
				this.Field.MoveOnPlayer();
			}
		}

		this.Field.MoveOnPlayer();
	}
}

function HM_emblem_main_story_gest_save( Guest, Digi00, Digi01 )
{
	this.Work.Set(72, Guest);
	this.Work.Set(73, Digi00);
	this.Work.Set(74, Digi01);
}

function HM_emblem_main_story_gest_back()
{
	if (this.Common.IsDebugGuestAdd() == false)
	{
		if (!this.Flag.Check(19519))
		{
			local i = 0;
			local check = 0;
			local quest_start_num = 65;
			local quest_end_num = 74;

			for( i = quest_start_num; i <= quest_end_num; i++ )
			{
				if (this.Quest.GetReceiveStatus(i) == 1)
				{
					if (this.Quest.GetProgress(i) == 3)
					{
					}
					else
					{
						check = 1;
						i = 100;
					}
				}
			}

			if (check == 0)
			{
				this.Common.SetFieldGuest(this.Work.Get(72));
				this.Field.RemoveGuest(0);
				this.Field.RemoveGuest(1);

				if (1 <= this.Work.Get(73))
				{
					this.Field.AddGuestFormal(0, this.Work.Get(73));
				}

				if (1 <= this.Work.Get(74))
				{
					this.Field.AddGuestFormal(1, this.Work.Get(74));
				}
			}
			else if (!this.Flag.Check(17040))
			{
				this.Common.SetFieldGuest(this.Work.Get(75));
				this.Field.RemoveGuest(0);
				this.Field.RemoveGuest(1);

				if (0 <= this.Work.Get(76))
				{
					this.Field.AddGuestFormal(0, this.Work.Get(76));
				}

				if (0 <= this.Work.Get(77))
				{
					this.Field.AddGuestFormal(1, this.Work.Get(77));
				}
			}
		}
	}

	this.Flag.Clear(19519);
}

function HM_d123_battle_effect()
{
	local EmblemNum = 0;
	local TotalNum = 0;
	local i = 0;

	for( i = 19025; i <= 19031; i++ )
	{
		TotalNum = TotalNum + 1;

		if (this.Flag.Check(i))
		{
			EmblemNum = EmblemNum + 1;
		}
	}

	if (TotalNum == EmblemNum)
	{
		this.Debug.Log("Area_Get!");
		this.Flag.Clear(17033);
	}
	else
	{
		this.Debug.Log("Area_not_get");
		this.Flag.Set(17033);
	}
}

function HM_d123_emblem_get( FlagNo, CameraFlag, CameraData, Efflocator, Rotate )
{
	local hack_skill_use = 0;

	if (this.Quest.GetProgress(56) >= 1 && this.Quest.GetProgress(56) <= 3)
	{
		if (!this.Flag.Check(FlagNo))
		{
			hack_skill_use = 1;
		}
		else
		{
			hack_skill_use = 0;
		}
	}
	else if (this.Flag.Check(12115) && !this.Flag.Check(12119))
	{
		if (this.Flag.Check(FlagNo))
		{
			hack_skill_use = 1;
		}
		else
		{
			hack_skill_use = 0;
		}
	}

	if (hack_skill_use == 0)
	{
		this.Field.SetEnableCheckObject(false);
		this.Field.MoveOffPlayer();

		if (CameraFlag == true)
		{
			this.FADE_OUT(0, 0.5);
			this.Field.ScriptCamera(CameraData, 0, true);
			this.FADE_IN(0, 0.5);
		}

		this.Field.SetEffect(Efflocator, "EFF_FLD_TH", Rotate, 0.0, 0.0, true);
		this.Field.SetEffectAnime(Efflocator, 0, 0, 60);
		this.Field.PlayEffect(Efflocator, 0, false, false);
		this.WaitFrame(1.0);
		this.FADE_OUT(1, 0.5);
		this.Sound.PlaySE("fe_068", false);

		if (this.Flag.Check(FlagNo))
		{
			this.Flag.Clear(FlagNo);
		}
		else
		{
			this.Flag.Set(FlagNo);
		}

		this.HM_d123_emblem_set();
		this.WaitFrame(0.1);
		this.FADE_IN(1, 0.5);
		this.WaitFrame(1.0);

		if (CameraFlag == true)
		{
			this.FADE_OUT(0, 0.5);
			this.Field.ScriptCameraStill(false);
			this.FADE_IN(0, 0.5);
		}

		this.Field.MoveOnPlayer();
		this.Field.SetEnableCheckObject(true);
	}

	this.HM_d123_emblem_text();
}

function HM_d123_emblem_text()
{
	this.HM_d123_battle_effect();

	if (this.Quest.GetProgress(56) >= 1 && this.Quest.GetProgress(56) <= 3)
	{
		this.Field.MoveOffPlayer();

		if (!this.Flag.Check(19030) && !this.Flag.Check(19031))
		{
		}
		else if (!this.Flag.Check(15828))
		{
			this.Talk.Load("HM_quest_message");
			this.Talk.SetMode(1);
			this.Message(5601);
			this.Message(5602);
			this.MessageClose();
			this.TalkExit();
			this.Flag.Set(15828);
		}
		else if (!this.Flag.Check(19025) && !this.Flag.Check(19026) && !this.Flag.Check(19027) && !this.Flag.Check(15829) || !this.Flag.Check(19028) && !this.Flag.Check(19029) && !this.Flag.Check(15830))
		{
			this.Talk.Load("HM_quest_message");
			this.Talk.SetMode(1);
			this.Message(5606);
			this.Message(5607);
			this.MessageClose();
			this.TalkExit();

			if (!this.Flag.Check(19025) && !this.Flag.Check(19026) && !this.Flag.Check(19027) && !this.Flag.Check(15829))
			{
				this.Flag.Set(15829);
			}
			else if (!this.Flag.Check(19028) && !this.Flag.Check(19029) && !this.Flag.Check(15830))
			{
				this.Flag.Set(15830);
			}
		}
		else
		{
			this.Talk.Load("HM_quest_message");
			this.Talk.SetMode(1);
			this.Message(5603);
			this.Message(5604);
			this.MessageClose();
			this.TalkExit();
		}

		this.Field.MoveOnPlayer();
	}
	else if (this.Flag.Check(12115) && !this.Flag.Check(12119))
	{
		if (this.Flag.Check(19025) && this.Flag.Check(19026) && this.Flag.Check(19027) && this.Flag.Check(19028) && this.Flag.Check(19029) && this.Flag.Check(19030) && this.Flag.Check(19031))
		{
			this.Field.MoveOffPlayer();
			this.Talk.Load("d12301");
			this.Talk.SetMode(1);
			this.Message(200);
			this.MessageClose();
			this.TalkExit();
			this.Field.MoveOnPlayer();
		}
		else
		{
			this.Field.MoveOffPlayer();
			this.Talk.Load("d12301");
			this.Talk.SetMode(1);
			this.Message(300);
			this.Message(301);
			this.MessageClose();
			this.TalkExit();
			this.Field.MoveOnPlayer();
		}
	}
}

function HM_hacker_battle( EncID, BMapID, MessID, FlagID )
{
	if (!this.Field.IsStealthHide())
	{
		this.Field.MoveOffPlayer();
		this.Flag.Set(FlagID);
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);
		this.Message(MessID);
		this.MessageClose();
		this.TalkExit();
		this.Field.MoveOnPlayer();
		this.Battle.Encount(EncID, BMapID);
	}
}

function HM_DB_Caution_Text()
{
	if (!this.Flag.Check(15506))
	{
		this.Field.MoveOffPlayer();

		if (this.Flag.Check(11307) && !this.Flag.Check(11310))
		{
			this.INFO_WINDOW(7242);
		}
		else
		{
			this.INFO_WINDOW(7243);
		}

		this.Field.MoveOnPlayer();
		this.Flag.Set(15506);
	}
}

function HM_Fire_Wall_Battle( flag, ID, map )
{
	local loop_flag = 1;
	this.Field.MoveOffPlayer();

	while (loop_flag == 1)
	{
		this.INFO_WINDOW(7244);
		this.Window.OpenYesNoInfo(6020);
		this.WaitYesNoInfoWindow();
		local result = this.Window.GetResultYesNoInfo();
		this.Window.CloseYesNoInfo();
		this.WaitCloseYesNoInfoWindow();
		this.WaitFrame(0.5);

		switch(result)
		{
		case 1:
			this.Field.MoveOnPlayer();
			this.Field.PlayerIconVisible(true);
			loop_flag = 0;
			break;

		case 2:
			this.Sound.PlaySE("ev_152", false);
			this.Field.StartFirewallEffect();

			while (!this.Field.IsEndFirewallEffect())
			{
				this.WaitFrame(this.Util.SecondFromFrame(0.1));
			}

			this.Flag.Set(flag);
			this.Battle.Encount(ID, map);
			this.Field.MoveOnPlayer();
			this.Field.PlayerIconVisible(true);
			loop_flag = 0;
			break;

		case 3:
			this.Field.MoveOnPlayer();
			this.Field.PlayerIconVisible(true);
			loop_flag = 0;
			break;
		}
	}
}

function HM_TRAP_EFFECT_FULL( objNameA )
{
	this.Sound.PlaySE("fe_064", false);
	this.Field.SetEffect(objNameA, "EFF_FLD_TRAP", 0.0, 0.0, 0.0, true);
	this.Field.SetEffectAnime(objNameA, 0, 10, 15);
	this.Field.PlayEffect(objNameA, 0, true, true);

	while (!this.Sound.IsPlaySE("fe_064"))
	{
		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}

	this.WaitFrame(0.69999999);
	this.Sound.PlaySE("fe_065", false);
	this.Field.WarpIn("EFF_FLD_TRAP_WP", 3, false, false, false);

	while (!this.Field.IsEndWarp())
	{
		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}

	this.Flag.Set(19056);
}

function HM_TRAP_EFFECT_HALF()
{
	this.Sound.PlaySE("fe_065", false);
	this.Field.WarpIn("EFF_FLD_TRAP_WP", 3, false, false, false);

	while (!this.Field.IsEndWarp())
	{
		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}

	this.Flag.Set(19056);
}

function HM_TRAP_EFFECT_LOOP( objNameA )
{
	this.Field.SetEffect(objNameA, "EFF_FLD_TRAP", 0.0, 0.0, 0.0, true);
	this.Field.SetEffectAnime(objNameA, 0, 10, 15);
	this.Field.PlayEffect(objNameA, 0, true, false);
}

function HM_emblem_geust_chose( ID, AREA, POINT, LOCAT, QuestID )
{
	local flag = 0;

	if (this.Quest.GetProgress(QuestID) == 2)
	{
		if (this.Common.GetFieldGuest() == 0)
		{
			flag = 1;
		}
	}

	if (this.Quest.GetProgress(QuestID) == 1)
	{
		flag = 1;
		this.Quest.AdvanceProgress(QuestID);
	}

	if (flag == 1)
	{
		this.Field.MoveOffPlayer();
		this.FADE_IN(0, 0.5);
		this.HM_emblem_init();
		this.Flag.Set(15780);
		this.Flag.Clear(15781);
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);
		this.Message(2004);
		this.MessageClose();
		this.TalkExit();
		this.HM_emblem_geust_chose_window();
		this.Flag.Clear(17037);
		this.Flag.Set(17039);
		this.Flag.Set(17036);
		this.Flag.Set(19266);
		this.HM_ChangeField(ID, AREA, POINT, LOCAT);
		this.WaitFrame(0.5);
		this.Sound.PlaySE("fe_068", false);
		this.WaitFrame(0.5);
		this.Field.MoveOnPlayer();
	}
}

function HM_emblem_geust_chose_window()
{
	this.HM_emblem_geust_chose_window_01();
}

function HM_emblem_geust_chose_window_01()
{
	local multiwin_id = 600;

	if (this.Flag.Check(10055))
	{
		multiwin_id = 606;
	}
	else if (this.Flag.Check(12799))
	{
		multiwin_id = 608;
	}
	else if (this.Flag.Check(12699))
	{
		multiwin_id = 605;
	}
	else if (this.Flag.Check(12599))
	{
		multiwin_id = 605;
	}
	else if (this.Flag.Check(12499))
	{
		multiwin_id = 605;
	}
	else if (this.Flag.Check(12399))
	{
		multiwin_id = 605;
	}
	else if (this.Flag.Check(12299))
	{
		multiwin_id = 609;
	}
	else if (this.Flag.Check(12199))
	{
		multiwin_id = 610;
	}
	else if (this.Flag.Check(12099))
	{
		multiwin_id = 610;
	}
	else if (this.Flag.Check(11999))
	{
		multiwin_id = 639;
	}
	else if (this.Flag.Check(11899))
	{
		multiwin_id = 606;
	}
	else if (this.Flag.Check(11799))
	{
		multiwin_id = 606;
	}
	else if (this.Flag.Check(11699))
	{
		multiwin_id = 606;
	}
	else if (this.Flag.Check(11599))
	{
		multiwin_id = 607;
	}
	else if (this.Flag.Check(11499))
	{
		multiwin_id = 601;
	}
	else if (this.Flag.Check(11399))
	{
		multiwin_id = 602;
	}
	else if (this.Flag.Check(11299))
	{
		multiwin_id = 600;
	}

	this.Debug.Log("Multiwin_id_" + multiwin_id);
	this.Window.OpenMultiSelect(multiwin_id);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.HM_emblem_gest_chosed(3025);
		break;

	case 2:
		this.HM_emblem_gest_chosed(3026);
		break;

	case 3:
		this.HM_emblem_gest_chosed(3027);
		break;

	case 4:
		this.HM_emblem_gest_chosed(3028);
		break;

	case 5:
		this.HM_emblem_geust_chose_window_02();
		break;
	}
}

function HM_emblem_geust_chose_window_02()
{
	local multiwin_id = 630;

	if (this.Flag.Check(10055))
	{
		multiwin_id = 630;
	}
	else if (this.Flag.Check(12799))
	{
		multiwin_id = 628;
	}
	else if (this.Flag.Check(12699))
	{
		multiwin_id = 629;
	}
	else if (this.Flag.Check(12599))
	{
		multiwin_id = 628;
	}
	else if (this.Flag.Check(12499))
	{
		multiwin_id = 628;
	}
	else if (this.Flag.Check(12399))
	{
		multiwin_id = 642;
	}
	else if (this.Flag.Check(12299))
	{
		multiwin_id = 630;
	}
	else if (this.Flag.Check(12199))
	{
		multiwin_id = 628;
	}
	else if (this.Flag.Check(12099))
	{
		multiwin_id = 627;
	}
	else if (this.Flag.Check(11999))
	{
		multiwin_id = 643;
	}
	else if (this.Flag.Check(11899))
	{
		multiwin_id = 617;
	}
	else if (this.Flag.Check(11799))
	{
		multiwin_id = 617;
	}
	else if (this.Flag.Check(11699))
	{
		multiwin_id = 617;
	}
	else if (this.Flag.Check(11599))
	{
		multiwin_id = 616;
	}
	else if (this.Flag.Check(11499))
	{
		multiwin_id = 616;
	}

	this.Window.OpenMultiSelect(multiwin_id);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.HM_emblem_gest_chosed(3003);
		break;

	case 2:
		this.HM_emblem_gest_chosed(3012);
		break;

	case 3:
		this.HM_emblem_gest_chosed(3015);
		break;

	case 4:
		this.HM_emblem_gest_chosed(3007);
		break;

	case 5:
		this.HM_emblem_geust_chose_window_03();
		break;

	case 6:
		this.HM_emblem_geust_chose_window_01();
		break;
	}
}

function HM_emblem_geust_chose_window_03()
{
	local multiwin_id = 615;

	if (this.Flag.Check(10055))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12799))
	{
		multiwin_id = 613;
	}
	else if (this.Flag.Check(12699))
	{
		multiwin_id = 613;
	}
	else if (this.Flag.Check(12599))
	{
		multiwin_id = 614;
	}
	else if (this.Flag.Check(12499))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12399))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12299))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12199))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12099))
	{
		multiwin_id = 612;

		if (this.Quest.GetReceiveStatus(63) == 2)
		{
			multiwin_id = 615;
		}
	}

	this.Window.OpenMultiSelect(multiwin_id);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.HM_emblem_gest_chosed(3002);
		break;

	case 2:
		this.HM_emblem_gest_chosed(1050);
		break;

	case 3:
		this.HM_emblem_gest_chosed(3005);
		break;

	case 4:
		break;

	case 5:
		this.HM_emblem_geust_chose_window_04();
		break;

	case 6:
		this.HM_emblem_geust_chose_window_02();
		break;
	}
}

function HM_emblem_geust_chose_window_04()
{
	local multiwin_id = 638;
	multiwin_id = 638;

	if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(61) == 2 && this.Quest.GetReceiveStatus(59) == 2 && this.Quest.GetReceiveStatus(60) == 2)
	{
		multiwin_id = 638;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(59) == 2 && this.Quest.GetReceiveStatus(61) == 2)
	{
		multiwin_id = 634;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(60) == 2 && this.Quest.GetReceiveStatus(61) == 2)
	{
		multiwin_id = 637;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(60) == 2 && this.Quest.GetReceiveStatus(59) == 2)
	{
		multiwin_id = 636;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(61) == 2)
	{
		multiwin_id = 633;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(59) == 2)
	{
		multiwin_id = 632;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(60) == 2)
	{
		multiwin_id = 635;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2)
	{
		multiwin_id = 631;
	}

	this.Window.OpenMultiSelect(multiwin_id);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		this.HM_emblem_gest_chosed(1359);
		break;

	case 2:
		this.HM_emblem_gest_chosed(1391);
		break;

	case 3:
		this.HM_emblem_gest_chosed(1035);
		break;

	case 4:
		this.HM_emblem_gest_chosed(1072);
		break;

	case 5:
		break;

	case 6:
		this.HM_emblem_geust_chose_window_03();
		break;
	}
}

function HM_emblem_gest_chosed( GuestID )
{
	this.Common.SetFieldGuest(GuestID);
	this.HM_emblem_digi_chosed(GuestID);
	this.Work.Set(75, this.Common.GetFieldGuest());
	this.Fade.BackOut(0, 0.5);
	this.WaitFrame(1.0);
	this.Sound.PlaySE("ev_059", false);
	this.WaitFrame(2);
	local love_messe = 0;

	if (this.Common.GetFieldGuest() == 3025)
	{
		this.s751_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3026)
	{
		this.s752_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3027)
	{
		this.s753_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3028)
	{
		this.s754_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3002)
	{
		this.s755_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3005)
	{
		this.s756_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3007)
	{
		this.s757_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3015)
	{
		this.s758_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3012)
	{
		this.s759_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 3003)
	{
		this.s760_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 1050)
	{
		this.s761_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 1391)
	{
		this.s762_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 1035)
	{
		this.s763_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 1072)
	{
		this.s764_e00_0101();
	}

	if (this.Common.GetFieldGuest() == 1359)
	{
		this.s765_e00_0101();
	}
}

function HM_emblem_digi_chosed( GuestID )
{
	if (GuestID == 3025)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 221);
			this.Work.Set(76, 221);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 222);
			this.Work.Set(76, 222);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 223);
			this.Work.Set(76, 223);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3026)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 201);
			this.Work.Set(76, 201);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 202);
			this.Work.Set(76, 202);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 203);
			this.Work.Set(76, 203);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3027)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 211);
			this.Work.Set(76, 211);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 212);
			this.Work.Set(76, 212);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3028)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 341);
			this.Work.Set(76, 341);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 342);
			this.Work.Set(76, 342);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 343);
			this.Work.Set(76, 343);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3002)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(11899) && !this.Flag.Check(12099) && !this.Flag.Check(12299) && !this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 231);
			this.Field.AddGuestFormal(1, 232);
			this.Work.Set(76, 231);
			this.Work.Set(77, 232);
		}
		else if (this.Flag.Check(11899) && !this.Flag.Check(12099) && !this.Flag.Check(12299) && !this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 233);
			this.Field.AddGuestFormal(1, 234);
			this.Work.Set(76, 233);
			this.Work.Set(77, 234);
		}
		else if (this.Flag.Check(11899) && this.Flag.Check(12099) && !this.Flag.Check(12299) && !this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 235);
			this.Field.AddGuestFormal(1, 236);
			this.Work.Set(76, 235);
			this.Work.Set(77, 236);
		}
		else if (this.Flag.Check(11899) && this.Flag.Check(12099) && this.Flag.Check(12299) && !this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 237);
			this.Work.Set(76, 237);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 238);
			this.Work.Set(76, 238);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3005)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 241);
			this.Work.Set(76, 241);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 242);
			this.Work.Set(76, 242);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 243);
			this.Work.Set(76, 243);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3007)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 251);
			this.Work.Set(76, 251);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 252);
			this.Work.Set(76, 252);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 253);
			this.Work.Set(76, 253);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3012)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 261);
			this.Work.Set(76, 261);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 262);
			this.Work.Set(76, 262);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 263);
			this.Work.Set(76, 263);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3015)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (this.Quest.GetReceiveStatus(16) == 2)
		{
			this.Field.AddGuestFormal(0, 274);
			this.Work.Set(76, 274);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 271);
			this.Work.Set(76, 271);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 272);
			this.Work.Set(76, 272);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 273);
			this.Work.Set(76, 273);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 3003)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 281);
			this.Work.Set(76, 281);
			this.Work.Set(77, 0);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 282);
			this.Work.Set(76, 282);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 283);
			this.Work.Set(76, 283);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 1050)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499) && !this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 291);
			this.Field.AddGuestFormal(1, 292);
			this.Work.Set(76, 291);
			this.Work.Set(77, 292);
		}
		else if (!this.Flag.Check(12499) && this.Flag.Check(11899))
		{
			this.Field.AddGuestFormal(0, 293);
			this.Field.AddGuestFormal(1, 294);
			this.Work.Set(76, 293);
			this.Work.Set(77, 294);
		}
		else
		{
			this.Field.AddGuestFormal(0, 295);
			this.Field.AddGuestFormal(1, 296);
			this.Work.Set(76, 295);
			this.Work.Set(77, 296);
		}
	}

	if (GuestID == 1391)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 301);
			this.Work.Set(76, 301);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 302);
			this.Work.Set(76, 302);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 1035)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 311);
			this.Work.Set(76, 311);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 312);
			this.Work.Set(76, 312);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 1072)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 321);
			this.Work.Set(76, 321);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 322);
			this.Work.Set(76, 322);
			this.Work.Set(77, 0);
		}
	}

	if (GuestID == 1359)
	{
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (!this.Flag.Check(12499))
		{
			this.Field.AddGuestFormal(0, 331);
			this.Work.Set(76, 331);
			this.Work.Set(77, 0);
		}
		else
		{
			this.Field.AddGuestFormal(0, 332);
			this.Work.Set(76, 332);
			this.Work.Set(77, 0);
		}
	}
}

function HM_emblem_battle_effect_set( FlagNum1, FlagNum2, FlagNum3 )
{
	local i = 0;

	for( i = 17000; i <= 17032; i++ )
	{
		this.Flag.Clear(i);
	}

	if (FlagNum1 >= 0)
	{
		this.Flag.Set(FlagNum1);
	}

	if (FlagNum2 >= 0)
	{
		this.Flag.Set(FlagNum2);
	}

	if (FlagNum3 >= 0)
	{
		this.Flag.Set(FlagNum3);
	}
}

function HM_emblem_hacker_get_emblem( FlagNum1, FlagNum2, FlagNum3, FlagNum4, FlagNum5, EmblemStartNum, EmblemEndNum )
{
	local i = 0;
	local LiveNum = 0;
	local TotalNum = 0;
	local EmblemRate = 0;
	local FlagBox = [
		FlagNum1,
		FlagNum2,
		FlagNum3,
		FlagNum4,
		FlagNum5
	];
	local Rand_num = 0;

	if (!this.Flag.Check(17040))
	{
		if (!this.Flag.Check(17559))
		{
			for( i = 0; i <= 4; i++ )
			{
				if (0 <= FlagBox[i])
				{
					TotalNum = TotalNum + 1;

					if (!this.Flag.Check(FlagBox[i]))
					{
						LiveNum = LiveNum + 1;
					}
				}
			}

			if (TotalNum == 0)
			{
				this.Debug.Log("TotalNum = 0");
				return;
			}

			EmblemRate = LiveNum * 40;
			EmblemRate = EmblemRate / TotalNum;
			this.Debug.Log("Emblem_Lose_Rate:" + EmblemRate);

			for( i = EmblemStartNum; i <= EmblemEndNum; i++ )
			{
				Rand_num = this.Math.Rand(0, 100);
				this.Debug.Log("Rand_num:" + Rand_num);

				if (EmblemRate > Rand_num)
				{
					if (this.Flag.Check(i))
					{
						this.Flag.Clear(i);
						i = EmblemEndNum + 1;
						this.Flag.Set(17038);
						this.Flag.Set(17036);
						this.Flag.Set(17039);
						this.Flag.Set(19266);
						this.Debug.Log("YOU_LOST_EMBLEM!");
					}
				}
			}
		}
	}

	this.Flag.Clear(17559);
}

function HM_emblem_effect( EmblemFlagNum )
{
	local EmblemNum = 0;
	local TotalNum = 0;
	local i = 0;
	this.Work.Set(48, 0);

	for( i = 17041; i <= EmblemFlagNum; i++ )
	{
		TotalNum = TotalNum + 1;

		if (this.Flag.Check(i))
		{
			EmblemNum = EmblemNum + 1;
			this.Work.Set(48, EmblemNum);
		}
	}

	this.Work.Set(49, TotalNum - EmblemNum);

	if (TotalNum == EmblemNum)
	{
		this.Debug.Log("Area_Get!");
		this.Flag.Clear(17033);
	}
	else
	{
		this.Debug.Log("Area_not_get");
		this.Flag.Set(17033);
	}
}

function HM_emblem_text()
{
	local flag = 0;
	local i = 0;

	for( i = 65; i <= 75; i++ )
	{
		if (this.Quest.GetProgress(i) == 2)
		{
			flag = 1;
		}
	}

	if (flag == 1)
	{
		if (!this.Flag.Check(17037) || this.Flag.Check(17038) || this.Flag.Check(17039) || this.Flag.Check(17035))
		{
			this.Field.MoveOffPlayer();

			if (this.Flag.Check(19266))
			{
				this.FADE_IN(0, 0.5);
			}

			this.Flag.Clear(19266);
			this.HM_emblem_explane_text();
			this.HM_emblem_lost_text();
			this.HM_emblem_num_effect_text();
			this.Field.MoveOffPlayer();

			if (!this.Flag.Check(14356))
			{
				this.TUTORIAL_WINDOW(61);
				this.Flag.Set(14356);
			}

			this.Field.MoveOnPlayer();
		}

		this.HM_emblem_sound();
	}
}

function HM_emblem_explane_text()
{
	if (!this.Flag.Check(17037))
	{
		this.Fade.BackIn(0, 0.5);
		this.WaitFrame(0.5);
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);
		this.WaitFrame(0.5);

		if (this.Flag.Check(17034))
		{
			if (this.Common.GetFieldGuest() == 3025)
			{
				this.Debug.Log("ERIKA_TALK_ABOUT_QUEST");
				this.Message(1200);
			}

			if (this.Common.GetFieldGuest() == 3026)
			{
				this.Debug.Log("RYUUJI_TALK_ABOUT_QUEST");
				this.Message(1201);
			}

			if (this.Common.GetFieldGuest() == 3027)
			{
				this.Debug.Log("CHITOSE_TALK_ABOUT_QUEST");
				this.Message(1202);
			}

			if (this.Common.GetFieldGuest() == 3028)
			{
				this.Debug.Log("YOU_TALK_ABOUT_QUEST");
				this.Message(1203);
			}

			if (this.Common.GetFieldGuest() == 3002)
			{
				this.Debug.Log("NOKIA_TALK_ABOUT_QUEST");
				this.Message(1204);
			}

			if (this.Common.GetFieldGuest() == 3005)
			{
				this.Debug.Log("ARATA_TALK_ABOUT_QUEST");
				this.Message(1205);
			}

			if (this.Common.GetFieldGuest() == 3007)
			{
				this.Debug.Log("MATAYOSHI_TALK_ABOUT_QUEST");
				this.Message(1206);
			}

			if (this.Common.GetFieldGuest() == 3015)
			{
				this.Debug.Log("DATE_TALK_ABOUT_QUEST");
				this.Message(1207);
			}

			if (this.Common.GetFieldGuest() == 3012)
			{
				this.Debug.Log("FEI_TALK_ABOUT_QUEST");
				this.Message(1208);
			}

			if (this.Common.GetFieldGuest() == 3003)
			{
				this.Debug.Log("YUKO_TALK_ABOUT_QUEST");
				this.Message(1209);
			}

			if (this.Common.GetFieldGuest() == 1050)
			{
				this.Debug.Log("AGU&GABU_TALK_ABOUT_QUEST");
				this.Message(1210);
				this.Message(1211);
			}

			if (this.Common.GetFieldGuest() == 1391)
			{
				this.Debug.Log("RENA_TALK_ABOUT_QUEST");
				this.Message(1212);
			}

			if (this.Common.GetFieldGuest() == 1035)
			{
				this.Debug.Log("BERUZEBU_TALK_ABOUT_QUEST");
				this.Message(1213);
			}

			if (this.Common.GetFieldGuest() == 1072)
			{
				this.Debug.Log("REOMON_TALK_ABOUT_QUEST");
				this.Message(1214);
			}

			if (this.Common.GetFieldGuest() == 1359)
			{
				this.Debug.Log("RIRI_TALK_ABOUT_QUEST");
				this.Message(1215);
			}
		}
		else
		{
			if (this.Common.GetFieldGuest() == 3025)
			{
				this.Debug.Log("ERIKA_TALK_ABOUT_QUEST");
				this.Message(1200);
			}

			if (this.Common.GetFieldGuest() == 3026)
			{
				this.Debug.Log("RYUUJI_TALK_ABOUT_QUEST");
				this.Message(1201);
			}

			if (this.Common.GetFieldGuest() == 3027)
			{
				this.Debug.Log("CHITOSE_TALK_ABOUT_QUEST");
				this.Message(1202);
			}

			if (this.Common.GetFieldGuest() == 3028)
			{
				this.Debug.Log("YOU_TALK_ABOUT_QUEST");
				this.Message(1203);
			}

			if (this.Common.GetFieldGuest() == 3002)
			{
				this.Debug.Log("NOKIA_TALK_ABOUT_QUEST");
				this.Message(1204);
			}

			if (this.Common.GetFieldGuest() == 3005)
			{
				this.Debug.Log("ARATA_TALK_ABOUT_QUEST");
				this.Message(1205);
			}

			if (this.Common.GetFieldGuest() == 3007)
			{
				this.Debug.Log("MATAYOSHI_TALK_ABOUT_QUEST");
				this.Message(1206);
			}

			if (this.Common.GetFieldGuest() == 3015)
			{
				this.Debug.Log("DATE_TALK_ABOUT_QUEST");
				this.Message(1207);
			}

			if (this.Common.GetFieldGuest() == 3012)
			{
				this.Debug.Log("FEI_TALK_ABOUT_QUEST");
				this.Message(1208);
			}

			if (this.Common.GetFieldGuest() == 3003)
			{
				this.Debug.Log("YUKO_TALK_ABOUT_QUEST");
				this.Message(1209);
			}

			if (this.Common.GetFieldGuest() == 1050)
			{
				this.Debug.Log("AGU&GABU_TALK_ABOUT_QUEST");
				this.Message(1210);
				this.Message(1211);
			}

			if (this.Common.GetFieldGuest() == 1391)
			{
				this.Debug.Log("RENA_TALK_ABOUT_QUEST");
				this.Message(1212);
			}

			if (this.Common.GetFieldGuest() == 1035)
			{
				this.Debug.Log("BERUZEBU_TALK_ABOUT_QUEST");
				this.Message(1213);
			}

			if (this.Common.GetFieldGuest() == 1072)
			{
				this.Debug.Log("REOMON_TALK_ABOUT_QUEST");
				this.Message(1214);
			}

			if (this.Common.GetFieldGuest() == 1359)
			{
				this.Debug.Log("RIRI_TALK_ABOUT_QUEST");
				this.Message(1215);
			}
		}

		this.MessageClose();
		this.TalkExit();
		this.Flag.Set(17037);
	}
}

function HM_emblem_lost_text()
{
	if (this.Flag.Check(17038))
	{
		local love_messe = 0;
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);
		this.WaitFrame(0.5);

		if (this.Common.GetFieldGuest() == 3025)
		{
			if (this.Work.Get(50) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(50) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1500 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3026)
		{
			if (this.Work.Get(51) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(51) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1501 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3027)
		{
			if (this.Work.Get(52) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(52) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1502 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3028)
		{
			if (this.Work.Get(53) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(53) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1503 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3002)
		{
			if (this.Work.Get(54) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(54) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1504 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3005)
		{
			if (this.Work.Get(55) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(55) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1505 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3007)
		{
			if (this.Work.Get(56) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(56) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1506 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3015)
		{
			if (this.Work.Get(57) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(57) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1507 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3012)
		{
			if (this.Work.Get(58) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(58) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1508 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 3003)
		{
			if (this.Work.Get(59) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(59) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1509 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 1050)
		{
			if (this.Work.Get(60) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(60) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1510 + love_messe);
			this.Message(1511 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 1391)
		{
			if (this.Work.Get(61) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(61) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1512 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 1035)
		{
			if (this.Work.Get(62) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(62) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				local love_messe = 0;
			}

			this.Message(1513 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 1072)
		{
			if (this.Work.Get(63) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(63) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1514 + love_messe);
		}

		if (this.Common.GetFieldGuest() == 1359)
		{
			if (this.Work.Get(64) >= 10)
			{
				love_messe = 40;
			}
			else if (this.Work.Get(64) >= 5)
			{
				love_messe = 20;
			}
			else
			{
				love_messe = 0;
			}

			this.Message(1515 + love_messe);
		}

		this.MessageClose();
		this.TalkExit();
		this.Flag.Clear(17038);
	}
}

function HM_emblem_num_effect_text()
{
	if (this.Flag.Check(17039))
	{
		this.Field.MoveOffPlayer();
		this.WaitFrame(0.5);
		local info_mess_id = 0;

		if (this.Flag.Check(17033))
		{
			this.Window.SetReplaceNumberInfo(this.Work.Get(49));
			this.Window.SetReplaceNumberInfo(this.Work.Get(48));
			this.INFO_WINDOW(7007);
			info_mess_id = 0;
		}
		else
		{
			this.INFO_WINDOW(7006);
			info_mess_id = 40;
		}

		if (this.Flag.Check(17000))
		{
			info_mess_id = info_mess_id + 7010;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17001))
		{
			info_mess_id = info_mess_id + 7011;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17002))
		{
			info_mess_id = info_mess_id + 7012;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17003))
		{
			info_mess_id = info_mess_id + 7013;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17004))
		{
			info_mess_id = info_mess_id + 7014;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17005))
		{
			info_mess_id = info_mess_id + 7015;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17006))
		{
			info_mess_id = info_mess_id + 7016;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17007))
		{
			info_mess_id = info_mess_id + 7017;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17008))
		{
			info_mess_id = info_mess_id + 7018;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17009))
		{
			this.Debug.Log("ATK_UP_MESSA");
			info_mess_id = info_mess_id + 7019;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17010))
		{
			info_mess_id = info_mess_id + 7020;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17011))
		{
			info_mess_id = info_mess_id + 7021;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17012))
		{
			info_mess_id = info_mess_id + 7022;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17013))
		{
			info_mess_id = info_mess_id + 7023;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17014))
		{
			info_mess_id = info_mess_id + 7024;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17015))
		{
			info_mess_id = info_mess_id + 7025;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17016))
		{
			info_mess_id = info_mess_id + 7026;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17017))
		{
			info_mess_id = info_mess_id + 7027;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17018))
		{
			info_mess_id = info_mess_id + 7028;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17019))
		{
			info_mess_id = info_mess_id + 7029;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17020))
		{
			info_mess_id = info_mess_id + 7030;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17021))
		{
			info_mess_id = info_mess_id + 7031;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17022))
		{
			info_mess_id = info_mess_id + 7032;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17023))
		{
			info_mess_id = info_mess_id + 7033;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17024))
		{
			info_mess_id = info_mess_id + 7034;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17025))
		{
			info_mess_id = info_mess_id + 7035;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17026))
		{
			info_mess_id = info_mess_id + 7036;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17027))
		{
			info_mess_id = info_mess_id + 7037;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17028))
		{
			info_mess_id = info_mess_id + 7038;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17029))
		{
			info_mess_id = info_mess_id + 7039;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17030))
		{
			info_mess_id = info_mess_id + 7040;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17031))
		{
			info_mess_id = info_mess_id + 7041;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		if (this.Flag.Check(17032))
		{
			info_mess_id = info_mess_id + 7043;
			this.INFO_WINDOW(info_mess_id);
			info_mess_id = 0;
		}

		this.Flag.Clear(17039);
		this.Field.MoveOnPlayer();
	}
}

function HM_emblem_sound()
{
	if (this.Flag.Check(17036) == true)
	{
		if (this.Flag.Check(17033) == false)
		{
			this.Sound.PlaySE("fe_088", false);
		}
		else
		{
			this.Sound.PlaySE("fe_087", false);
		}

		this.Flag.Clear(17036);
	}
}

function HM_emblem_Protect_After_text()
{
	this.HM_Play_BGM(this.Work.Get(40), 0.0);

	if (this.Flag.Check(17035))
	{
		this.Field.MoveOffPlayer();
		this.FADE_IN(0, 0.5);
		this.WaitFrame(1.0);
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);
		this.Message(1602);
		this.MessageClose();
		this.TalkExit();
		this.Flag.Clear(17035);
		this.Field.MoveOnPlayer();
	}
}

function HM_emblem_area_chamge()
{
}

function HM_emblem_get( EffectID, EnemyEmblemID, PlayerEmblemID, FlagNum, MapName, Area, Point, Locat )
{
	this.Field.MoveOffPlayer();

	if (this.Flag.Check(FlagNum))
	{
		if (this.Flag.Check(17040))
		{
			switch(this.Message_Yes_No_Select(6005))
			{
			case 1:
				this.HM_emblem_guest_protect(MapName, Area, Point, Locat, FlagNum, false);

			case 2:
				break;

			default:
				if (this.Message_Yes_No_Select(6005) == 3)
				{
				}
			}
		}
		else
		{
			switch(this.Message_Yes_No_Select(6004))
			{
			case 1:
				this.HM_emblem_guest_protect(MapName, Area, Point, Locat, FlagNum, true);
				this.Field.MoveOnPlayer();

			case 2:
				this.Field.MoveOnPlayer();

			case 3:
				this.Field.MoveOnPlayer();
			}
		}

		this.Field.MoveOnPlayer();
		this.Field.PlayerIconVisible(true);
	}
	else
	{
		switch(this.Message_Yes_No_Select(6003))
		{
		case 1:
			this.WaitFrame(1);
			this.Field.PlayEffect(EffectID, 0, false, false);
			this.Field.SetEffect(EffectID, "EFF_FLD_E_SUP", 0.0, 0.0, 0.0, true);
			this.Field.SetEffectAnime(EffectID, 0, 10, 15);
			this.Sound.PlaySE("fe_086", false);
			this.WaitFrame(0.5);
			this.Field.SetGimmickVisible(EnemyEmblemID, false);
			this.Field.SetGimmickVisible(PlayerEmblemID, true);
			this.WaitFrame(1);
			this.Flag.Set(FlagNum);
			this.Flag.Set(17039);
			this.Flag.Set(17036);

		case 2:
			this.Field.MoveOnPlayer();

		case 3:
			this.Field.MoveOnPlayer();
		}

		this.Field.MoveOnPlayer();
		this.Field.PlayerIconVisible(true);
	}
}

function HM_emblem_guest_protect( MapName, Area, Point, Locat, FlagNum, TextFlag )
{
	local i = 0;
	local Locater = "start_01";

	if (TextFlag == true)
	{
		this.Debug.Log("Emblem_Protect!");
		this.Flag.Set(17040);
		this.Common.SetFieldGuest(0);
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);
		this.HM_emblem_guest_protect_text();
		this.Flag.Set(17035);
		this.FADE_OUT(0, 0.5);
	}
	else
	{
		this.Debug.Log("Emblem_NOT_Protect");
		this.Flag.Clear(17040);
		this.Flag.Set(17559);
		this.Common.SetFieldGuest(this.Work.Get(75));
		this.Field.RemoveGuest(0);
		this.Field.RemoveGuest(1);

		if (0 <= this.Work.Get(76))
		{
			this.Field.AddGuestFormal(0, this.Work.Get(76));
		}

		if (0 <= this.Work.Get(77))
		{
			this.Field.AddGuestFormal(1, this.Work.Get(77));
		}

		this.HM_emblem_guest_protect_cancel_text();
		this.WaitFrame(0.2);
	}

	this.Sound.PlaySE("fe_046", false);
	this.WaitFrame(0.2);
	this.HM_ChangeField(MapName, Area, Point, Locat);
}

function HM_emblem_guest_protect_text()
{
	this.Talk.Load("emblem_quest");
	this.Talk.SetMode(1);
	local love_messe = 0;

	if (this.Work.Get(75) == 3025)
	{
		if (this.Work.Get(50) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(50) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1400 + love_messe);
	}

	if (this.Work.Get(75) == 3026)
	{
		if (this.Work.Get(51) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(51) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1401 + love_messe);
	}

	if (this.Work.Get(75) == 3027)
	{
		if (this.Work.Get(52) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(52) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1402 + love_messe);
	}

	if (this.Work.Get(75) == 3028)
	{
		if (this.Work.Get(53) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(53) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1403 + love_messe);
	}

	if (this.Work.Get(75) == 3002)
	{
		if (this.Work.Get(54) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(54) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1404 + love_messe);
	}

	if (this.Work.Get(75) == 3005)
	{
		if (this.Work.Get(55) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(55) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1405 + love_messe);
	}

	if (this.Work.Get(75) == 3007)
	{
		if (this.Work.Get(56) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(56) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1406 + love_messe);
	}

	if (this.Work.Get(75) == 3015)
	{
		if (this.Work.Get(57) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(57) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1407 + love_messe);
	}

	if (this.Work.Get(75) == 3012)
	{
		if (this.Work.Get(58) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(58) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1408 + love_messe);
	}

	if (this.Work.Get(75) == 3003)
	{
		if (this.Work.Get(59) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(59) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1409 + love_messe);
	}

	if (this.Work.Get(75) == 1050)
	{
		if (this.Work.Get(60) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(60) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1410 + love_messe);
		this.Message(1411 + love_messe);
	}

	if (this.Work.Get(75) == 1391)
	{
		if (this.Work.Get(61) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(61) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1412 + love_messe);
	}

	if (this.Work.Get(75) == 1035)
	{
		if (this.Work.Get(62) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(62) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1413 + love_messe);
	}

	if (this.Work.Get(75) == 1072)
	{
		if (this.Work.Get(63) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(63) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1414 + love_messe);
	}

	if (this.Work.Get(75) == 1359)
	{
		if (this.Work.Get(64) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(64) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1415 + love_messe);
	}

	this.MessageClose();
	this.TalkExit();
}

function HM_emblem_guest_protect_cancel_text()
{
	this.Sound.PlaySE("ev_017", false);
	this.WaitFrame(1.0);
	this.Talk.Load("emblem_quest");
	this.Talk.SetMode(1);
	local love_messe = 0;

	if (this.Work.Get(75) == 3025)
	{
		this.Message(1700);
	}

	if (this.Work.Get(75) == 3026)
	{
		this.Message(1701);
	}

	if (this.Work.Get(75) == 3027)
	{
		this.Message(1702);
	}

	if (this.Work.Get(75) == 3028)
	{
		this.Message(1703);
	}

	if (this.Work.Get(75) == 3002)
	{
		this.Message(1704);
	}

	if (this.Work.Get(75) == 3005)
	{
		this.Message(1705);
	}

	if (this.Work.Get(75) == 3007)
	{
		this.Message(1706);
	}

	if (this.Work.Get(75) == 3015)
	{
		this.Message(1707);
	}

	if (this.Work.Get(75) == 3012)
	{
		this.Message(1708);
	}

	if (this.Work.Get(75) == 3003)
	{
		this.Message(1709);
	}

	if (this.Common.GetFieldGuest() == 1050)
	{
		this.Message(1710);
		this.Message(1711);
	}

	if (this.Common.GetFieldGuest() == 1391)
	{
		this.Message(1712);
	}

	if (this.Common.GetFieldGuest() == 1035)
	{
		this.Message(1713);
	}

	if (this.Common.GetFieldGuest() == 1072)
	{
		this.Message(1714);
	}

	if (this.Common.GetFieldGuest() == 1359)
	{
		this.Message(1715);
	}

	this.MessageClose();
	this.TalkExit();
}

function HM_emblem_zako_hacker_set( FlagNum, NPCID )
{
	if (!this.Flag.Check(FlagNum + 459))
	{
		if (this.Flag.Check(FlagNum))
		{
			this.Field.SetNpcVisible(NPCID, false);
		}
		else
		{
			this.Field.SetNpcVisible(NPCID, true);
		}
	}
}

function HM_emblem_battle( FlagNum, MassID, EncID, BMapID )
{
	if (!this.Flag.Check(FlagNum))
	{
		this.Field.MoveOffPlayer();
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);
		this.Message(MassID);
		this.MessageClose();
		this.TalkExit();
		this.Flag.Set(FlagNum);
		this.Flag.Set(FlagNum + 459);

		if (this.Flag.Check(17033) == true)
		{
			this.Flag.Set(17036);
		}

		this.Flag.Set(17559);
		this.Field.MoveOnPlayer();
		this.Battle.Encount(EncID, BMapID);
	}
}

function HM_emblem_battle_lose( FlagNum, MessID, NPCloc )
{
	if (this.Flag.Check(FlagNum + 459))
	{
		this.Field.MoveOffPlayer();
		this.FADE_IN(0, 0.5);
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);
		this.Message(MessID);
		this.MessageClose();
		this.TalkExit();
		this.FADE_OUT(0, 0.5);
		this.Sound.PlaySE("fe_046", false);
		this.Field.SetNpcVisible(NPCloc, false);
		this.WaitFrame(1.5);
		this.FADE_IN(0, 0.5);
		this.Flag.Clear(FlagNum + 459);
		this.Field.MoveOnPlayer();
	}
}

function HM_emblem_boss_encount( EmblemFlagNum, FlagNum, MassID, EncID, EntStrongID, BMapID )
{
	local i = 0;
	local Battle_Flag = 0;
	local mess_id = 0;
	this.HM_emblem_effect(EmblemFlagNum);

	if (this.Flag.Check(17033))
	{
		mess_id = 1603;
	}
	else
	{
		mess_id = 1604;
	}

	this.Talk.Load("emblem_quest");
	this.Talk.SetMode(1);
	this.Message(mess_id);
	this.MessageClose();
	this.TalkExit();
	this.Field.MoveOffPlayer();

	switch(this.Message_Yes_No_Select(6019))
	{
	case 1:
		Battle_Flag = 1;
		break;

	case 2:
		this.Field.MoveOnPlayer();
		break;

	case 3:
		this.Field.MoveOnPlayer();
		break;
	}

	if (Battle_Flag == 1)
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);
		this.Message(MassID);
		this.MessageClose();
		this.TalkExit();
		this.Flag.Set(FlagNum);
		this.Flag.Clear(15780);
		this.Flag.Set(15781);

		if (!this.Flag.Check(17033))
		{
			this.Debug.Log("NORMAL_BOSS_ENCOUNT");
			this.Battle.Encount(EncID, BMapID);
		}
		else
		{
			this.Debug.Log("STRONG_BOSS_ENCOUNT");
			this.Battle.Encount(EntStrongID, BMapID);
		}
	}
}

function HM_emblem_boss_destory( Flagnum, MassID, Quest_ID )
{
	this.Debug.Log("HM_emblem_boss_destory");
	this.HM_Play_BGM(this.Work.Get(40), 0.0);

	if (this.Quest.GetProgress(Quest_ID) == 2)
	{
		if (this.Flag.Check(Flagnum) == true)
		{
			this.HM_EVENT_START_SET(0);
			this.WaitFrame(0.5);
			this.Talk.Load("emblem_quest");
			this.Talk.SetMode(1);
			this.Message(MassID);
			this.MessageClose();
			this.TalkExit();
			this.Quest.AdvanceProgress(Quest_ID);

			if (!this.Flag.Check(14361))
			{
				this.TUTORIAL_WINDOW(66);
				this.Flag.Set(14361);
			}

			this.Common.SetFieldGuest(this.Work.Get(75));
			this.HM_emblem_geust_leave();
			this.HM_emblem_init();
			this.Quest_Back_to_base();
		}
	}
}

function HM_emblem_geust_leave()
{
	if (this.Common.GetFieldGuest() == 3025)
	{
		this.ERIKA_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3026)
	{
		this.RYUUJI_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3027)
	{
		this.CHITOSE_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3028)
	{
		this.YOU_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3002)
	{
		this.NOKIA_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3005)
	{
		this.ARATA_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3007)
	{
		this.MATAYOSHI_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3015)
	{
		this.DATE_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3012)
	{
		this.FEI_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 3003)
	{
		this.YUKO_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 1050)
	{
		this.AGUGABU_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 1391)
	{
		this.RENAMON_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 1035)
	{
		this.BERUZEBUMON_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 1072)
	{
		this.REOMON_Love_Event();
	}

	if (this.Common.GetFieldGuest() == 1359)
	{
		this.LILIMON_Love_Event();
	}

	this.WaitFrame(0.5);
	this.FADE_OUT(0, 0.5);
	this.WaitFrame(0.1);
	this.Common.SetFieldGuest(0);
	this.Field.RemoveGuest(0);
	this.Field.RemoveGuest(1);
}

function ERIKA_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(50, this.Work.Get(50) + 1);
	this.Debug.Log("LOVE_PARA_ERIKA" + this.Work.Get(50));

	if (this.Work.Get(50) >= 0 && !this.Flag.Check(19300))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s701_e00_0101();
		this.Flag.Set(19300);
	}
	else if (this.Work.Get(50) >= 5 && !this.Flag.Check(19301))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s701_e00_0201();
		this.Flag.Set(19301);
	}
	else if (this.Work.Get(50) >= 10 && !this.Flag.Check(19302))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s701_e00_0301();
		this.Flag.Set(19302);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(50) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(50) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1100 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function RYUUJI_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(51, this.Work.Get(51) + 1);
	this.Debug.Log("LOVE_PARA_RYUUJI_" + this.Work.Get(51));

	if (this.Work.Get(51) >= 1 && !this.Flag.Check(19303))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s702_e00_0101();
		this.Flag.Set(19303);
	}
	else if (this.Work.Get(51) >= 5 && !this.Flag.Check(19304))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s702_e00_0201();
		this.Flag.Set(19304);
	}
	else if (this.Work.Get(51) >= 10 && !this.Flag.Check(19305))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s702_e00_0301();
		this.Flag.Set(19305);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(51) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(51) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1101 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function CHITOSE_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(52, this.Work.Get(52) + 1);
	this.Debug.Log("LOVE_PARA_CHITOSE_" + this.Work.Get(52));

	if (this.Work.Get(52) >= 1 && !this.Flag.Check(19306))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s703_e00_0101();
		this.Flag.Set(19306);
	}
	else if (this.Work.Get(52) >= 5 && !this.Flag.Check(19307))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s703_e00_0201();
		this.Flag.Set(19307);
	}
	else if (this.Work.Get(52) >= 10 && !this.Flag.Check(19308))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s703_e00_0301();
		this.Flag.Set(19308);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(52) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(52) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1102 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function YOU_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(53, this.Work.Get(53) + 1);
	this.Debug.Log("LOVE_PARA_YOU_" + this.Work.Get(53));

	if (this.Work.Get(53) >= 1 && !this.Flag.Check(19309))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s704_e00_0101();
		this.Flag.Set(19309);
	}
	else if (this.Work.Get(53) >= 5 && !this.Flag.Check(19310))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s704_e00_0201();
		this.Flag.Set(19310);
	}
	else if (this.Work.Get(53) >= 10 && !this.Flag.Check(19311) && this.Flag.Check(10055))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s704_e00_0301();
		this.Flag.Set(19311);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(53) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(53) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1103 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function NOKIA_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(54, this.Work.Get(54) + 1);
	this.Debug.Log("LOVE_PARA_NOKIA_" + this.Work.Get(54));

	if (this.Work.Get(54) >= 1 && !this.Flag.Check(19312))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s705_e00_0101();
		this.Flag.Set(19312);
	}
	else if (this.Work.Get(54) >= 5 && !this.Flag.Check(19313))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s705_e00_0201();
		this.Flag.Set(19313);
	}
	else if (this.Work.Get(54) >= 10 && !this.Flag.Check(19314))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s705_e00_0301();
		this.Flag.Set(19314);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(54) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(54) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1104 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function ARATA_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(55, this.Work.Get(55) + 1);
	this.Debug.Log("LOVE_PARA_ARATA_" + this.Work.Get(55));

	if (this.Work.Get(55) >= 1 && !this.Flag.Check(19315))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s706_e00_0101();
		this.Flag.Set(19315);
	}
	else if (this.Work.Get(55) >= 5 && !this.Flag.Check(19316))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s706_e00_0201();
		this.Flag.Set(19316);
	}
	else if (this.Work.Get(55) >= 10 && !this.Flag.Check(19317))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s706_e00_0301();
		this.Flag.Set(19317);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(55) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(55) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1105 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function MATAYOSHI_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(56, this.Work.Get(56) + 1);
	this.Debug.Log("LOVE_PARA_MATAYOSHI_" + this.Work.Get(56));

	if (this.Work.Get(56) >= 1 && !this.Flag.Check(19318))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s707_e00_0101();
		this.Flag.Set(19318);
	}
	else if (this.Work.Get(56) >= 5 && !this.Flag.Check(19319))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s707_e00_0201();
		this.Flag.Set(19319);
	}
	else if (this.Work.Get(56) >= 10 && !this.Flag.Check(19320))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s707_e00_0301();
		this.Flag.Set(19320);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(56) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(56) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1106 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function DATE_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(57, this.Work.Get(57) + 1);
	this.Debug.Log("LOVE_PARA_DATE_" + this.Work.Get(57));

	if (this.Work.Get(57) >= 1 && !this.Flag.Check(19321))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s708_e00_0101();
		this.Flag.Set(19321);
	}
	else if (this.Work.Get(57) >= 5 && !this.Flag.Check(19322))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s708_e00_0201();
		this.Flag.Set(19322);
	}
	else if (this.Work.Get(57) >= 10 && !this.Flag.Check(19323))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s708_e00_0301();
		this.Flag.Set(19323);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(57) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(57) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1107 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function FEI_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(58, this.Work.Get(58) + 1);
	this.Debug.Log("LOVE_PARA_FEI_" + this.Work.Get(58));

	if (this.Work.Get(58) >= 1 && !this.Flag.Check(19324))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s709_e00_0101();
		this.Flag.Set(19324);
	}
	else if (this.Work.Get(58) >= 5 && !this.Flag.Check(19325))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s709_e00_0201();
		this.Flag.Set(19325);
	}
	else if (this.Work.Get(58) >= 10 && !this.Flag.Check(19326))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s709_e00_0301();
		this.Flag.Set(19326);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(58) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(58) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1108 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function YUKO_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(59, this.Work.Get(59) + 1);
	this.Debug.Log("LOVE_PARA_YUKO_" + this.Work.Get(59));

	if (this.Work.Get(59) >= 1 && !this.Flag.Check(19327))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s710_e00_0101();
		this.Flag.Set(19327);
	}
	else if (this.Work.Get(59) >= 5 && !this.Flag.Check(19328))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s710_e00_0201();
		this.Flag.Set(19328);
	}
	else if (this.Work.Get(59) >= 10 && !this.Flag.Check(19329))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s710_e00_0301();
		this.Flag.Set(19329);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(59) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(59) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1109 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function AGUGABU_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(60, this.Work.Get(60) + 1);
	this.Debug.Log("LOVE_PARA_AGUGABU_" + this.Work.Get(60));

	if (this.Work.Get(60) >= 1 && !this.Flag.Check(19330))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s711_e00_0101();
		this.Flag.Set(19330);
	}
	else if (this.Work.Get(60) >= 5 && !this.Flag.Check(19331))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s711_e00_0201();
		this.Flag.Set(19331);
	}
	else if (this.Work.Get(60) >= 10 && !this.Flag.Check(19332))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s711_e00_0301();
		this.Flag.Set(19332);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(60) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(60) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1110 + love_messe);
		this.Message(1111 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function RENAMON_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(61, this.Work.Get(61) + 1);
	this.Debug.Log("LOVE_PARA_RENA_" + this.Work.Get(61));

	if (this.Work.Get(61) >= 1 && !this.Flag.Check(19333))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s712_e00_0101();
		this.Flag.Set(19333);
	}
	else if (this.Work.Get(61) >= 5 && !this.Flag.Check(19334))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s712_e00_0201();
		this.Flag.Set(19334);
	}
	else if (this.Work.Get(61) >= 10 && !this.Flag.Check(19335))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s712_e00_0301();
		this.Flag.Set(19335);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(61) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(61) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1112 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function BERUZEBUMON_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(62, this.Work.Get(62) + 1);
	this.Debug.Log("LOVE_PARA_BERU_" + this.Work.Get(62));

	if (this.Work.Get(62) >= 1 && !this.Flag.Check(19336))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s713_e00_0101();
		this.Flag.Set(19336);
	}
	else if (this.Work.Get(62) >= 5 && !this.Flag.Check(19337))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s713_e00_0201();
		this.Flag.Set(19337);
	}
	else if (this.Work.Get(62) >= 10 && !this.Flag.Check(19338))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s713_e00_0301();
		this.Flag.Set(19338);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(62) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(62) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1113 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function REOMON_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(63, this.Work.Get(63) + 1);
	this.Debug.Log("LOVE_PARA_REO_" + this.Work.Get(63));

	if (this.Work.Get(63) >= 1 && !this.Flag.Check(19339))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s714_e00_0101();
		this.Flag.Set(19339);
	}
	else if (this.Work.Get(63) >= 5 && !this.Flag.Check(19340))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s714_e00_0201();
		this.Flag.Set(19340);
	}
	else if (this.Work.Get(63) >= 10 && !this.Flag.Check(19341))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s714_e00_0301();
		this.Flag.Set(19341);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(63) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(63) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1114 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function LILIMON_Love_Event()
{
	local love_messe = 0;
	this.Work.Set(64, this.Work.Get(64) + 1);
	this.Debug.Log("LOVE_PARA_LILI_" + this.Work.Get(64));

	if (this.Work.Get(64) >= 1 && !this.Flag.Check(19342))
	{
		this.Debug.Log("Love_Event_Lv1");
		this.s715_e00_0101();
		this.Flag.Set(19342);
	}
	else if (this.Work.Get(64) >= 5 && !this.Flag.Check(19343))
	{
		this.Debug.Log("Love_Event_Lv2");
		this.s715_e00_0201();
		this.Flag.Set(19343);
	}
	else if (this.Work.Get(64) >= 10 && !this.Flag.Check(19344))
	{
		this.Debug.Log("Love_Event_Lv3");
		this.s715_e00_0301();
		this.Flag.Set(19344);
	}
	else if (!this.Flag.Check(19346))
	{
		this.Talk.Load("emblem_quest");
		this.Talk.SetMode(1);

		if (this.Work.Get(64) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(64) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1115 + love_messe);
		this.MessageClose();
		this.TalkExit();
	}
}

function HM_emblem_init()
{
	local i = 0;
	local Start_Flag = 17000;
	local End_Flag = 17099;

	for( i = Start_Flag; i <= End_Flag; i++ )
	{
		this.Flag.Clear(i);
	}

	for( i = 17540; i <= 17558; i++ )
	{
		this.Flag.Clear(i);
	}

	this.Flag.Clear(17559);
	this.Work.Set(48, 0);
	this.Work.Set(49, 0);
	this.Work.Set(75, 0);
	this.Work.Set(76, 0);
	this.Work.Set(77, 0);
}

function HM_emblem_quest_cancel( QuestID )
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			this.Field.MoveOffPlayer();

			switch(this.Message_Yes_No_Select(6014))
			{
			case 1:
				this.Quest.Cancel(QuestID);
				this.Flag.Set(15781);
				this.Flag.Clear(15780);
				this.HM_emblem_init();
				this.Field.WarpIn("EFF_FLD_WARP_IN", 30, false, true, false);
				this.WaitFrame(1.0);
				this.Field.PlayAnimation(this.Common.GetPlayerModelName(), "ff03", 0.2, false);
				this.Sound.PlaySE("fe_046", false);

				while (!this.Field.IsEndAnimation(this.Common.GetPlayerModelName()))
				{
					this.WaitFrame(this.Util.SecondFromFrame(1));
				}

				this.Field.SetPlayerVisible(false);
				this.Field.ChangeScene(8, 1);
				break;

			case 2:
				this.Field.MoveOnPlayer();
				break;

			case 3:
				this.Field.MoveOnPlayer();
				break;
			}
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function HM_DB_geust_chose()
{
	local flag = 0;
	local i = 0;

	for( i = 75; i <= 94; i++ )
	{
		if (this.Quest.GetProgress(i) == 1)
		{
			if (this.Flag.Check(11999) && !this.Flag.Check(12099))
			{
				this.Quest.Cancel(i);
				this.Field.MoveOffPlayer();
				this.FADE_IN(0, 0.5);
				this.Talk.Load("t5003");
				this.Talk.SetMode(1);
				this.Message(307);
				this.MessageClose();
				this.TalkExit();
				i = 95;
				this.Field.MoveOnPlayer();
			}
			else
			{
				this.Debug.Log("DB_FARM_QUEST_PROG_" + i + "_IS_1");
				this.Field.MoveOffPlayer();
				this.FADE_IN(0, 0.5);
				this.Work.Set(78, 99);
				this.Work.Set(79, 99);
				this.Quest.AdvanceProgress(i);
				this.Field.MoveOffPlayer();
				this.Talk.Load("emblem_quest");
				this.Talk.SetMode(1);
				this.Message(2000);
				this.Message(2001);
				this.MessageClose();
				this.TalkExit();
				this.HM_DB_geust_chose_window();
				this.Talk.Load("emblem_quest");
				this.Talk.SetMode(1);
				this.Message(2002);
				this.MessageClose();
				this.TalkExit();
				this.HM_DB_geust_chose_window();
				this.Talk.Load("emblem_quest");
				this.Talk.SetMode(1);
				this.Message(2003);
				this.MessageClose();
				this.TalkExit();
				this.Sound.PlaySE("com_070", false);
				this.Field.StartAccessMode("EFF_FLD_AC");

				while (!this.Field.IsEndAccessMode())
				{
					this.WaitFrame(this.Util.SecondFromFrame(1));
				}

				this.FADE_OUT(0, 0.2);
				this.Debug.Log("DB_Encount_ID_" + (i - 55));
				this.Domination.Encount(i - 55);
				i = 95;
				this.Field.MoveOnPlayer();
			}
		}
		else if (this.Quest.GetProgress(i) == 2)
		{
			this.HM_ChangeField("t50", 7, "start_00", 90);
		}
	}
}

function HM_DB_geust_chose_window()
{
	this.HM_DB_geust_chose_window_01();
}

function HM_DB_geust_chose_window_01()
{
	local multiwin_id = 600;

	if (this.Flag.Check(10055))
	{
		multiwin_id = 606;
	}
	else if (this.Flag.Check(12799))
	{
		multiwin_id = 608;
	}
	else if (this.Flag.Check(12699))
	{
		multiwin_id = 605;
	}
	else if (this.Flag.Check(12599))
	{
		multiwin_id = 605;
	}
	else if (this.Flag.Check(12499))
	{
		multiwin_id = 605;
	}
	else if (this.Flag.Check(12399))
	{
		multiwin_id = 605;
	}
	else if (this.Flag.Check(12299))
	{
		multiwin_id = 609;
	}
	else if (this.Flag.Check(12199))
	{
		multiwin_id = 610;
	}
	else if (this.Flag.Check(12099))
	{
		multiwin_id = 610;
	}
	else if (this.Flag.Check(11999))
	{
		multiwin_id = 639;
	}
	else if (this.Flag.Check(11899))
	{
		multiwin_id = 606;
	}
	else if (this.Flag.Check(11799))
	{
		multiwin_id = 606;
	}
	else if (this.Flag.Check(11699))
	{
		multiwin_id = 606;
	}
	else if (this.Flag.Check(11599))
	{
		multiwin_id = 607;
	}
	else if (this.Flag.Check(11499))
	{
		multiwin_id = 601;
	}
	else if (this.Flag.Check(11399))
	{
		multiwin_id = 602;
	}
	else if (this.Flag.Check(11299))
	{
		multiwin_id = 600;
	}

	this.Debug.Log("Multiwin_id_" + multiwin_id);
	this.Window.OpenMultiSelect(multiwin_id);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		if (this.Work.Get(78) == 0)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_01();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3025);
			break;
		}

	case 2:
		if (this.Work.Get(78) == 1)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_01();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3026);
			break;
		}

	case 3:
		if (this.Work.Get(78) == 2)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_01();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3027);
			break;
		}

	case 4:
		if (this.Work.Get(78) == 3)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_01();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3028);
			break;
		}

	case 5:
		this.HM_DB_geust_chose_window_02();
		break;
	}
}

function HM_DB_geust_chose_window_02()
{
	local multiwin_id = 630;

	if (this.Flag.Check(10055))
	{
		multiwin_id = 630;
	}
	else if (this.Flag.Check(12799))
	{
		multiwin_id = 628;
	}
	else if (this.Flag.Check(12699))
	{
		multiwin_id = 629;
	}
	else if (this.Flag.Check(12599))
	{
		multiwin_id = 628;
	}
	else if (this.Flag.Check(12499))
	{
		multiwin_id = 628;
	}
	else if (this.Flag.Check(12399))
	{
		multiwin_id = 642;
	}
	else if (this.Flag.Check(12299))
	{
		multiwin_id = 630;
	}
	else if (this.Flag.Check(12199))
	{
		multiwin_id = 628;
	}
	else if (this.Flag.Check(12099))
	{
		multiwin_id = 627;
	}
	else if (this.Flag.Check(11999))
	{
		multiwin_id = 643;
	}
	else if (this.Flag.Check(11899))
	{
		multiwin_id = 617;
	}
	else if (this.Flag.Check(11799))
	{
		multiwin_id = 617;
	}
	else if (this.Flag.Check(11699))
	{
		multiwin_id = 617;
	}
	else if (this.Flag.Check(11599))
	{
		multiwin_id = 616;
	}
	else if (this.Flag.Check(11499))
	{
		multiwin_id = 616;
	}

	this.Window.OpenMultiSelect(multiwin_id);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		if (this.Work.Get(78) == 9)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_02();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3003);
			break;
		}

	case 2:
		if (this.Work.Get(78) == 8)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_02();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3012);
			break;
		}

	case 3:
		if (this.Work.Get(78) == 7)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_02();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3015);
			break;
		}

	case 4:
		if (this.Work.Get(78) == 6)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_02();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3007);
			break;
		}

	case 5:
		this.HM_DB_geust_chose_window_03();
		break;

	case 6:
		this.HM_DB_geust_chose_window_01();
		break;
	}
}

function HM_DB_geust_chose_window_03()
{
	local multiwin_id = 615;

	if (this.Flag.Check(10055))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12799))
	{
		multiwin_id = 613;
	}
	else if (this.Flag.Check(12699))
	{
		multiwin_id = 613;
	}
	else if (this.Flag.Check(12599))
	{
		multiwin_id = 614;
	}
	else if (this.Flag.Check(12499))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12399))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12299))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12199))
	{
		multiwin_id = 615;
	}
	else if (this.Flag.Check(12099))
	{
		multiwin_id = 612;

		if (this.Quest.GetReceiveStatus(63) == 2)
		{
			multiwin_id = 615;
		}
	}

	this.Window.OpenMultiSelect(multiwin_id);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		if (this.Work.Get(78) == 4 || this.Work.Get(78) == 10)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_03();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3002);
			break;
		}

	case 2:
		if (this.Work.Get(78) == 10 || this.Work.Get(78) == 4)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_03();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(1050);
			break;
		}

	case 3:
		if (this.Work.Get(78) == 5)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_03();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(3005);
			break;
		}

	case 4:
		break;

	case 5:
		this.HM_DB_geust_chose_window_04();
		break;

	case 6:
		this.HM_DB_geust_chose_window_02();
		break;
	}
}

function HM_DB_geust_chose_window_04()
{
	local multiwin_id = 638;
	multiwin_id = 638;

	if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(61) == 2 && this.Quest.GetReceiveStatus(59) == 2 && this.Quest.GetReceiveStatus(60) == 2)
	{
		multiwin_id = 638;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(59) == 2 && this.Quest.GetReceiveStatus(61) == 2)
	{
		multiwin_id = 634;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(60) == 2 && this.Quest.GetReceiveStatus(61) == 2)
	{
		multiwin_id = 637;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(60) == 2 && this.Quest.GetReceiveStatus(59) == 2)
	{
		multiwin_id = 636;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(61) == 2)
	{
		multiwin_id = 633;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(59) == 2)
	{
		multiwin_id = 632;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2 && this.Quest.GetReceiveStatus(60) == 2)
	{
		multiwin_id = 635;
	}
	else if (this.Quest.GetReceiveStatus(63) == 2)
	{
		multiwin_id = 631;
	}

	this.Window.OpenMultiSelect(multiwin_id);

	while (!this.Window.IsNextMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	local result = this.Window.GetResultMultiSelect();
	this.Window.CloseMultiSelect();

	while (!this.Window.IsEndCloseMultiSelect())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	switch(result)
	{
	case 1:
		if (this.Work.Get(78) == 14)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_04();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(1359);
			break;
		}

		break;

	case 2:
		if (this.Work.Get(78) == 11)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_04();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(1391);
			break;
		}

		break;

	case 3:
		if (this.Work.Get(78) == 12)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_04();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(1035);
			break;
		}

		break;

	case 4:
		if (this.Work.Get(78) == 13)
		{
			this.INFO_WINDOW(9030);
			this.HM_DB_geust_chose_window_04();
			break;
		}
		else
		{
			this.HM_DB_gest_chosed(1072);
			break;
		}

		break;

	case 5:
		break;

	case 6:
		this.HM_DB_geust_chose_window_03();
		break;
	}
}

function HM_DB_gest_chosed( GuestID )
{
	if (this.Work.Get(78) == 99)
	{
	}

	this.Sound.PlaySE("ev_059", false);
	this.WaitFrame(2);

	if (GuestID == 3025)
	{
		this.s751_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 0);
		}
		else
		{
			this.Work.Set(79, 0);
		}
	}

	if (GuestID == 3026)
	{
		this.s752_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 1);
		}
		else
		{
			this.Work.Set(79, 1);
		}
	}

	if (GuestID == 3027)
	{
		this.s753_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 2);
		}
		else
		{
			this.Work.Set(79, 2);
		}
	}

	if (GuestID == 3028)
	{
		this.s754_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 3);
		}
		else
		{
			this.Work.Set(79, 3);
		}
	}

	if (GuestID == 3002)
	{
		this.s755_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 4);
		}
		else
		{
			this.Work.Set(79, 4);
		}
	}

	if (GuestID == 3005)
	{
		this.s756_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 5);
		}
		else
		{
			this.Work.Set(79, 5);
		}
	}

	if (GuestID == 3007)
	{
		this.s757_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 6);
		}
		else
		{
			this.Work.Set(79, 6);
		}
	}

	if (GuestID == 3015)
	{
		this.s758_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 7);
		}
		else
		{
			this.Work.Set(79, 7);
		}
	}

	if (GuestID == 3012)
	{
		this.s759_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 8);
		}
		else
		{
			this.Work.Set(79, 8);
		}
	}

	if (GuestID == 3003)
	{
		this.s760_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 9);
		}
		else
		{
			this.Work.Set(79, 9);
		}
	}

	if (GuestID == 1050)
	{
		this.s761_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 10);
		}
		else
		{
			this.Work.Set(79, 10);
		}
	}

	if (GuestID == 1391)
	{
		this.s762_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 11);
		}
		else
		{
			this.Work.Set(79, 11);
		}
	}

	if (GuestID == 1035)
	{
		this.s763_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 12);
		}
		else
		{
			this.Work.Set(79, 12);
		}
	}

	if (GuestID == 1072)
	{
		this.s764_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 13);
		}
		else
		{
			this.Work.Set(79, 13);
		}
	}

	if (GuestID == 1359)
	{
		this.s765_e00_0101();

		if (this.Work.Get(78) == 99)
		{
			this.Work.Set(78, 14);
		}
		else
		{
			this.Work.Set(79, 14);
		}
	}
}

function HM_DB_geust_leave()
{
	this.WaitFrame(0.5);
	local love_messe = 0;

	if (this.Work.Get(78) == 0 || this.Work.Get(79) == 0)
	{
		this.ERIKA_Love_Event();
	}

	if (this.Work.Get(78) == 1 || this.Work.Get(79) == 1)
	{
		this.RYUUJI_Love_Event();
	}

	if (this.Work.Get(78) == 2 || this.Work.Get(79) == 2)
	{
		this.CHITOSE_Love_Event();
	}

	if (this.Work.Get(78) == 3 || this.Work.Get(79) == 3)
	{
		this.YOU_Love_Event();
	}

	if (this.Work.Get(78) == 4 || this.Work.Get(79) == 4)
	{
		this.NOKIA_Love_Event();
	}

	if (this.Work.Get(78) == 5 || this.Work.Get(79) == 5)
	{
		this.ARATA_Love_Event();
	}

	if (this.Work.Get(78) == 6 || this.Work.Get(79) == 6)
	{
		this.MATAYOSHI_Love_Event();
	}

	if (this.Work.Get(78) == 7 || this.Work.Get(79) == 7)
	{
		this.DATE_Love_Event();
	}

	if (this.Work.Get(78) == 8 || this.Work.Get(79) == 8)
	{
		this.FEI_Love_Event();
	}

	if (this.Work.Get(78) == 9 || this.Work.Get(79) == 9)
	{
		this.YUKO_Love_Event();
	}

	if (this.Work.Get(78) == 10 || this.Work.Get(79) == 10)
	{
		this.AGUGABU_Love_Event();
	}

	if (this.Work.Get(78) == 11 || this.Work.Get(79) == 11)
	{
		this.RENAMON_Love_Event();
	}

	if (this.Work.Get(78) == 12 || this.Work.Get(79) == 12)
	{
		this.BERUZEBUMON_Love_Event();
	}

	if (this.Work.Get(78) == 13 || this.Work.Get(79) == 13)
	{
		this.REOMON_Love_Event();
	}

	if (this.Work.Get(78) == 14 || this.Work.Get(79) == 14)
	{
		this.LILIMON_Love_Event();
	}

	this.WaitFrame(0.5);
}

function infitiy_dungeon_floor_pattern_select()
{
	local LvNum = 0;
	local Pattern = 0;
	local FlagStartNum = 19500;
	local i = 0;
	local FlagNum = 0;

	for( i = 0; i <= 2; i++ )
	{
		if (i == 0)
		{
			LvNum = 0;
		}

		if (i == 1)
		{
			LvNum = 3;
		}

		if (i == 2)
		{
			LvNum = 6;
		}

		Pattern = this.Math.Rand(0, 90);

		if (Pattern <= 29)
		{
			Pattern = 0;
		}
		else if (Pattern <= 59)
		{
			Pattern = 1;
		}
		else if (Pattern <= 89)
		{
			Pattern = 2;
		}

		if (Pattern == 0)
		{
			this.Flag.Set(FlagStartNum + LvNum + 0);
			this.Flag.Clear(FlagStartNum + LvNum + 1);
			this.Flag.Clear(FlagStartNum + LvNum + 2);
		}

		if (Pattern == 1)
		{
			this.Flag.Clear(FlagStartNum + LvNum + 0);
			this.Flag.Set(FlagStartNum + LvNum + 1);
			this.Flag.Clear(FlagStartNum + LvNum + 2);
		}

		if (Pattern == 2)
		{
			this.Flag.Clear(FlagStartNum + LvNum + 0);
			this.Flag.Clear(FlagStartNum + LvNum + 1);
			this.Flag.Set(FlagStartNum + LvNum + 2);
		}
	}
}

function infitiy_dungeon_floor_update()
{
	local FlagStartNum = 19520;
	local FlagEndNum = 19549;
	local i = 0;
	local i2 = 0;

	for( i = FlagStartNum; i <= FlagEndNum; i++ )
	{
		if (this.Flag.Check(i))
		{
			this.Flag.Clear(FlagStartNum);
			this.Flag.Clear(i);
			this.Flag.Set(i + 1);

			if (i == FlagEndNum)
			{
				for( i2 = FlagStartNum; i2 <= FlagEndNum; i++ )
				{
					this.Flag.Clear(i);
				}

				this.Flag.Set(FlagStartNum);
			}

			i = FlagEndNum;
		}
		else
		{
			this.Flag.Set(FlagStartNum);
		}
	}

	this.Flag.Set(19509);
}

function infitiy_dungeon_floor_check()
{
	local FlagStartNum = 19520;
	local FlagEndNum = 19549;
	local FlagNum = 0;
	local FlagDifFloor = FlagStartNum - 1;
	local i = 0;

	for( i = FlagStartNum; i <= FlagEndNum; i++ )
	{
		if (this.Flag.Check(i))
		{
			FlagNum = i - FlagDifFloor;
		}
	}

	return FlagNum;
}

function infitiy_dungeon_floor_check_print()
{
	this.Debug.ClearLog();
	this.Debug.Log("Floor_Num_" + this.infitiy_dungeon_floor_check());
	this.Field.SetGimmickVisible("obj_gk_0000", true);
	this.Field.SetGimmickVisible("obj_gk_0001", true);
	this.Field.SetGimmickVisible("obj_gk_0002", true);
	this.Field.SetGimmickVisible("obj_gk_0003", true);
	this.Field.SetGimmickVisible("obj_gk_0004", true);
	this.Field.SetGimmickVisible("obj_gk_0005", true);
	this.Field.SetGimmickVisible("obj_gk_0006", true);
	this.Field.SetGimmickVisible("obj_gk_0007", true);
	this.Field.SetGimmickVisible("obj_gk_0008", true);
	this.Field.SetGimmickVisible("obj_gk_0009", true);

	if (this.infitiy_dungeon_floor_check() <= 5)
	{
		this.HM_Play_BGM_load_set(13, "none");
	}
	else if (this.infitiy_dungeon_floor_check() <= 10)
	{
		this.HM_Play_BGM_load_set(104, "none");
	}
	else if (this.infitiy_dungeon_floor_check() <= 15)
	{
		this.HM_Play_BGM_load_set(18, "none");
	}
	else if (this.infitiy_dungeon_floor_check() <= 20)
	{
		this.HM_Play_BGM_load_set(117, "none");
	}
	else if (this.infitiy_dungeon_floor_check() <= 25)
	{
		this.HM_Play_BGM_load_set(19, "none");
	}
	else if (this.infitiy_dungeon_floor_check() <= 29)
	{
		this.HM_Play_BGM_load_set(103, "_04");
	}
	else if (this.infitiy_dungeon_floor_check() == 30)
	{
		this.HM_Play_BGM_load_set(157, "none");
	}

	this.Flag.Set(19200);
	this.Flag.Set(10022);
	this.Flag.Set(19272);

	if (this.infitiy_dungeon_floor_check() == 1 || this.infitiy_dungeon_floor_check() == 11 || this.infitiy_dungeon_floor_check() == 21)
	{
		this.HM_Play_BGM_load_set(22, "none");
		this.Flag.Clear(19200);
		this.Flag.Clear(10022);
		this.Flag.Clear(19272);
	}

	if (this.Quest.GetProgress(64) == 3)
	{
	}
	else
	{
		this.HM_Play_BGM(this.Work.Get(40), 0.0);
	}

	if (this.Flag.Check(19509))
	{
		this.Field.MoveOffPlayer();

		if (!this.Flag.Check(10021))
		{
			this.FADE_IN(1, 0.5);
			this.WaitFrame(0.5);
		}

		this.INFO_WINDOW(this.infitiy_dungeon_floor_check() + 8999);
		this.HM_EVENT_END_SET(0);
		this.Flag.Clear(19509);
	}
}

function infitiy_dungeon_floor_flag_clear()
{
	local FlagStartNum = 19500;
	local FlagEndNum = 19656;
	local i = 0;

	for( i = FlagStartNum; i <= FlagEndNum - 1; i++ )
	{
		this.Flag.Clear(i);
	}
}

function infitiy_dungeon_plaza_to_next()
{
	local NowFloor = 0;
	local NextFloorNum = 0;
	local FloorPattern = 0;
	local FlagStartNum = 0;
	local FlagAddNum = 2;
	local Lv = 0;
	local i = 0;
	NowFloor = this.infitiy_dungeon_floor_check();
	NextFloorNum = NowFloor + 1;
	this.Flag.Set(19509);
	this.Field.MoveOffPlayer();
	this.FADE_OUT(1, 0.5);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("fe_068", false);
	this.Field.SetPlayerVisible(false);
	this.Field.SetDigimonVisible(false);
	this.infitiy_dungeon_treasure_set();
	this.Flag.Set(19511);
	this.HM_ChangeField("d15" + this.Math.Rand(0, 3), NextFloorNum, "start_00", 0);
}

function infitiy_dungeon_treasure_set()
{
	local i = 0;

	for( i = 19690; i <= 19805; i++ )
	{
		this.Flag.Set(i);
	}

	local rand_num = 0;
	rand_num = this.Math.Rand(19690, 19721);
	this.Flag.Clear(rand_num);
	this.Debug.Log("rand_num_" + rand_num);
	rand_num = this.Math.Rand(19721, 19752);
	this.Flag.Clear(rand_num);
	this.Debug.Log("rand_num_" + rand_num);
	rand_num = this.Math.Rand(19752, 19785);
	this.Flag.Clear(rand_num);
	this.Debug.Log("rand_num_" + rand_num);
	rand_num = this.Math.Rand(0, 100);

	if (rand_num <= 48)
	{
		this.Flag.Clear(this.Math.Rand(19785, 19795));
	}
	else if (rand_num <= 96)
	{
		this.Flag.Clear(this.Math.Rand(19795, 19805));
	}
	else
	{
		this.Flag.Clear(19805);
	}
}

function infitiy_dungeon_guest_talk( Guest_Id, Flag_num, Start_loc, roc )
{
	local love_messe = 0;
	this.Talk.Load("emblem_quest");
	this.Talk.SetMode(1);

	if (Guest_Id == 3025)
	{
		if (this.Work.Get(50) >= 10)
		{
			love_messe = 40;
			this.Debug.Log(love_messe);
		}
		else if (this.Work.Get(50) >= 5)
		{
			love_messe = 20;
			this.Debug.Log(love_messe);
		}
		else
		{
			love_messe = 0;
			this.Debug.Log(love_messe);
		}

		this.Message(1000 + love_messe);
	}

	if (Guest_Id == 3026)
	{
		if (this.Work.Get(51) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(51) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1001 + love_messe);
	}

	if (Guest_Id == 3027)
	{
		if (this.Work.Get(52) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(52) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1002 + love_messe);
	}

	if (Guest_Id == 3028)
	{
		if (this.Work.Get(53) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(53) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1003 + love_messe);
	}

	if (Guest_Id == 3002)
	{
		if (this.Work.Get(54) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(54) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1004 + love_messe);
	}

	if (Guest_Id == 3005)
	{
		if (this.Work.Get(55) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(55) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1005 + love_messe);
	}

	if (Guest_Id == 3007)
	{
		if (this.Work.Get(56) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(56) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1006 + love_messe);
	}

	if (Guest_Id == 3015)
	{
		if (this.Work.Get(57) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(57) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1007 + love_messe);
	}

	if (Guest_Id == 3012)
	{
		if (this.Work.Get(58) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(58) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1008 + love_messe);
	}

	if (Guest_Id == 3003)
	{
		if (this.Work.Get(59) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(59) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1009 + love_messe);
	}

	if (Guest_Id == 1050)
	{
		if (this.Work.Get(60) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(60) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1010 + love_messe);
		this.Message(1011 + love_messe);
	}

	if (Guest_Id == 1391)
	{
		if (this.Work.Get(61) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(61) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1012 + love_messe);
	}

	if (Guest_Id == 1035)
	{
		if (this.Work.Get(62) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(62) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1013 + love_messe);
	}

	if (Guest_Id == 1072)
	{
		if (this.Work.Get(63) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(63) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1014 + love_messe);
	}

	if (Guest_Id == 1359)
	{
		if (this.Work.Get(64) >= 10)
		{
			love_messe = 40;
		}
		else if (this.Work.Get(64) >= 5)
		{
			love_messe = 20;
		}
		else
		{
			love_messe = 0;
		}

		this.Message(1015 + love_messe);
	}

	this.MessageClose();
	this.TalkExit();
	this.Field.MoveOffPlayer();
	this.FADE_OUT(0, 0.5);
	this.Sound.PlaySE("com_033", false);
	this.Common.SetFieldGuest(0);
	this.Field.RemoveGuest(0);
	this.Field.RemoveGuest(1);
	this.Common.SetFieldGuest(Guest_Id);
	this.HM_emblem_digi_chosed(Guest_Id);
	this.Flag.Clear(19670);
	this.Flag.Clear(19671);
	this.Flag.Clear(19672);
	this.Flag.Clear(19673);
	this.Flag.Clear(19674);
	this.Flag.Clear(19675);
	this.Flag.Clear(19676);
	this.Flag.Clear(19677);
	this.Flag.Clear(19678);
	this.Flag.Clear(19679);
	this.Flag.Clear(19680);
	this.Flag.Clear(19681);
	this.Flag.Clear(19682);
	this.Flag.Clear(19683);
	this.Flag.Clear(19684);
	this.Flag.Set(Flag_num);
	this.HM_ChangeField("d150", 1, Start_loc, roc);
}

function infitiy_dungeon_guest_back_Digilabo()
{
	local Guest_Id = 0;

	if (this.Flag.Check(19670))
	{
		Guest_Id = 3025;
	}

	if (this.Flag.Check(19671))
	{
		Guest_Id = 3026;
	}

	if (this.Flag.Check(19672))
	{
		Guest_Id = 3027;
	}

	if (this.Flag.Check(19673))
	{
		Guest_Id = 3028;
	}

	if (this.Flag.Check(19674))
	{
		Guest_Id = 3003;
	}

	if (this.Flag.Check(19675))
	{
		Guest_Id = 3012;
	}

	if (this.Flag.Check(19676))
	{
		Guest_Id = 3015;
	}

	if (this.Flag.Check(19677))
	{
		Guest_Id = 3007;
	}

	if (this.Flag.Check(19678))
	{
		Guest_Id = 3002;
	}

	if (this.Flag.Check(19679))
	{
		Guest_Id = 1050;
	}

	if (this.Flag.Check(19680))
	{
		Guest_Id = 3005;
	}

	if (this.Flag.Check(19681))
	{
		Guest_Id = 1359;
	}

	if (this.Flag.Check(19682))
	{
		Guest_Id = 1391;
	}

	if (this.Flag.Check(19683))
	{
		Guest_Id = 1035;
	}

	if (this.Flag.Check(19684))
	{
		Guest_Id = 1072;
	}

	this.Common.SetFieldGuest(0);
	this.Field.RemoveGuest(0);
	this.Field.RemoveGuest(1);
	this.Common.SetFieldGuest(Guest_Id);
	this.HM_emblem_digi_chosed(Guest_Id);
}

function infitiy_dungeon_boss()
{
	this.Flag.Set(19510);

	if (!this.Flag.Check(19010))
	{
		this.HM_EVENT_START_SET(2);
		this.s564_d150_0501();
		this.HM_EVENT_END_SET(2);
	}
	else
	{
		this.HM_EVENT_START_SET(2);
		this.s564_d150_0801();
		this.HM_EVENT_END_SET(2);
	}

	this.Flag.Set(19252);

	if (!this.Flag.Check(19010))
	{
		this.Battle.Encount(6909, 823);
	}
	else if (this.Math.Rand(0, 100) <= 30)
	{
		this.Battle.Encount(6902, 823);
	}
	else if (this.Math.Rand(0, 100) <= 60)
	{
		this.Battle.Encount(6905, 823);
	}
	else
	{
		this.Battle.Encount(6908, 823);
	}
}

function infitiy_dungeon_boss_destroy()
{
	if (this.Flag.Check(19510))
	{
		if (!this.Flag.Check(19010))
		{
			this.HM_EVENT_START_SET(0);
			this.Flag.Set(19010);
			this.s564_d150_0601();
			this.HM_EVENT_END_SET(2);
			this.Flag.Set(19010);
		}
		else
		{
			this.HM_EVENT_START_SET(0);
			this.s564_d150_0901();
			this.HM_EVENT_END_SET(2);
		}

		this.Flag.Clear(19509);
		this.Flag.Clear(19510);
		this.Debug.Log("GetFieldGuest_" + this.Common.GetFieldGuest());

		if (this.Common.GetFieldGuest() >= 1)
		{
			this.HM_emblem_geust_leave();
		}

		this.Flag.Clear(19670);
		this.Flag.Clear(19671);
		this.Flag.Clear(19672);
		this.Flag.Clear(19673);
		this.Flag.Clear(19674);
		this.Flag.Clear(19675);
		this.Flag.Clear(19676);
		this.Flag.Clear(19677);
		this.Flag.Clear(19678);
		this.Flag.Clear(19679);
		this.Flag.Clear(19680);
		this.Flag.Clear(19681);
		this.Flag.Clear(19682);
		this.Flag.Clear(19683);
		this.Flag.Clear(19684);
		this.infitiy_dungeon_floor_flag_clear();
		this.HM_ChangeField("d150", 1, "start_00", 180);
	}
}

function infitiy_dungeon_little_boss_destroy()
{
	if (!this.Flag.Check(19511))
	{
		this.Field.SetNpcVisible("npc_0000", false);

		if (this.Common.GetFieldGuest() == 3025)
		{
			this.Work.Set(50, this.Work.Get(50) + 1);
			this.Debug.Log("LOVE_PARA_ERIKA" + this.Work.Get(50));
		}

		if (this.Common.GetFieldGuest() == 3026)
		{
			this.Work.Set(51, this.Work.Get(51) + 1);
			this.Debug.Log("LOVE_PARA_RYUUJI_" + this.Work.Get(51));
		}

		if (this.Common.GetFieldGuest() == 3027)
		{
			this.Work.Set(52, this.Work.Get(52) + 1);
			this.Debug.Log("LOVE_PARA_CHITOSE_" + this.Work.Get(52));
		}

		if (this.Common.GetFieldGuest() == 3028)
		{
			this.Work.Set(53, this.Work.Get(53) + 1);
			this.Debug.Log("LOVE_PARA_YOU_" + this.Work.Get(53));
		}

		if (this.Common.GetFieldGuest() == 3002)
		{
			this.Work.Set(54, this.Work.Get(54) + 1);
			this.Debug.Log("LOVE_PARA_NOKIA_" + this.Work.Get(54));
		}

		if (this.Common.GetFieldGuest() == 3005)
		{
			this.Work.Set(55, this.Work.Get(55) + 1);
			this.Debug.Log("LOVE_PARA_ARATA_" + this.Work.Get(55));
		}

		if (this.Common.GetFieldGuest() == 3007)
		{
			this.Work.Set(56, this.Work.Get(56) + 1);
			this.Debug.Log("LOVE_PARA_MATAYOSHI_" + this.Work.Get(56));
		}

		if (this.Common.GetFieldGuest() == 3015)
		{
			this.Work.Set(57, this.Work.Get(57) + 1);
			this.Debug.Log("LOVE_PARA_DATE_" + this.Work.Get(57));
		}

		if (this.Common.GetFieldGuest() == 3012)
		{
			this.Work.Set(58, this.Work.Get(58) + 1);
			this.Debug.Log("LOVE_PARA_FEI_" + this.Work.Get(58));
		}

		if (this.Common.GetFieldGuest() == 3003)
		{
			this.Work.Set(59, this.Work.Get(59) + 1);
			this.Debug.Log("LOVE_PARA_YUKO_" + this.Work.Get(59));
		}

		if (this.Common.GetFieldGuest() == 1050)
		{
			this.Work.Set(60, this.Work.Get(60) + 1);
			this.Debug.Log("LOVE_PARA_AGUGABU_" + this.Work.Get(60));
		}

		if (this.Common.GetFieldGuest() == 1391)
		{
			this.Work.Set(61, this.Work.Get(61) + 1);
			this.Debug.Log("LOVE_PARA_RENA_" + this.Work.Get(61));
		}

		if (this.Common.GetFieldGuest() == 1035)
		{
			this.Work.Set(62, this.Work.Get(62) + 1);
			this.Debug.Log("LOVE_PARA_BERU_" + this.Work.Get(62));
		}

		if (this.Common.GetFieldGuest() == 1072)
		{
			this.Work.Set(63, this.Work.Get(63) + 1);
			this.Debug.Log("LOVE_PARA_REO_" + this.Work.Get(63));
		}

		if (this.Common.GetFieldGuest() == 1359)
		{
			this.Work.Set(64, this.Work.Get(64) + 1);
			this.Debug.Log("LOVE_PARA_LILI_" + this.Work.Get(64));
		}
	}
	else
	{
		this.Field.SetNpcVisible("npc_0000", true);
	}
}

function m51_d122_0801()
{
	this.Sound.StopBGM(0.1);
	this.Sound.PlayBGM("M22", 0);
	this.Talk.Load("m51_d122_0801");
	this.Talk.LoadModel(1, "pc021", 1);
	this.Talk.LoadAnimation(1, "fw01");
	this.Talk.LoadAnimation(1, "fn01");
	this.Talk.LoadAnimation(1, "e009");
	this.Talk.LoadAnimation(1, "e008");
	this.WaitTalkLoadModel();
	this.Vista.Start();
	this.Vista.LoadBackGround("d12201f");
	this.Vista.LoadCameraAnimation("m51_d122_0801_evt_Camera");
	this.Vista.LoadLocater("m51_d122_0801_evt");
	this.Vista.SetLight("m51_d122_0801_evt_Light");
	this.WaitVistaLoad();
	this.Vista.LocateModel("pc021", 0, 0);
	this.Vista.SetOutlineModel("pc021", 1);
	this.Vista.PlayAnimation("pc021", "fn01", 0, true);
	this.Vista.SetModelVisible("pc021", false, 0);
	this.Vista.Play();
	this.Vista.SetCameraAnimationTime(100, 250);
	this.Fade.In(0, 3);
	this.WaitFrame(5);
	this.Vista.SetModelVisible("pc021", true, 0);
	this.Vista.PlayAnimation("pc021", "ff04", 0, false);
	this.Vista.SetCameraAnimationTime(0, 30);
	this.Sound.PlaySE("fe_047", false);
	this.WaitFrame(1.5);
	this.Vista.PlayAnimation("pc021", "e504", 0, true);
	this.Vista.StartFrameModel("pc021", "e504", 30);
	this.Vista.SetCameraAnimationTime(300, 390);
	this.WaitFrame(3);
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 1213, 1, 0);
	this.Talk.SetOutlineModel(1, 1);
	this.Talk.MovePosition(1, 1212, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(1, "e008", 0.30000001, true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(1, "f04_m01", true);
	this.Talk.PlayAnimation(1, "fn01", 0.5, true);
	this.MessageTalk(3);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e009", 0.5, true);
	this.WaitFrame(1.0);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(1, "fw01", 0.30000001, true);
	this.Talk.MovePosition(1, 2136, 4.0, 1);
	this.WaitFrame(1.0);
	this.Talk.HideModel(1, 2, 0.5);
	this.WaitFrame(0.5);
	this.Fade.Out(0, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.VistaExit();
	this.WaitFrame(0.1);
}

function m51_d122_0901()
{
	local DIGIMON_PLANT = 0;
	local DIGIMON_BEAST = 1;
	local DIGIMON_STONE = 2;
	this.HM_MAP_SET_INVISIBLE(false, false, false, false, false);
	this.Talk.Load("m51_d122_0901");
	this.Talk.LoadModel(1, "pc021", 1);
	this.Talk.LoadModel(2, "mob027", 2);
	this.Talk.LoadAnimation(1, "e001");
	this.Talk.LoadAnimation(1, "e002");
	this.Talk.LoadAnimation(1, "e002_end");
	this.Talk.LoadAnimation(1, "e006");
	this.Talk.LoadAnimation(1, "e008");
	this.Talk.LoadAnimation(1, "e009");
	this.Talk.LoadAnimation(1, "e102");
	this.Talk.LoadAnimation(1, "e112");
	this.Talk.LoadAnimation(1, "e114");
	this.Talk.LoadAnimation(1, "e504");
	this.Talk.LoadAnimation(2, "ft01");
	this.Talk.LoadAnimation(2, "fn01");
	this.Talk.LoadAnimation(2, "fn02");
	this.Talk.LoadAnimation(2, "fn03");
	this.Talk.LoadAnimation(2, "fn10");
	this.Talk.LoadAnimation(2, "fn11");
	local result;
	this.WaitTalkLoadModel();
	this.Vista.Start();
	this.Vista.LoadBackGround("d12201f");
	this.Vista.LoadCameraAnimation("m51_d122_0901_evt_Camera");
	this.Vista.LoadLocater("m51_d122_0901_evt");
	this.Vista.SetLight("m51_d122_0901_evt_Light");
	this.Vista.LoadAnimation("chr389", "bn01");
	this.WaitVistaLoad();
	this.Vista.LocateModel("pc021", 0, 0);
	this.Vista.LocateModel("mob027", 500, 600);
	this.Vista.LocateModel("mob031", 0, 0);
	this.Vista.LocateModel("chr389", 0, 0);
	this.Vista.LocateModel("chr595", 0, 0);
	this.Vista.LocateModel("chr303", 0, 0);
	this.Vista.LocateModel("chr097", 0, 0);
	this.Vista.LocateModel("chr569", 0, 0);
	this.Vista.LocateModel("chr053", 0, 0);
	this.Vista.LocateModel("chr055", 0, 0);
	this.Vista.LocateModel("chr081", 0, 0);
	this.Vista.LocateModel("chr081", 0, 0);
	this.Vista.LocateModel("EFF_EVE_COM_120_01", 0, 0);
	this.Vista.LocateModel("EFF_EVE_COM_120_02", 0, 0);
	this.Vista.PlayAnimation("pc021", "fn01", 0, true);
	this.Vista.PlayAnimation("mob027", "fw01", 0, true);
	this.Vista.PlayAnimation("mob031", "fn01", 0, true);
	this.Vista.PlayAnimation("chr389", "e570", 0, true);
	this.Vista.PlayAnimation("chr595", "e570", 0, true);
	this.Vista.PlayAnimation("chr303", "e570", 0, true);
	this.Vista.PlayAnimation("chr097", "bn01", 0, true);
	this.Vista.PlayAnimation("chr569", "bn01", 0, true);
	this.Vista.PlayAnimation("chr053", "bn01", 0, true);
	this.Vista.PlayAnimation("chr055", "bn01", 0, true);
	this.Vista.PlayAnimation("chr081", "bn01", 0, true);
	this.Vista.PlayAnimation("EFF_EVE_COM_120_01", "EFF_EVE_COM_120", 0, true);
	this.Vista.PlayAnimation("EFF_EVE_COM_120_02", "EFF_EVE_COM_120", 0, true);
	this.Vista.PlayAnimationSlotB("player", "f01_m01", true);
	this.Vista.SetOutlineModel("pc021", 1);
	this.Vista.SetOutlineModel("mob027", 1);
	this.Vista.SetOutlineModel("mob031", 1);
	this.Vista.SetOutlineModel("chr389", 1);
	this.Vista.SetOutlineModel("chr595", 1);
	this.Vista.SetOutlineModel("chr303", 1);
	this.Vista.SetOutlineModel("chr097", 1);
	this.Vista.SetOutlineModel("chr569", 1);
	this.Vista.SetOutlineModel("chr053", 1);
	this.Vista.SetOutlineModel("chr055", 1);
	this.Vista.SetOutlineModel("chr081", 1);
	this.Vista.Play();
	this.Vista.SetCameraAnimationTime(500, 620);
	this.Fade.In(0, 1.0);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.WaitFrame(0.5);
	this.Vista.LocateModel("pc021", 520, 538);
	this.Vista.PlayAnimation("pc021", "e102", 0.5, true);
	this.Vista.PlayAnimationSlotB("player", "f01_e01", true);
	this.WaitFrame(1.0);
	this.Vista.PlayAnimation("pc021", "e626", 0.5, true);
	this.Vista.PlayAnimationSlotB("player", "f01_m01", true);
	this.WaitFrame(2.5);
	this.Vista.LocateModel("pc021", 700, 700);
	this.Vista.LocateModel("mob027", 700, 700);
	this.Vista.PlayAnimation("pc021", "e102", 0, true);
	this.Vista.PlayAnimation("mob027", "fn06", 0, true);
	this.Vista.SetCameraAnimationTime(700, 820);
	this.WaitFrame(4);
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 2117, 1, 0);
	this.Talk.ShowModel(2, 2133, 1, 0);
	this.Talk.SetOutlineModel(1, 1);
	this.Talk.SetOutlineModel(2, 1);
	this.Talk.PlayAnimation(2, "fn02", 0, true);
	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.MovePosition(2, 2131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e504", 0.5, true);
	this.WaitFrame(1.0);
	this.MessageTalk(2);
	this.Talk.PlayAnimation(2, "fn03", 0.2, true);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.MessageTalk(3);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimationSlotB(1, "f09_m01", true);
	this.Talk.PlayAnimation(1, "e006", 0.2, true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(2, "fn11", 0.30000001, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(4);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "e009", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(2, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(5);
	this.Talk.PlayAnimation(2, "fn01_01", 0.5, true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.SetLastTalkerManageID(1);
	this.Talk.PlayAnimation(1, "e002", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "e002_end", 0.5, false);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
	this.MessageTalk(6);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.Talk.PlayAnimation(2, "fn11", 0.5, true);
	this.MessageTalk(7);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(1, "e114", 0.5, true);
	this.MessageTalk(8);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.SetLastTalkerManageID(1);
	this.Talk.PlayAnimation(1, "e002", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "e002_end", 0.5, false);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
	this.MessageTalk(9);
	this.Talk.PlayAnimation(1, "e001", 0.5, true);
	this.Talk.PlayAnimation(2, "ft01", 0.5, true);
	this.MessageTalk(10);
	this.MessageTalk(11);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.Talk.PlayAnimation(2, "fn11", 0.5, true);
	this.MessageTalk(12);
	this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
	this.MessageTalk(13);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(14);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(2, "fn02", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f01_e03", true);
	this.Talk.PlayAnimation(1, "e008", 0.5, true);
	this.MessageTalk(15);
	local digitalmonster_flag = 0;
	local digimoncaptcha_flag = 0;

	while (1)
	{
		this.MessageTalkSel(2, 16);
		result = this.Talk.GetResultSelectedNum();
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.SetLastTalkerManageID(1);
		this.Talk.PlayAnimation(1, "e002", 0.5, true);
		this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
		this.WaitFrame(1.2);
		this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
		this.Talk.PlayAnimation(1, "e002_end", 0.5, false);
		this.Talk.SetLastTalkerManageID(-1);

		if (result == 0)
		{
			this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
			this.MessageTalk(17);
			this.Talk.PlayAnimation(2, "ft01", 0.5, true);
			this.MessageTalk(18);
			this.MessageTalk(19);
			this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
			this.Talk.PlayAnimation(2, "fn11", 0.5, true);
			this.MessageTalk(20);
			this.MessageTalk(21);
			this.MessageTalk(22);
			this.MessageTalk(23);
			this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
			this.Talk.SetLastTalkerManageID(-1);
			digitalmonster_flag = 1;
		}
		else if (result == 1)
		{
			this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
			this.Talk.PlayAnimation(2, "ft01", 0.5, true);
			this.MessageTalk(24);
			this.MessageTalk(25);
			this.Talk.PlayAnimation(2, "fn11", 0.5, true);
			this.MessageTalk(26);
			this.MessageTalk(27);
			this.MessageTalk(28);
			this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
			this.Talk.PlayAnimation(2, "ft01", 0.5, true);
			this.MessageTalk(29);
			this.MessageTalk(30);
			this.MessageTalk(31);
			this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
			this.Talk.PlayAnimation(2, "fn11", 0.5, true);
			this.MessageTalk(32);
			this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
			this.Talk.SetLastTalkerManageID(-1);
			digimoncaptcha_flag = 1;
		}

		if (digitalmonster_flag == 1 && digimoncaptcha_flag == 1)
		{
			break;
		}
	}

	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.Talk.PlayAnimation(2, "fn03", 0.5, true);
	this.MessageTalk(33);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(1, "f01_e03", true);
	this.Talk.PlayAnimation(1, "e008", 0.30000001, true);
	this.MessageTalk(34);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
	this.Talk.PlayAnimation(1, "e009", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(35);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.SetLastTalkerManageID(1);
	this.Talk.PlayAnimation(1, "e002", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "e002_end", 0.5, false);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(2, "fn11", 0.5, true);
	this.Talk.PlayAnimationSlotB(2, "f02_m02", true);
	this.MessageTalk(36);
	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimationSlotB(1, "f06_m01", true);
	this.Talk.PlayAnimation(1, "e112", 0.30000001, true);
	this.WaitFrame(2.0);
	this.Talk.PlayAnimation(1, "e101", 0.30000001, true);
	this.Talk.PlayAnimationSlotB(1, "f13_m01", true);
	this.WaitFrame(1.5);
	this.Fade.Out(0, 0.30000001);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.Talk.Load("m51_d122_0901");
	this.Talk.LoadModel(1, "pc021", 1);
	this.Talk.LoadModel(2, "mob027", 2);
	this.Talk.LoadAnimation(1, "e001");
	this.Talk.LoadAnimation(1, "e002");
	this.Talk.LoadAnimation(1, "e002_end");
	this.Talk.LoadAnimation(1, "e006");
	this.Talk.LoadAnimation(1, "e008");
	this.Talk.LoadAnimation(1, "e009");
	this.Talk.LoadAnimation(1, "e010");
	this.Talk.LoadAnimation(2, "ft01");
	this.Talk.LoadAnimation(2, "fn01");
	this.Talk.LoadAnimation(2, "fn11");
	local result2;
	this.Talk.LoadCutinTexture("cutin_betamon");
	this.Talk.LoadCutinTexture("cutin_tentomon");
	this.Talk.LoadCutinTexture("cutin_gotsumon");
	this.WaitTalkLoadModel();
	this.WaitTalkLoadCutin();
	this.Vista.LocateModel("mob027", 0, 0);
	this.Vista.LocateModel("chr303", 300, 300);
	this.Vista.SetCameraAnimationTime(200, 260);
	this.Fade.In(0, 0.30000001);
	this.WaitFrame(2.5);
	this.Vista.SetCameraAnimationTime(300, 390);
	this.WaitFrame(3);
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 2113, 1, 0);
	this.Talk.ShowModel(2, 2133, 1, 0);
	this.Talk.SetOutlineModel(1, 1);
	this.Talk.SetOutlineModel(2, 1);
	this.Talk.PlayAnimation(2, "fn11", 0, true);
	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.MovePosition(2, 2131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.SetLastTalkerManageID(1);
	this.Talk.PlayAnimation(1, "e002", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "e002_end", 0.5, false);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
	this.MessageTalk(37);
	this.Talk.PlayAnimationSlotB(2, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(1, "f07_m01", true);
	this.MessageTalk(38);
	this.Talk.PlayAnimationSlotB(2, "f02_m02", true);
	this.Talk.PlayAnimation(2, "ft01", 0.30000001, true);
	this.MessageTalk(39);
	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.PlayAnimation(2, "fn11", 0.5, true);
	this.MessageTalk(40);
	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(1, "f01_e03", true);
	this.Talk.PlayAnimation(1, "e008", 0.5, true);
	this.MessageTalk(41);
	this.Flag.Clear(10500);
	this.Flag.Clear(10501);
	this.Flag.Clear(10502);

	while (1)
	{
		if (this.Flag.Check(10500))
		{
			break;
		}
		else if (this.Flag.Check(10501))
		{
			break;
		}
		else if (this.Flag.Check(10502))
		{
			break;
		}

		this.MessageTalkSel(3, 42);
		result = this.Talk.GetResultSelectedNum();
		this.MessageClose();

		if (result == DIGIMON_PLANT)
		{
			this.Talk.SetCutinTexture("cutin_betamon");
		}
		else if (result == DIGIMON_BEAST)
		{
			this.Talk.SetCutinTexture("cutin_tentomon");
		}
		else if (result == DIGIMON_STONE)
		{
			this.Talk.SetCutinTexture("cutin_gotsumon");
		}

		this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
		this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
		this.OpenCutin();
		this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
		this.MessageTalk(43);
		this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageTalkSel(2, 44);
		result2 = this.Talk.GetResultSelectedNum();
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();

		if (result2 == 0)
		{
			this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
			this.Talk.PlayAnimation(1, "e009", 0.5, true);

			if (result == DIGIMON_PLANT)
			{
				this.Flag.Set(10500);
			}
			else if (result == DIGIMON_BEAST)
			{
				this.Flag.Set(10501);
			}
			else if (result == DIGIMON_STONE)
			{
				this.Flag.Set(10502);
			}
		}
		else
		{
			this.Talk.PlayAnimation(1, "e010", 0.5, true);
			this.WaitFrame(1.0);
			this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
			this.MessageTalk(45);
			this.Talk.PlayAnimationSlotB(2, "f03_m01", true);
			this.Talk.SetLastTalkerManageID(-1);
			this.Talk.PlayAnimationSlotB(1, "f01_e03", true);
			this.Talk.PlayAnimation(1, "e008", 0.5, true);
		}

		this.CloseCutin();
	}

	this.WaitFrame(1.5);
	this.Fade.Out(0, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.VistaExit();
	this.WaitFrame(0.1);
}

function m51_d122_1001()
{
	local DIGIMON_PLANT = 0;
	local DIGIMON_BEAST = 1;
	local DIGIMON_STONE = 2;
	local select_digimon = 0;

	if (this.Flag.Check(10500))
	{
		select_digimon = DIGIMON_PLANT;
	}
	else if (this.Flag.Check(10501))
	{
		select_digimon = DIGIMON_BEAST;
	}
	else if (this.Flag.Check(10502))
	{
		select_digimon = DIGIMON_STONE;
	}

	this.Talk.Load("m51_d122_1001");
	this.Talk.LoadModel(1, "pc021", 1);
	this.Talk.LoadModel(2, "mob027", 2);
	this.Talk.LoadModel(6, "chr394", 3);
	this.Talk.LoadModel(7, "chr093", 4);

	if (select_digimon == DIGIMON_PLANT)
	{
		this.Talk.LoadModel(5, "chr389", 4);
	}
	else if (select_digimon == DIGIMON_BEAST)
	{
		this.Talk.LoadModel(5, "chr303", 4);
	}
	else
	{
		this.Talk.LoadModel(5, "chr595", 4);
	}

	if (this.Flag.Check(10500))
	{
		this.Talk.LoadModel(8, "chr303", 2);
		this.Talk.LoadModel(9, "chr595", 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.LoadModel(8, "chr389", 2);
		this.Talk.LoadModel(9, "chr595", 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.LoadModel(8, "chr389", 2);
		this.Talk.LoadModel(9, "chr303", 1);
	}

	this.Talk.LoadAnimation(1, "e001");
	this.Talk.LoadAnimation(1, "e010");
	this.Talk.LoadAnimation(1, "e011");
	this.Talk.LoadAnimation(1, "e012");
	this.Talk.LoadAnimation(1, "e110");
	this.Talk.LoadAnimation(2, "ft01");
	this.Talk.LoadAnimation(2, "fn01");
	this.Talk.LoadAnimation(2, "fn09");
	this.Talk.LoadAnimation(2, "fn10");
	this.Talk.LoadAnimation(5, "br01");
	this.WaitTalkLoadModel();
	this.Vista.Start();
	this.Vista.LoadBackGround("d12201f");
	this.Vista.LoadCameraAnimation("m51_d122_1001_evt_Camera");
	this.Vista.LoadLocater("m51_d122_1001_evt");
	this.Vista.SetLight("m51_d122_1001_evt_Light");
	this.WaitVistaLoad();
	this.Vista.LocateModel("pc021", 0, 0);
	this.Vista.LocateModel("chr389", 0, 45);
	this.Vista.LocateModel("chr303", 0, 45);
	this.Vista.LocateModel("chr595", 0, 45);
	this.Vista.PlayAnimation("pc021", "e121", 0, true);
	this.Vista.PlayAnimation("chr389", "br01", 0, true);
	this.Vista.PlayAnimation("chr303", "br01", 0, true);
	this.Vista.PlayAnimation("chr595", "br01", 0, true);
	this.Vista.StartFrameModel("chr389", "br01", 10);
	this.Vista.SetModelVisible("chr389", false, 0);
	this.Vista.SetModelVisible("chr303", false, 0);
	this.Vista.SetModelVisible("chr595", false, 0);
	this.Vista.SetOutlineModel("pc021", 1);
	this.Vista.SetOutlineModel("chr389", 1);
	this.Vista.SetOutlineModel("chr303", 1);
	this.Vista.SetOutlineModel("chr595", 1);

	if (this.Flag.Check(10500))
	{
		this.Vista.SetModelVisible("chr389", true, 0);
	}
	else if (this.Flag.Check(10501))
	{
		this.Vista.SetModelVisible("chr303", true, 0);
	}
	else if (this.Flag.Check(10502))
	{
		this.Vista.SetModelVisible("chr595", true, 0);
	}

	this.Vista.Play();
	this.Vista.SetCameraAnimationTime(0, 60);
	this.Fade.In(0, 0.5);
	this.WaitFrame(1.2);
	this.Vista.PlayAnimation("chr389", "bn01", 0.5, true);
	this.Vista.PlayAnimation("chr303", "bn01", 0.5, true);
	this.Vista.PlayAnimation("chr595", "bn01", 0.5, true);
	this.WaitFrame(1.5);
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 2113, 1, 0);
	this.Talk.ShowModel(2, 2133, 1, 0);
	this.Talk.ShowModel(3, 4113, 1, 0);
	this.Talk.ShowModel(4, 4133, 1, 0);

	if (this.Flag.Check(10500))
	{
		this.Talk.ShowModel(5, 4133, 1, 0);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.ShowModel(5, 7038, 1, 0);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.ShowModel(5, 4133, 1, 0);
	}

	this.Talk.SetOutlineModel(1, 1);
	this.Talk.SetOutlineModel(2, 1);
	this.Talk.SetOutlineModel(3, 1);
	this.Talk.SetOutlineModel(4, 1);
	this.Talk.SetOutlineModel(5, 1);
	this.Talk.SetOutlineModel(6, 1);
	this.Talk.SetOutlineModel(7, 1);
	this.Talk.SetOutlineModel(8, 1);
	this.Talk.SetOutlineModel(9, 1);
	this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
	this.Talk.MovePosition(1, 2111, 1.0, 1);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(5, 4130, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(5, 7035, 1.0, 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(5, 4130, 1.0, 1);
	}

	this.WaitFrame(1.5);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(5, 4170, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(5, 7042, 1.0, 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(5, 4171, 1.0, 1);
	}

	this.WaitFrame(1.0);
	this.Talk.MovePosition(1, 2110, 1.0, 1);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(5, 4114, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(5, 7052, 1.0, 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(5, 4114, 1.0, 1);
	}

	this.WaitFrame(0.5);

	if (this.Flag.Check(10500))
	{
		this.Talk.ShowModel(8, 7049, 1, 0);
		this.Talk.ShowModel(9, 4133, 1, 0);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.ShowModel(8, 8111, 1, 0);
		this.Talk.ShowModel(9, 4133, 1, 0);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.ShowModel(8, 8111, 1, 0);
		this.Talk.ShowModel(9, 7038, 1, 0);
	}

	this.Talk.PlayAnimation(8, "e570", 0, true);
	this.Talk.PlayAnimation(9, "e570", 0, true);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(8, 7043, 1.0, 1);
		this.Talk.MovePosition(9, 4132, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(8, 8110, 1.0, 1);
		this.Talk.MovePosition(9, 4132, 1.0, 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(8, 8110, 1.0, 1);
		this.Talk.MovePosition(9, 7037, 1.0, 1);
	}

	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.MessageTalk(1);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimationSlotB(1, "f04_e03", true);
	this.Talk.PlayAnimation(1, "e011", 0.5, true);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimationSlotB(1, "f04_m01", true);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(8, 7049, 1.5, 1);
		this.Talk.MovePosition(9, 4133, 1.5, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(8, 8111, 1.5, 0);
		this.Talk.MovePosition(9, 4133, 1.5, 0);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(8, 8111, 1.5, 0);
		this.Talk.MovePosition(9, 7038, 1.5, 0);
	}

	this.Talk.HideModel(8, 2, 0.5);
	this.Talk.HideModel(9, 2, 0.5);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(2, 2131, 1.0, 1);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.Talk.PlayAnimation(2, "ft01", 0.5, true);
	this.MessageTalk(2);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(2, "fn01", 0.5, true);
	this.Talk.MovePosition(1, 2111, 1.0, 1);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(5, 4113, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(5, 7053, 1.0, 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(5, 4113, 1.0, 1);
	}

	this.Talk.HideModel(5, 2, 0.5);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(1, "f04_e03", true);
	this.Talk.PlayAnimation(1, "e010", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
	this.MessageTalk(3);
	this.Talk.PlayAnimationSlotB(2, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(1);
	this.Talk.PlayAnimationSlotB(1, "f04_m01", true);
	this.MessageTalk(4);
	this.MessageTalkSel(2, 5);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e110", 0.30000001, true);
	this.Talk.PlayAnimationSlotB(1, "f05_m02", true);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimationSlotB(1, "f04_m01", true);
	this.Talk.PlayAnimation(1, "fn01", 0.5, true);
	this.Talk.SetLastTalkerManageID(-1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(2, "fn10", 0.30000001, true);
	this.Talk.PlayAnimationSlotB(2, "f02_m02", true);
	this.MessageTalk(6);
	this.MessageTalk(7);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.Talk.PlayAnimation(2, "fn09", 0.30000001, true);
	this.MessageTalk(8);
	this.MessageTalk(9);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageTalkSel(2, 10);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.SetLastTalkerManageID(1);
	this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
	this.Talk.PlayAnimation(1, "e012", 0.5, true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "e001", 0.5, true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(2, "fn10", 0.2, true);
	this.Talk.PlayAnimationSlotB(2, "f02_m02", true);
	this.MessageTalk(11);
	this.MessageTalk(12);
	this.MessageTalk(13);
	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Sound.StopBGM(0.2);
	this.Sound.PlaySE("ev_062", false);
	this.Talk.ShowModel(6, 2130, 2, 0.5);
	this.Talk.ShowModel(7, 4137, 2, 0.5);
	this.Talk.MovePosition(2, 4131, 1.0, 1);
	this.Talk.MovePosition(1, 4110, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(1, "e006", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f07_m01", true);
	this.Sound.PlayBGM("M109", 0);
	this.WaitFrame(1.0);
	this.MessageTalk(14);
	this.Talk.PlayAnimationSlotB(2, "f02_m02", true);
	this.MessageTalk(15);
	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(1, "f06_m01", true);
	this.MessageTalk(16);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Fade.Out(0, 0.30000001);
	this.WaitFrame(0.30000001);
	this.TalkExit();
	this.VistaExit();
	this.WaitFrame(0.1);
	this.Talk.Load("m51_d122_1001");
	this.Talk.LoadModel(1, "pc021", 2);
	this.Talk.LoadModel(2, "mob027", 3);
	this.Talk.LoadModel(3, "npc026", 4);

	if (select_digimon == DIGIMON_PLANT)
	{
		this.Talk.LoadModel(5, "chr389", 1);
	}
	else if (select_digimon == DIGIMON_BEAST)
	{
		this.Talk.LoadModel(5, "chr303", 1);
	}
	else
	{
		this.Talk.LoadModel(5, "chr595", 1);
	}

	this.Talk.LoadAnimation(1, "e001");
	this.Talk.LoadAnimation(1, "e005");
	this.Talk.LoadAnimation(1, "e006");
	this.Talk.LoadAnimation(1, "e007");
	this.Talk.LoadAnimation(1, "e009");
	this.Talk.LoadAnimation(1, "e114");
	this.Talk.LoadAnimation(1, "e124");
	this.Talk.LoadAnimation(2, "ft01");
	this.Talk.LoadAnimation(2, "fn03");
	this.Talk.LoadAnimation(2, "fn09");
	this.Talk.LoadAnimation(3, "e001");
	this.Talk.LoadAnimation(3, "e002");
	this.Talk.LoadAnimation(3, "e002_end");
	this.Talk.LoadAnimation(3, "e003");
	this.Talk.LoadAnimation(3, "e003_end");
	this.Talk.LoadAnimation(3, "e007");
	this.Talk.LoadAnimation(3, "e008");
	this.Talk.LoadAnimation(3, "e506");
	this.Talk.LoadAnimation(3, "e621");
	this.Talk.LoadAnimation(3, "bn01");
	this.Talk.LoadAnimation(3, "br01");
	this.WaitTalkLoadModel();
	this.Talk.LoadEffect(1, "EFF_EVE_COM_105_B");
	this.WaitTalkLoadEffect();
	this.Vista.Start();
	this.Vista.LoadBackGround("d12201f");
	this.Vista.LoadCameraAnimation("m51_d122_1001_2_evt_Camera");
	this.Vista.LoadLocater("m51_d122_1001_2_evt");
	this.Vista.SetLight("m51_d122_1001_2_evt_Light");
	this.WaitVistaLoad();
	this.Vista.LocateModel("pc021", 0, 0);
	this.Vista.LocateModel("npc026", 0, 0);
	this.Vista.LocateModel("chr394", 0, 0);
	this.Vista.LocateModel("chr093", 0, 0);
	this.Vista.LocateModel("chr719", 0, 0);
	this.Vista.LocateModel("mob027", 0, 0);
	this.Vista.PlayAnimation("pc021", "e006", 0, true);
	this.Vista.PlayAnimation("npc026", "e003", 0, true);
	this.Vista.PlayAnimation("chr394", "bn01", 0, true);
	this.Vista.PlayAnimation("chr093", "bn01", 0, true);
	this.Vista.PlayAnimation("chr719", "bn01", 0, true);
	this.Vista.PlayAnimation("mob027", "fn09", 0, true);
	this.Vista.SetOutlineModel("pc021", 1);
	this.Vista.SetOutlineModel("npc026", 1);
	this.Vista.SetOutlineModel("chr394", 1);
	this.Vista.SetOutlineModel("chr093", 1);
	this.Vista.SetOutlineModel("chr719", 1);
	this.Vista.SetOutlineModel("mob027", 1);
	this.Vista.SetFPS(30);
	this.Vista.Play();
	this.Vista.SetCameraAnimationTime(0, 0);
	this.Movie.Start();
	this.Movie.Play("S63", "subtitle_m51_d122_1001_01");
	this.Sound.PlaySE("ev_437", false);
	this.Fade.In(0, 0.30000001);
	this.WaitFrame(5.0);
	this.Sound.StopBGM(0.2);
	this.WaitFrame(3.3);
	this.Sound.StopSE("ev_437", 0.5);
	this.WaitFrame(1.0);
	this.Sound.PlayBGM("M108", 0);
	this.MovieIsPlay();
	this.Movie.End();
	this.Vista.SetCameraAnimationTime(0, 90);
	this.WaitFrame(2.9000001);
	this.Vista.SetFPS(60);
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 4113, 1, 0);
	this.Talk.ShowModel(2, 4133, 1, 0);
	this.Talk.ShowModel(3, 4113, 1, 0);
	this.Talk.ShowModel(4, 4133, 1, 0);
	this.Talk.SetOutlineModel(1, 1);
	this.Talk.SetOutlineModel(2, 1);
	this.Talk.SetOutlineModel(3, 1);
	this.Talk.SetOutlineModel(4, 1);
	this.Talk.PlayAnimationSlotB(1, "f07_m01", true);
	this.Talk.PlayAnimation(1, "e006", 0, true);
	this.Talk.MovePosition(1, 4116, 1.0, 1);
	this.Talk.PlayAnimation(3, "e003", 0.5, true);
	this.Talk.MovePosition(3, 4114, 1.0, 1);
	this.Talk.PlayAnimationSlotB(2, "f03_m01", true);
	this.Talk.PlayAnimation(2, "fn09", 0.5, true);
	this.Talk.MovePosition(2, 4130, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(19);
	this.MessageClose();
	this.MessageTalk(20);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
	this.Talk.PlayAnimation(2, "fn03", 0.5, true);
	this.MessageTalk(21);
	this.Talk.PlayAnimationSlotB(2, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(1, "e005", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f08_m01", true);
	this.Talk.PlayAnimation(3, "e008", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(22);
	this.Talk.PlayAnimationSlotB(3, "f01_e03", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.WaitFrame(1.5);
	this.Talk.PlayAnimation(3, "e621", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(23);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.Talk.PlayAnimation(2, "fn09", 0.30000001, true);
	this.MessageTalk(24);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.PlayAnimation(3, "e621_end", 0.30000001, false);
	this.Talk.MovePosition(3, 2131, 1.0, 1);
	this.Talk.MovePosition(2, 4133, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(3, "e506", 0.5, true);
	this.WaitFrame(0.30000001);
	this.Talk.ShowEffect(1, 0.40000001, -1.38, -5, 1, 0);
	this.Sound.PlaySE("ev_119", true);
	this.WaitFrame(2.0);
	this.Sound.PlaySE("ev_065", false);
	this.WaitFrame(1.0);
	this.Sound.StopSE("ev_119", 0.2);
	this.Talk.HideEffect(1);
	this.Talk.PlayAnimation(3, "fn01", 0.5, true);
	this.Talk.PlayAnimation(1, "e008", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f06_m01", true);
	this.MessageTalk(25);
	this.Talk.PlayAnimation(3, "e002", 0.5, true);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(26);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.PlayAnimation(3, "e003", 0.5, true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(27);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.PlayAnimation(1, "e006", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f07_m01", true);
	this.MessageTalk(28);
	this.Talk.PlayAnimation(3, "e003_end", 0.5, false);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(29);
	this.Talk.PlayAnimation(3, "e621", 0.5, true);
	this.MessageTalk(30);
	this.MessageTalk(31);
	this.MessageTalk(32);
	this.MessageTalk(33);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.PlayAnimation(3, "e003", 0.5, true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(34);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.PlayAnimationSlotB(1, "f08_m01", true);
	this.Talk.PlayAnimation(1, "e001", 0.5, true);
	this.MessageTalk(35);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(36);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.PlayAnimationSlotB(1, "f08_e03", true);
	this.Talk.PlayAnimation(1, "e005", 0.5, true);
	this.MessageTalk(37);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(1, "f04_m01", true);
	this.Talk.PlayAnimation(1, "fn01", 0.30000001, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(1, "e009", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(38);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();

	if (this.Flag.Check(10500))
	{
		this.Talk.ShowModel(5, 4113, 1, 0);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.ShowModel(5, 7053, 1, 0);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.ShowModel(5, 4113, 1, 0);
	}

	this.Talk.SetOutlineModel(5, 1);
	this.Talk.MovePosition(1, 4156, 1.0, 1);
	this.Talk.MovePosition(3, 4130, 1.0, 1);
	this.Talk.PlayAnimation(5, "br01", 0.5, true);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(5, 4116, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(5, 7054, 1.0, 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(5, 4116, 1.0, 1);
	}

	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(5, "bn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "e114", 0.40000001, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(39);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.PlayAnimation(1, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
	this.Talk.PlayAnimation(3, "e008", 0.5, true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(40);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(3, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(41);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(1, 4110, 1.0, 1);
	this.Talk.MovePosition(3, 4117, 1.0, 1);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(5, 4112, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(5, 4112, 1.0, 1);
	}

	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.MovePosition(2, 4136, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(3, "e621", 0.40000001, true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.MessageTalk(42);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(43);
	this.Talk.PlayAnimationSlotB(1, "f04_m01", true);
	this.Talk.PlayAnimation(1, "e007", 0.30000001, true);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(44);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Fade.Out(1, 0.2);
	this.Sound.PlaySE("fe_028", false);
	this.WaitFrame(0.2);
	this.TalkExit();
	this.VistaExit();
	this.WaitFrame(0.1);
}

function m51_d122_1101()
{
	local DIGIMON_PLANT = 0;
	local DIGIMON_BEAST = 1;
	local DIGIMON_STONE = 2;
	this.Sound.PlayBGM("M22", 0);
	local select_digimon = 0;

	if (this.Flag.Check(10500))
	{
		select_digimon = DIGIMON_PLANT;
	}
	else if (this.Flag.Check(10501))
	{
		select_digimon = DIGIMON_BEAST;
	}
	else if (this.Flag.Check(10502))
	{
		select_digimon = DIGIMON_STONE;
	}

	this.Talk.Load("m51_d122_1101");
	this.Talk.LoadModel(1, "pc021", 2);
	this.Talk.LoadModel(2, "mob027", 2);
	this.Talk.LoadModel(3, "npc026", 3);
	this.Talk.LoadModel(5, "mob026", 3);

	if (select_digimon == DIGIMON_PLANT)
	{
		this.Talk.LoadModel(4, "chr389", 1);
	}
	else if (select_digimon == DIGIMON_BEAST)
	{
		this.Talk.LoadModel(4, "chr303", 1);
	}
	else
	{
		this.Talk.LoadModel(4, "chr595", 1);
	}

	this.Talk.LoadAnimation(1, "e001");
	this.Talk.LoadAnimation(1, "e004");
	this.Talk.LoadAnimation(1, "e009");
	this.Talk.LoadAnimation(2, "fn01");
	this.Talk.LoadAnimation(2, "fn03");
	this.Talk.LoadAnimation(2, "fn09");
	this.Talk.LoadAnimation(3, "fw01");
	this.Talk.LoadAnimation(3, "e001");
	this.Talk.LoadAnimation(3, "e002");
	this.Talk.LoadAnimation(3, "e003");
	this.Talk.LoadAnimation(3, "e102");
	this.Talk.LoadAnimation(3, "e621");
	this.Talk.LoadAnimation(3, "e622");
	this.Talk.LoadAnimation(5, "fw01");
	this.Talk.LoadAnimation(5, "fn01");
	this.Talk.LoadAnimation(5, "ft01");
	this.Talk.LoadAnimation(4, "bn01");
	this.Talk.LoadAnimation(4, "bv01");
	this.Talk.LoadModelTexture(5, "c");
	this.WaitTalkLoadModel();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 4113, 1, 0);
	this.Talk.ShowModel(2, 4133, 1, 0);
	this.Talk.ShowModel(3, 4113, 1, 0);
	this.Talk.ShowModel(5, 2133, 1, 0);

	if (this.Flag.Check(10500))
	{
		this.Talk.ShowModel(4, 4113, 1, 0);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.ShowModel(4, 7053, 1, 0);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.ShowModel(4, 4113, 1, 0);
	}

	this.Talk.SetOutlineModel(1, 1);
	this.Talk.SetOutlineModel(2, 1);
	this.Talk.SetOutlineModel(3, 1);
	this.Talk.SetOutlineModel(4, 1);
	this.Talk.SetOutlineModel(5, 1);
	this.Talk.ChangeTextureModel(5, "c");
	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.MovePosition(2, 4136, 1.0, 1);
	this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
	this.Talk.MovePosition(1, 4110, 1.0, 1);
	this.Talk.PlayAnimation(4, "bn01", 0, true);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(4, 4112, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(4, 7054, 1.0, 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(4, 4112, 1.0, 1);
	}

	this.Talk.MovePosition(3, 4117, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(3, "e003", 0.30000001, true);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(1);
	this.MessageTalk(2);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.PlayAnimationSlotB(1, "f03_m01", true);
	this.MessageTalk(4);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e004", 0.5, true);
	this.Talk.PlayAnimation(4, "bv01", 0.5, false);
	this.WaitFrame(1.7);
	this.Talk.PlayAnimationSlotB(2, "f02_m02", true);
	this.Talk.PlayAnimation(2, "fn03", 0.5, true);
	this.MessageTalk(5);
	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(1, 4113, 1.0, 1);

	if (this.Flag.Check(10500))
	{
		this.Talk.MovePosition(4, 4113, 1.0, 1);
	}
	else if (this.Flag.Check(10501))
	{
		this.Talk.MovePosition(4, 7053, 1.0, 1);
	}
	else if (this.Flag.Check(10502))
	{
		this.Talk.MovePosition(4, 4113, 1.0, 1);
	}

	this.Talk.HideModel(4, 2, 0.5);
	this.Talk.MovePosition(3, 4116, 1.0, 1);
	this.Talk.MovePosition(5, 4132, 1.5, 1);
	this.Talk.PlayAnimation(5, "fw01", 0, true);
	this.WaitFrame(0.30000001);
	this.Talk.PlayAnimation(5, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(5, "f03_m02", true);
	this.Talk.PlayAnimation(2, "fn01", 0.5, true);
	this.Talk.MovePosition(2, 4174, 0.5, 1);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "e001", 0.5, true);
	this.MessageTalk(6);
	this.Talk.PlayAnimationSlotB(5, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(2, "fn09", 0.2, true);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.MessageTalk(7);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.MovePosition(2, 4132, 1.0, 1);
	this.Talk.MovePosition(5, 4131, 1.0, 1);
	this.Talk.SetPriority(2, 3);
	this.Talk.SetPriority(5, 2);
	this.Talk.PlayAnimation(5, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(5, "f03_m02", true);
	this.MessageTalk(8);
	this.MessageTalk(9);
	this.Talk.PlayAnimationSlotB(5, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(5, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(5, "f02_m01", true);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(10);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.MessageTalk(11);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.MovePosition(3, 2131, 1.0, 1);
	this.Talk.MovePosition(2, 4133, 1.0, 1);
	this.Talk.MovePosition(5, 4133, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(12);
	this.Talk.PlayAnimation(3, "e002", 0.5, true);
	this.MessageTalk(13);
	this.MessageTalk(14);
	this.Talk.PlayAnimation(3, "e621", 0.5, true);
	this.MessageTalk(15);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e009", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.PlayAnimation(3, "e622", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(16);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(1, 4112, 1.0, 1);
	this.Talk.MovePosition(3, 4111, 1.0, 1);
	this.Talk.MovePosition(2, 4132, 1.0, 1);
	this.Talk.MovePosition(5, 4131, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(3, "e621_end", 0.30000001, false);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(17);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.WaitFrame(0.5);
	this.Talk.MovePosition(2, 4133, 1.0, 1);
	this.Talk.MovePosition(5, 4133, 1.0, 1);
	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.MovePosition(3, 2135, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.HideModel(2, 2, 0.5);
	this.Talk.HideModel(5, 2, 0.5);
	this.Talk.SetPriority(3, 1);
	this.Talk.MovePosition(3, 2131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(3, "fw01", 0.5, true);
	this.Talk.MovePosition(3, 2116, 4.0, 1);
	this.Sound.PlaySE("ev_056", false);
	this.WaitFrame(0.2);
	this.Talk.MovePosition(1, 2115, 1.0, 1);
	this.WaitFrame(2.0);
	this.Talk.PlayAnimation(3, "e001", 0, true);
	this.Talk.MovePosition(3, 2114, 1.0, 1);
	this.Talk.MovePosition(1, 2131, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(3, "e102", 0.5, true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(3, "f01_m02", true);
	this.MessageTalk(18);
	this.Talk.PlayAnimationSlotB(3, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(3, "fw01", 0.30000001, true);
	this.Talk.MovePosition(3, 2116, 4.0, 1);
	this.WaitFrame(0.30000001);
	this.Talk.HideModel(3, 2, 0.5);
	this.Talk.PlayAnimationSlotB(1, "f07_m01", true);
	this.MessageTalk(19);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(1, "fr01", 0.5, true);
	this.Talk.MovePosition(1, 2116, 2.0, 1);
	this.Sound.PlaySE("ev_057", false);
	this.WaitFrame(0.5);
	this.Talk.HideModel(1, 2, 0.5);
	this.Sound.StopBGM(2.5);
	this.Fade.Out(0, 1.0);
	this.WaitFrame(2.5);
	this.TalkExit();
	this.WaitFrame(0.1);
}

function m53_t21_0701()
{
	this.HM_Play_BGM(this.Work.Get(40), 0.0);
	this.Talk.Load("m53_t21_0701");
	this.Talk.LoadModel(1, this.Common.GetPlayerModelName(), 1);
	this.Talk.LoadModel(2, "npc026", 2);
	this.Talk.LoadAnimation(1, "fn01");
	this.Talk.LoadAnimation(2, "fn01");
	this.Talk.LoadCommunication(3027, 6000);
	this.Talk.LoadCommunication_Ani("e003");
	this.WaitTalkLoadModel();
	this.WaitTalkLoadModelCommunication();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 2113, 1, 0);
	this.Talk.ShowModel(2, 2133, 1, 0);

	if (this.Flag.Check(19271))
	{
		this.Talk.SetOutlineModel(1, 1);
		this.Talk.SetOutlineModel(2, 1);
	}
	else
	{
	}

	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.MovePosition(2, 2131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(2, "e008", 0.2, true);
	this.Talk.PlayAnimationSlotB(2, "f01_e03", true);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(1, "e111", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f08_e03", true);
	this.MessageTalk(2);
	this.Talk.PlayAnimation(2, "e621", 0.5, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(3);
	this.MessageTalk(4);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(1, 4116, 1.0, 1);
	this.Talk.MovePosition(2, 4136, 1.0, 1);
	this.Talk.PlayAnimation(1, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(2, "e621_end", 0.30000001, false);
	this.ShowCommunication("e003");
	this.WaitFrame(0.5);
	this.Talk.PlayCommunication_AniSlotB("f01_m02", true);
	this.MessageTalk(5);
	this.Talk.PlayCommunication_AniSlotB("f01_m01", true);
	this.Talk.PlayAnimation(2, "e003", 0.30000001, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(6);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.PlayCommunication_Ani("e008", 0.30000001, true);
	this.Talk.PlayCommunication_AniSlotB("f02_m02", true);
	this.MessageTalk(7);
	this.Talk.PlayCommunication_Ani("e002", 0.5, true);
	this.MessageTalk(8);
	this.MessageTalk(9);
	this.Talk.PlayCommunication_Ani("e002_end", 0.5, false);
	this.Talk.PlayCommunication_AniSlotB("f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(1, "e008", 0.5, true);
	this.MessageTalk(10);
	this.Talk.PlayCommunication_Ani("e003", 0.5, true);
	this.Talk.PlayCommunication_AniSlotB("f02_m02", true);
	this.MessageTalk(11);
	this.Talk.PlayCommunication_AniSlotB("f03_m02", true);
	this.MessageTalk(12);
	this.Talk.PlayCommunication_AniSlotB("f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e003", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f06_m01", true);
	this.WaitFrame(1.5);
	this.CommunicationClose();
	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.MovePosition(2, 2131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(2, "e008", 0.5, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(13);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(1, "e114", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.MessageTalk(14);
	this.Talk.PlayAnimation(2, "e003", 0.5, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(15);
	this.MessageTalk(16);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.LoadCommunication(3029, 8131);
	this.Talk.LoadCommunication_Ani("e583");
	this.WaitTalkLoadModelCommunication();
	this.Talk.MovePosition(1, 4116, 1.0, 1);
	this.Talk.MovePosition(2, 4136, 1.0, 1);
	this.Talk.PlayAnimation(1, "fn01", 0.5, true);
	this.ShowCommunication("e583");
	this.Sound.PlaySE("ev_169", true);
	this.WaitFrame(0.5);
	this.Talk.PlayCommunication_AniSlotB("f01_m02", true);
	this.MessageTalk(17);
	this.Talk.PlayCommunication_AniSlotB("f01_m01", true);
	this.MessageClose();
	this.INFO_WINDOW(7201);
	this.Sound.StopSE("ev_169", 0.1);
	this.CommunicationClose();
	this.WaitFrame(0.5);
	this.Talk.LoadCommunication(3027, 6000);
	this.WaitTalkLoadModelCommunication();
	this.ShowCommunication("e001");
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(18);
	this.Talk.PlayAnimation(2, "e002", 0.30000001, true);
	this.MessageTalk(19);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(2, "e002_end", 0.5, false);
	this.Talk.PlayCommunication_Ani("e003", 0.2, true);
	this.Talk.PlayCommunication_AniSlotB("f01_m02", true);
	this.MessageTalk(20);
	this.MessageClose();
	this.CommunicationClose();
	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.MovePosition(2, 2131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(2, "e621", 0.30000001, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(23);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.MessageClose();
	this.Talk.MovePosition(1, 2113, 1.5, 1);
	this.Talk.MovePosition(2, 2133, 1.5, 1);
	this.Talk.HideModel(1, 2, 0.5);
	this.Talk.HideModel(2, 2, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.WaitFrame(0.1);
}

function s504_d122_0101()
{
	local ID_PLAYER = 1;
	local ID_SHOP = 2;
	local ID_KOTARO = 3;
	local ID_HACKER = 4;
	local ID_GOMAMON = 5;
	this.HM_Play_BGM(this.Work.Get(40), 0.0);
	this.Talk.Load("s504_d122_0101");
	this.Talk.LoadModel(ID_PLAYER, this.Common.GetPlayerModelName(), 1);
	this.Talk.LoadModel(ID_SHOP, "mob027", 2);
	this.Talk.LoadModel(ID_KOTARO, "mob040", 2);
	this.Talk.LoadModel(ID_HACKER, "mob031", 3);
	this.Talk.LoadModel(ID_GOMAMON, "chr343", 1);
	this.Talk.LoadAnimation(ID_PLAYER, "f01_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "fw01");
	this.Talk.LoadAnimation(ID_PLAYER, "fn01");
	this.Talk.LoadAnimation(ID_PLAYER, "e114");
	this.Talk.LoadAnimation(ID_SHOP, "f01_m01");
	this.Talk.LoadAnimation(ID_SHOP, "f03_m01");
	this.Talk.LoadAnimation(ID_SHOP, "fn01");
	this.Talk.LoadAnimation(ID_SHOP, "fn02");
	this.Talk.LoadAnimation(ID_SHOP, "fn03");
	this.Talk.LoadAnimation(ID_SHOP, "ft01");
	this.Talk.LoadAnimation(ID_KOTARO, "f03_m01");
	this.Talk.LoadAnimation(ID_KOTARO, "fw01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn02");
	this.Talk.LoadAnimation(ID_HACKER, "f01_m01");
	this.Talk.LoadAnimation(ID_HACKER, "fn01");
	this.Talk.LoadAnimation(ID_GOMAMON, "bn01");
	this.Talk.LoadAnimation(ID_GOMAMON, "bv01");
	this.WaitTalkLoadModel();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(ID_PLAYER, 4612, 1, 0);
	this.Talk.ShowModel(ID_SHOP, 4133, 1, 0);
	this.Talk.ShowModel(ID_KOTARO, 4113, 1, 0);
	this.Talk.ShowModel(ID_HACKER, 4113, 1, 0);
	this.Talk.ShowModel(ID_GOMAMON, 7038, 1, 0);
	this.Talk.SetOutlineModel(ID_PLAYER, 1);
	this.Talk.SetOutlineModel(ID_SHOP, 1);
	this.Talk.SetOutlineModel(ID_KOTARO, 1);
	this.Talk.SetOutlineModel(ID_HACKER, 1);
	this.Talk.SetOutlineModel(ID_GOMAMON, 1);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
	this.Talk.PlayAnimation(ID_SHOP, "ft01", 0, true);
	this.Talk.MovePosition(ID_SHOP, 4130, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_HACKER, "f01_m01", true);
	this.Talk.MovePosition(ID_HACKER, 4114, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.PlayAnimation(ID_KOTARO, "fn02", 0, true);
	this.Talk.MovePosition(ID_KOTARO, 4116, 1.0, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_PLAYER, "fw01", 0.5, true);
	this.Talk.MovePosition(ID_PLAYER, 4112, 2.0, 1);
	this.Talk.MovePosition(ID_HACKER, 4117, 1.0, 1);
	this.Talk.MovePosition(ID_KOTARO, 4111, 1.0, 1);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimation(ID_PLAYER, "fn01", 0.5, true);
	this.Sound.StopSE("ev_056", 0.5);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_SHOP, "fn02", 0.5, true);
	this.Talk.MovePosition(ID_SHOP, 4171, 0.5, 1);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(ID_SHOP, 4176, 1.0, 1);
	this.Talk.MovePosition(ID_PLAYER, 4113, 1.0, 1);
	this.Talk.MovePosition(ID_KOTARO, 4112, 1.0, 1);
	this.Talk.MovePosition(ID_HACKER, 4111, 1.0, 1);
	this.Talk.MovePosition(ID_GOMAMON, 7037, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_GOMAMON, "bv01", 0.5, false);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f03_m02", true);
	this.Talk.PlayAnimation(ID_SHOP, "fn03", 0.2, true);
	this.MessageTalk(2);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(ID_GOMAMON, 7038, 1.0, 1);
	this.Talk.HideModel(ID_GOMAMON, 2, 0.5);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(ID_SHOP, "fn01", 0.5, true);
	this.Talk.MovePosition(ID_SHOP, 4130, 1.0, 1);
	this.Talk.MovePosition(ID_KOTARO, 4111, 1.0, 1);
	this.Talk.MovePosition(ID_HACKER, 4117, 1.0, 1);
	this.Talk.MovePosition(ID_PLAYER, 4112, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_SHOP, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m02", true);
	this.MessageTalk(3);
	this.Talk.PlayAnimation(ID_SHOP, "fn02", 0.5, true);
	this.MessageTalk(4);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.40000001, true);
	this.MessageTalk(5);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(ID_KOTARO, 4154, 0.5, 1);
	this.WaitFrame(0.30000001);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(ID_KOTARO, "fw01", 0.5, true);
	this.Talk.MovePosition(ID_KOTARO, 4153, 2.0, 1);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(ID_PLAYER, 4155, 1.0, 1);
	this.WaitFrame(1.0);
	this.Sound.StopSE("ev_056", 1.2);
	this.Talk.PlayAnimation(ID_PLAYER, "e114", 0.5, true);
	this.MessageTalk(6);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(ID_PLAYER, 4157, 1.5, 1);
	this.Talk.HideModel(ID_PLAYER, 2, 0.5);
	this.Talk.MovePosition(ID_SHOP, 4133, 1.5, 1);
	this.Talk.HideModel(ID_SHOP, 2, 0.5);
	this.Talk.MovePosition(ID_HACKER, 4113, 1.5, 1);
	this.Talk.HideModel(ID_HACKER, 2, 0.5);
	this.Talk.HideModel(ID_KOTARO, 2, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.WaitFrame(0.1);
}

function s504_d122_0501()
{
	local ID_PLAYER = 1;
	local ID_KOTARO = 2;
	this.HM_Play_BGM(this.Work.Get(40), 0.0);
	this.Talk.Load("s504_d122_0501");
	this.Talk.LoadModel(ID_PLAYER, this.Common.GetPlayerModelName(), 1);
	this.Talk.LoadModel(ID_KOTARO, "mob040", 2);
	this.Talk.LoadCommunication(3025, 1310);
	this.Talk.LoadCommunication_Ani("f01_m01");
	this.Talk.LoadCommunication_Ani("f01_m02");
	this.Talk.LoadCommunication_Ani("fn01");
	this.Talk.LoadCommunication_Ani("e002");
	this.Talk.LoadCommunication_Ani("e002_end");
	this.WaitTalkLoadModelCommunication();
	this.Talk.LoadAnimation(ID_PLAYER, "f01_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f01_m02");
	this.Talk.LoadAnimation(ID_PLAYER, "f01_e03");
	this.Talk.LoadAnimation(ID_PLAYER, "f06_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f06_m02");
	this.Talk.LoadAnimation(ID_PLAYER, "f06_e03");
	this.Talk.LoadAnimation(ID_PLAYER, "fw01");
	this.Talk.LoadAnimation(ID_PLAYER, "fn01");
	this.Talk.LoadAnimation(ID_PLAYER, "e002");
	this.Talk.LoadAnimation(ID_PLAYER, "e002_end");
	this.Talk.LoadAnimation(ID_PLAYER, "e008");
	this.Talk.LoadAnimation(ID_PLAYER, "e009");
	this.Talk.LoadAnimation(ID_PLAYER, "e011");
	this.Talk.LoadAnimation(ID_PLAYER, "e124");
	this.Talk.LoadAnimation(ID_PLAYER, "e511");
	this.Talk.LoadAnimation(ID_KOTARO, "f01_m01");
	this.Talk.LoadAnimation(ID_KOTARO, "f03_m01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn02");
	this.Talk.LoadAnimation(ID_KOTARO, "fn06");
	this.Talk.LoadAnimation(ID_KOTARO, "fn10");
	this.Talk.LoadAnimation(ID_KOTARO, "ft01");
	this.Talk.LoadAnimation(ID_KOTARO, "e007");
	this.WaitTalkLoadModel();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(ID_PLAYER, 2113, 1, 0);
	this.Talk.ShowModel(ID_KOTARO, 2136, 1, 0);
	this.Talk.SetOutlineModel(ID_PLAYER, 1);
	this.Talk.SetOutlineModel(ID_KOTARO, 1);
	this.Talk.MovePosition(ID_PLAYER, 2111, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.PlayAnimation(ID_KOTARO, "fn02", 0, true);
	this.Talk.MovePosition(ID_KOTARO, 2134, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.MovePosition(ID_KOTARO, 2131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_PLAYER, "e009", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_KOTARO, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
	this.MessageTalk(2);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.5, true);
	this.Talk.SetLastTalkerManageID(ID_PLAYER);
	this.Talk.PlayAnimation(ID_PLAYER, "e002", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_m01", true);
	this.Talk.PlayAnimation(ID_PLAYER, "e002_end", 0.5, false);
	this.Talk.SetLastTalkerManageID(-1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.PlayAnimation(ID_KOTARO, "e007", 0.30000001, true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(3);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_m01", true);
	this.Talk.PlayAnimation(ID_KOTARO, "ft01", 0.5, true);
	this.MessageTalk(4);
	this.MessageTalk(5);
	this.MessageTalk(6);
	this.Talk.PlayAnimation(ID_KOTARO, "fn10", 0.30000001, true);
	this.MessageTalk(7);
	this.MessageTalk(8);
	this.Talk.PlayAnimation(ID_KOTARO, "e007", 0.2, true);
	this.MessageTalk(9);
	this.MessageTalk(10);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_e03", true);
	this.Talk.PlayAnimation(ID_PLAYER, "e011", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_KOTARO, "fn06", 0.5, true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(11);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_m01", true);
	this.MessageTalk(12);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.SetLastTalkerManageID(ID_PLAYER);
	this.Talk.PlayAnimation(ID_PLAYER, "e002", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_m01", true);
	this.Talk.PlayAnimation(ID_PLAYER, "e002_end", 0.5, false);
	this.Talk.SetLastTalkerManageID(-1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(ID_KOTARO, "fn02", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(13);
	this.MessageTalk(14);
	this.Talk.PlayAnimation(ID_KOTARO, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
	this.MessageTalk(15);
	this.MessageTalk(16);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.5, true);
	this.Talk.MovePosition(ID_PLAYER, 2114, 0.5, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(ID_PLAYER, "fw01", 0.5, true);
	this.Talk.MovePosition(ID_KOTARO, 2133, 2.0, 1);
	this.Talk.HideModel(ID_KOTARO, 2, 0.5);
	this.WaitFrame(1.0);
	this.Talk.MovePosition(ID_PLAYER, 1211, 1.0, 1);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimation(ID_PLAYER, "fn01", 0.5, true);
	this.Sound.StopSE("ev_056", 0.5);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_PLAYER, "e008", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_e03", true);
	this.WaitFrame(1.0);
	this.MessageTalk(17);
	this.MessageTalk(18);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_m01", true);
	this.Talk.PlayAnimation(ID_PLAYER, "fn01", 0.5, true);
	this.MessageTalk(19);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_PLAYER, "e511", 0.5, false);
	this.Talk.MovePosition(ID_PLAYER, 4136, 1.0, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_059", false);
	this.WaitFrame(2.5);
	this.ShowCommunication("fn01");
	this.Talk.PlayCommunication_AniSlotB("f01_m02", true);
	this.MessageTalk(20);
	this.Talk.PlayCommunication_AniSlotB("f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.SetLastTalkerManageID(ID_PLAYER);
	this.Talk.PlayAnimation(ID_PLAYER, "e002", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_m01", true);
	this.Talk.PlayAnimation(ID_PLAYER, "e002_end", 0.5, false);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayCommunication_AniSlotB("f01_m02", true);
	this.MessageTalk(21);
	this.Talk.PlayCommunication_Ani("e002", 0.5, true);
	this.MessageTalk(22);
	this.MessageTalk(23);
	this.Talk.PlayCommunication_AniSlotB("f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayCommunication_Ani("e002_end", 0.5, false);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(ID_PLAYER, "e009", 0.5, true);
	this.WaitFrame(1.0);
	this.CommunicationClose();
	this.WaitFrame(0.5);
	this.MessageTalk(24);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(ID_PLAYER, 4133, 1.5, 1);
	this.Talk.HideModel(ID_PLAYER, 2, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.WaitFrame(0.1);
}

function s504_d122_0901()
{
	local ID_PLAYER = 1;
	local ID_KOTARO = 2;
	local ID_SOSUKE = 3;
	local ID_ADOLISH_A = 4;
	local ID_ADOLISH_B = 5;
	local ID_RETAIN_A = 6;
	local ID_RETAIN_B = 7;
	local ID_SHOP = 8;
	this.Flag.Clear(17402);
	this.Flag.Clear(17403);
	this.Sound.StopBGM(1.0);
	this.Talk.Load("s504_d122_0901");
	this.Talk.LoadModel(ID_PLAYER, this.Common.GetPlayerModelName(), 1);
	this.Talk.LoadModel(ID_KOTARO, "mob040", 3);
	this.Talk.LoadModel(ID_SOSUKE, "mob003", 3);
	this.Talk.LoadModel(ID_ADOLISH_A, "mob025", 2);
	this.Talk.LoadModel(ID_ADOLISH_B, "mob025", 1);
	this.Talk.LoadModel(ID_RETAIN_A, "mob026", 2);
	this.Talk.LoadModel(ID_RETAIN_B, "mob026", 1);
	this.Talk.LoadModel(ID_SHOP, "mob027", 2);
	this.Talk.LoadModelTexture(ID_ADOLISH_A, "b");
	this.Talk.LoadModelTexture(ID_ADOLISH_B, "c");
	this.Talk.LoadModelTexture(ID_RETAIN_A, "b");
	this.Talk.LoadModelTexture(ID_RETAIN_B, "c");
	this.Talk.LoadAnimation(ID_PLAYER, "f01_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f04_e03");
	this.Talk.LoadAnimation(ID_PLAYER, "f06_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f06_e03");
	this.Talk.LoadAnimation(ID_PLAYER, "f07_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f10_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f13_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "fr01");
	this.Talk.LoadAnimation(ID_PLAYER, "fn01");
	this.Talk.LoadAnimation(ID_PLAYER, "e006");
	this.Talk.LoadAnimation(ID_PLAYER, "e007");
	this.Talk.LoadAnimation(ID_PLAYER, "e008");
	this.Talk.LoadAnimation(ID_PLAYER, "e009");
	this.Talk.LoadAnimation(ID_PLAYER, "e010");
	this.Talk.LoadAnimation(ID_KOTARO, "f01_m01");
	this.Talk.LoadAnimation(ID_KOTARO, "f03_m01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn02");
	this.Talk.LoadAnimation(ID_KOTARO, "fn06");
	this.Talk.LoadAnimation(ID_KOTARO, "fn10");
	this.Talk.LoadAnimation(ID_KOTARO, "ft01");
	this.Talk.LoadAnimation(ID_KOTARO, "fw01");
	this.Talk.LoadAnimation(ID_KOTARO, "e006");
	this.Talk.LoadAnimation(ID_KOTARO, "e007");
	this.Talk.LoadAnimation(ID_KOTARO, "e517");
	this.Talk.LoadAnimation(ID_SOSUKE, "f01_m01");
	this.Talk.LoadAnimation(ID_SOSUKE, "f02_m01");
	this.Talk.LoadAnimation(ID_SOSUKE, "fn02");
	this.Talk.LoadAnimation(ID_SOSUKE, "fn03");
	this.Talk.LoadAnimation(ID_SOSUKE, "fn09");
	this.Talk.LoadAnimation(ID_SOSUKE, "ft01");
	this.Talk.LoadAnimation(ID_SOSUKE, "e007");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "f01_m01");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "f02_m01");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "f04_m01");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "fr01");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "fn04");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "fn09");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "fn10");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "fn11");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "e517");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "f01_m01");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "f02_m01");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "fn01");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "fn10");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "fr01");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "ft01");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "e517");
	this.Talk.LoadAnimation(ID_RETAIN_A, "f01_m01");
	this.Talk.LoadAnimation(ID_RETAIN_A, "f02_m01");
	this.Talk.LoadAnimation(ID_RETAIN_A, "f04_m01");
	this.Talk.LoadAnimation(ID_RETAIN_A, "fr01");
	this.Talk.LoadAnimation(ID_RETAIN_A, "fn01");
	this.Talk.LoadAnimation(ID_RETAIN_A, "fn02");
	this.Talk.LoadAnimation(ID_RETAIN_A, "fn09");
	this.Talk.LoadAnimation(ID_RETAIN_A, "fn10");
	this.Talk.LoadAnimation(ID_RETAIN_B, "f02_m01");
	this.Talk.LoadAnimation(ID_RETAIN_B, "fr01");
	this.Talk.LoadAnimation(ID_RETAIN_B, "fn02");
	this.Talk.LoadAnimation(ID_SHOP, "f01_m01");
	this.Talk.LoadAnimation(ID_SHOP, "f02_m01");
	this.Talk.LoadAnimation(ID_SHOP, "f04_m01");
	this.Talk.LoadAnimation(ID_SHOP, "fw01");
	this.Talk.LoadAnimation(ID_SHOP, "fn01");
	this.Talk.LoadAnimation(ID_SHOP, "fn09");
	this.Talk.LoadAnimation(ID_SHOP, "fn11");
	this.Talk.LoadAnimation(ID_SHOP, "ft01");
	this.WaitTalkLoadModel();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(ID_PLAYER, 4113, 1, 0);
	this.Talk.ShowModel(ID_KOTARO, 2133, 1, 0);
	this.Talk.ShowModel(ID_SOSUKE, 2113, 1, 0);
	this.Talk.ShowModel(ID_ADOLISH_A, 4133, 1, 0);
	this.Talk.ShowModel(ID_ADOLISH_B, 4133, 1, 0);
	this.Talk.ShowModel(ID_RETAIN_A, 4113, 1, 0);
	this.Talk.ShowModel(ID_RETAIN_B, 4113, 1, 0);
	this.Talk.ChangeTextureModel(ID_ADOLISH_A, "b");
	this.Talk.ChangeTextureModel(ID_ADOLISH_B, "c");
	this.Talk.ChangeTextureModel(ID_RETAIN_A, "b");
	this.Talk.ChangeTextureModel(ID_RETAIN_B, "c");
	this.Talk.SetOutlineModel(ID_PLAYER, 1);
	this.Talk.SetOutlineModel(ID_KOTARO, 1);
	this.Talk.SetOutlineModel(ID_SOSUKE, 1);
	this.Talk.SetOutlineModel(ID_ADOLISH_A, 1);
	this.Talk.SetOutlineModel(ID_ADOLISH_B, 1);
	this.Talk.SetOutlineModel(ID_RETAIN_A, 1);
	this.Talk.SetOutlineModel(ID_RETAIN_B, 1);
	this.Talk.SetOutlineModel(ID_SHOP, 1);
	this.Sound.PlayBGM("M45", 0);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0, true);
	this.Talk.MovePosition(ID_KOTARO, 2131, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0, true);
	this.Talk.MovePosition(ID_SOSUKE, 2111, 1.0, 1);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimation(ID_KOTARO, "fn02", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(ID_SOSUKE, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
	this.MessageTalk(2);
	this.MessageTalk(3);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0.5, true);
	this.Talk.PlayAnimation(ID_KOTARO, "e007", 0.2, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(4);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn10", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
	this.MessageTalk(5);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0.5, true);
	this.WaitFrame(0.2);
	this.Talk.PlayAnimation(ID_KOTARO, "fn02", 0.40000001, true);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimation(ID_KOTARO, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(6);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.40000001, true);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
	this.MessageTalk(7);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(ID_KOTARO, "e007", 0.2, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(8);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(ID_SOSUKE, 2113, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(ID_KOTARO, 4110, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_ADOLISH_A, "f02_m01", true);
	this.Talk.PlayAnimation(ID_ADOLISH_A, "fn04", 0, true);
	this.Talk.MovePosition(ID_ADOLISH_A, 4134, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_ADOLISH_B, "f02_m01", true);
	this.Talk.PlayAnimation(ID_ADOLISH_B, "fn10", 0, true);
	this.Talk.StartFrameModel(ID_ADOLISH_B, "fn10", 25);
	this.Talk.MovePosition(ID_ADOLISH_B, 4132, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(9);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Sound.PlaySE("ev_057", false);
	this.Talk.PlayAnimation(ID_ADOLISH_A, "fr01", 0.40000001, true);
	this.Talk.MovePosition(ID_ADOLISH_A, 4153, 1.5, 1);
	this.Talk.PlayAnimation(ID_ADOLISH_B, "fr01", 0.5, true);
	this.Talk.MovePosition(ID_ADOLISH_B, 4153, 2.0, 1);
	this.Talk.MovePosition(ID_KOTARO, 4151, 0.5, 1);
	this.WaitFrame(1.5);
	this.Talk.PlayAlpha(ID_ADOLISH_A, 0.5, 1, 0);
	this.Talk.PlayAlpha(ID_ADOLISH_B, 0.5, 1, 0);
	this.Talk.MovePosition(ID_KOTARO, 4133, 1.0, 1);
	this.Talk.PlayAlpha(ID_KOTARO, 0.5, 1, 0);
	this.Sound.StopSE("ev_057", 0.5);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
	this.Talk.MovePosition(ID_SOSUKE, 4170, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_RETAIN_A, "f02_m01", true);
	this.Talk.PlayAnimation(ID_RETAIN_A, "fn10", 0, true);
	this.Talk.MovePosition(ID_RETAIN_A, 4114, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_RETAIN_B, "f02_m01", true);
	this.Talk.PlayAnimation(ID_RETAIN_B, "fn02", 0, true);
	this.Talk.MovePosition(ID_RETAIN_B, 4112, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_SOSUKE, "e007", 0.2, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m02", true);
	this.MessageTalk(10);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Sound.PlaySE("ev_057", false);
	this.Talk.PlayAnimation(ID_RETAIN_A, "fr01", 0.5, true);
	this.Talk.MovePosition(ID_RETAIN_A, 4173, 1.5, 1);
	this.Talk.PlayAnimation(ID_RETAIN_B, "fr01", 0.5, true);
	this.Talk.MovePosition(ID_RETAIN_B, 4173, 2.0, 1);
	this.WaitFrame(1.5);
	this.Talk.PlayAlpha(ID_RETAIN_A, 0.5, 1, 0);
	this.Talk.PlayAlpha(ID_RETAIN_B, 0.5, 1, 0);
	this.Talk.MovePosition(ID_SOSUKE, 4113, 1.0, 1);
	this.Talk.PlayAlpha(ID_SOSUKE, 0.5, 1, 0);
	this.WaitFrame(1.5);
	this.Sound.StopSE("ev_057", 0.5);
	this.Sound.PlaySE("ev_057", false);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f07_m01", true);
	this.Talk.PlayAnimation(ID_PLAYER, "fr01", 0, true);
	this.Talk.MovePosition(ID_PLAYER, 1212, 1.5, 1);
	this.WaitFrame(0.80000001);
	this.Talk.PlayAnimation(ID_PLAYER, "e006", 0.2, true);
	this.Sound.StopSE("ev_057", 0.5);
	this.MessageTalk(11);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_e03", true);
	this.Talk.PlayAnimation(ID_PLAYER, "e008", 0.5, true);
	this.MessageTalk(12);
	this.MessageTalkSel(3, 13);
	local result = this.Talk.GetResultSelectedNum();
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();

	if (result == 0 || result == 1)
	{
		this.Talk.MovePosition(ID_KOTARO, 2133, 0, 1);
		this.Talk.MovePosition(ID_SOSUKE, 2113, 0, 1);
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f10_m01", true);
		this.Talk.PlayAnimation(ID_PLAYER, "e009", 0.5, true);
		this.WaitFrame(1.0);
		this.Sound.PlaySE("ev_057", false);
		this.Talk.PlayAnimation(ID_PLAYER, "fr01", 0.5, true);
		this.Talk.MovePosition(ID_PLAYER, 2136, 1.5, 1);
		this.WaitFrame(0.5);
		this.Talk.PlayAlpha(ID_PLAYER, 0.5, 1, 0);
		this.WaitFrame(0.5);
	}

	if (result == 0)
	{
		this.Flag.Set(17402);
		this.Talk.MovePosition(ID_SOSUKE, 4113, 0, 1);
		this.Talk.PlayAnimation(ID_RETAIN_A, "fn09", 0, true);
		this.Talk.MovePosition(ID_RETAIN_A, 4113, 0, 1);
		this.Talk.MovePosition(ID_PLAYER, 2137, 0, 1);
		this.Talk.MovePosition(ID_KOTARO, 2115, 1.0, 1);
		this.Talk.PlayAlpha(ID_KOTARO, 0.5, 0, 1);
		this.WaitFrame(1.0);
		this.Talk.MovePosition(ID_PLAYER, 2131, 1.0, 1);
		this.Talk.PlayAlpha(ID_PLAYER, 0.5, 0, 1);
		this.WaitFrame(0.5);
		this.Talk.PlayAnimation(ID_PLAYER, "e007", 0.30000001, true);
		this.WaitFrame(0.40000001);
		this.Sound.PlaySE("ev_051", false);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
		this.Talk.MovePosition(ID_KOTARO, 2111, 1.0, 1);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
		this.MessageTalk(14);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.MovePosition(ID_KOTARO, 4131, 1.0, 1);
		this.Talk.MovePosition(ID_PLAYER, 4132, 1.0, 1);
		this.WaitFrame(0.5);
		this.Talk.MovePosition(ID_SOSUKE, 4112, 1.0, 1);
		this.Talk.PlayAlpha(ID_SOSUKE, 0.5, 0, 1);
		this.Talk.PlayAnimationSlotB(ID_RETAIN_A, "f04_m01", true);
		this.Talk.MovePosition(ID_RETAIN_A, 4114, 1.0, 1);
		this.Talk.PlayAlpha(ID_RETAIN_A, 0.5, 0, 1);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimationSlotB(ID_RETAIN_A, "f04_m02", true);
		this.MessageTalk(15);
		this.Talk.PlayAnimationSlotB(ID_RETAIN_A, "f04_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m02", true);
		this.MessageTalk(16);
		this.MessageTalk(17);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
		this.MessageTalk(18);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Fade.Out(1, 0.2);
		this.Sound.PlaySE("fe_028", false);
		this.WaitFrame(0.2);
	}
	else if (result == 1)
	{
		this.Flag.Set(17403);
		this.Talk.PlayAnimation(ID_KOTARO, "e006", 0, true);
		this.Talk.MovePosition(ID_KOTARO, 4133, 0, 1);
		this.Talk.PlayAnimation(ID_ADOLISH_A, "fn09", 0, true);
		this.Talk.MovePosition(ID_ADOLISH_A, 4133, 0, 1);
		this.Talk.MovePosition(ID_PLAYER, 2117, 0, 1);
		this.Talk.MovePosition(ID_SOSUKE, 2135, 1.0, 1);
		this.Talk.PlayAlpha(ID_SOSUKE, 0.5, 0, 1);
		this.WaitFrame(1.0);
		this.Talk.MovePosition(ID_PLAYER, 2111, 1.0, 1);
		this.Talk.PlayAlpha(ID_PLAYER, 0.5, 0, 1);
		this.WaitFrame(0.5);
		this.Talk.PlayAnimation(ID_PLAYER, "e007", 0.30000001, true);
		this.WaitFrame(0.40000001);
		this.Sound.PlaySE("ev_051", false);
		this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
		this.Talk.MovePosition(ID_SOSUKE, 2131, 1.0, 1);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
		this.MessageTalk(19);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.MovePosition(ID_PLAYER, 4112, 1.0, 1);
		this.Talk.MovePosition(ID_SOSUKE, 4111, 1.0, 1);
		this.WaitFrame(0.5);
		this.Talk.MovePosition(ID_KOTARO, 4132, 1.0, 1);
		this.Talk.PlayAlpha(ID_KOTARO, 0.5, 0, 1);
		this.Talk.PlayAnimationSlotB(ID_ADOLISH_A, "f04_m01", true);
		this.Talk.MovePosition(ID_ADOLISH_A, 4131, 1.0, 1);
		this.Talk.PlayAlpha(ID_ADOLISH_A, 0.5, 0, 1);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
		this.MessageTalk(20);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f04_e03", true);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimation(ID_KOTARO, "e007", 0.2, true);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
		this.MessageTalk(21);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.Talk.PlayAnimationSlotB(ID_ADOLISH_A, "f02_m01", true);
		this.Talk.PlayAnimation(ID_ADOLISH_A, "fn10", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f10_m01", true);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
		this.Talk.PlayAnimation(ID_SOSUKE, "e007", 0.2, true);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m02", true);
		this.MessageTalk(22);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Fade.Out(1, 0.2);
		this.Sound.PlaySE("fe_028", false);
		this.WaitFrame(0.2);
	}
	else
	{
		this.Flag.Clear(17402);
		this.Flag.Clear(17403);
		this.Talk.PlayAnimation(ID_KOTARO, "e006", 0, true);
		this.Talk.PlayAnimation(ID_SOSUKE, "fn02", 0, true);
		this.Talk.PlayAnimation(ID_RETAIN_A, "fn02", 0.5, true);
		this.Talk.MovePosition(ID_RETAIN_A, 4113, 1.0, 1);
		this.Talk.PlayAnimation(ID_ADOLISH_A, "fn04", 0.5, true);
		this.Talk.MovePosition(ID_ADOLISH_A, 4133, 1.0, 1);
		this.Talk.PlayAnimation(ID_PLAYER, "e010", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f04_e03", true);
		this.WaitFrame(1.0);
		this.Fade.Out(0, 0.30000001);
		this.WaitFrame(0.30000001);
		this.Talk.MovePosition(ID_PLAYER, 2113, 0, 1);
		this.Fade.In(0, 0.30000001);
		this.WaitFrame(0.30000001);
		this.Talk.MovePosition(ID_KOTARO, 4132, 1.0, 1);
		this.Talk.PlayAlpha(ID_KOTARO, 0.5, 0, 1);
		this.Talk.MovePosition(ID_ADOLISH_A, 4131, 1.0, 1);
		this.Talk.PlayAlpha(ID_ADOLISH_A, 0.5, 0, 1);
		this.Talk.MovePosition(ID_SOSUKE, 4112, 1.0, 1);
		this.Talk.PlayAlpha(ID_SOSUKE, 0.5, 0, 1);
		this.Talk.MovePosition(ID_RETAIN_A, 4111, 1.0, 1);
		this.Talk.PlayAlpha(ID_RETAIN_A, 0.5, 0, 1);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
		this.MessageTalk(23);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m02", true);
		this.MessageTalk(24);
		this.Talk.PlayAnimation(ID_SOSUKE, "ft01", 0.5, true);
		this.MessageTalk(25);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
		this.MessageTalk(26);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0.5, true);
		this.Talk.PlayAnimation(ID_KOTARO, "e007", 0.2, true);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
		this.MessageTalk(27);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Sound.StopBGM(5.0);
		this.Fade.Out(0, 1.0);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
		this.Talk.PlayAnimation(ID_SOSUKE, "fn03", 0, true);
		this.Talk.MovePosition(ID_SOSUKE, 4110, 0, 1);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
		this.Talk.PlayAnimation(ID_KOTARO, "fn10", 0, true);
		this.Talk.MovePosition(ID_KOTARO, 4134, 0, 1);
		this.Talk.HideModel(ID_RETAIN_A, 2, 0.1);
		this.Talk.PlayAnimationSlotB(ID_ADOLISH_A, "f01_m01", true);
		this.Talk.PlayAnimation(ID_ADOLISH_A, "fn11", 0, true);
		this.Talk.MovePosition(ID_ADOLISH_A, 4136, 0, 1);
		this.Talk.PlayAnimation(ID_ADOLISH_B, "fn01", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_ADOLISH_B, "f01_m01", true);
		this.Talk.MovePosition(ID_ADOLISH_B, 4625, 0, 1);
		this.Talk.PlayAlpha(ID_ADOLISH_B, 0, 0, 1);
		this.WaitFrame(0.5);
		this.WaitFrame(1.0);
		this.WaitFrame(2.5);
		this.Fade.In(0, 2.0);
		this.WaitFrame(2.0);
		this.Sound.PlayBGM("M38", 0);
		this.MessageTalk(28);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
		this.MessageTalk(29);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.MovePosition(ID_ADOLISH_A, 4131, 1.0, 1);
		this.Talk.MovePosition(ID_KOTARO, 4137, 1.0, 1);
		this.Sound.PlaySE("ev_057", false);
		this.WaitFrame(0.5);
		this.Talk.PlayAnimation(ID_ADOLISH_B, "fr01", 0.5, true);
		this.Talk.MovePosition(ID_ADOLISH_B, 4132, 1.5, 1);
		this.WaitFrame(0.80000001);
		this.Talk.PlayAnimation(ID_ADOLISH_B, "fn01", 0.5, true);
		this.Talk.MovePosition(ID_ADOLISH_A, 4171, 1.0, 1);
		this.Talk.MovePosition(ID_KOTARO, 4176, 1.0, 1);
		this.WaitFrame(1.0);
		this.Sound.StopSE("ev_057", 0.5);
		this.Talk.PlayAnimation(ID_ADOLISH_B, "ft01", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_ADOLISH_B, "f01_m02", true);
		this.MessageTalk(30);
		this.Talk.PlayAnimationSlotB(ID_ADOLISH_B, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.Talk.PlayAnimation(ID_ADOLISH_B, "fn01", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
		this.MessageTalk(31);
		this.Talk.MovePosition(ID_ADOLISH_A, 4130, 0.5, 1);
		this.Talk.PlayAnimation(ID_KOTARO, "e517", 0.2, true);
		this.MessageTalk(32);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.Talk.PlayAnimation(ID_ADOLISH_A, "e517", 0.30000001, true);
		this.Talk.PlayAnimation(ID_ADOLISH_B, "e517", 0.2, true);
		this.Talk.PlayAnimationSlotB(ID_ADOLISH_A, "f01_m02", true);
		this.Talk.PlayAnimationSlotB(ID_ADOLISH_B, "f01_m02", true);
		this.MessageTalk(33);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Fade.Out(0, 0.5);
		this.WaitFrame(0.5);
		this.Talk.ShowModel(ID_SHOP, 2136, 1, 0);
		this.Talk.PlayAnimation(ID_SHOP, "fn09", 0, true);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f04_m01", true);
		this.Talk.HideModel(ID_SOSUKE, 2, 0.1);
		this.Talk.HideModel(ID_ADOLISH_A, 2, 0.1);
		this.Talk.HideModel(ID_ADOLISH_B, 2, 0.1);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
		this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0, true);
		this.Talk.MovePosition(ID_KOTARO, 2133, 0, 1);
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_m01", true);
		this.Talk.PlayAnimation(ID_PLAYER, "fn01", 0, true);
		this.Talk.MovePosition(ID_PLAYER, 2113, 0, 1);
		this.WaitFrame(0.5);
		this.Sound.PlaySE("ev_035", true);
		this.WaitFrame(1.5);
		this.Sound.PlaySE("ev_047", false);
		this.WaitFrame(1.0);
		this.Sound.PlaySE("ev_049", false);
		this.WaitFrame(0.5);
		this.Sound.StopSE("ev_035", 1.5);
		this.WaitFrame(0.5);
		this.Fade.In(0, 1.5);
		this.WaitFrame(1.5);
		this.Talk.MovePosition(ID_SHOP, 2135, 1.0, 1);
		this.Talk.MovePosition(ID_PLAYER, 2110, 1.0, 1);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f04_m02", true);
		this.MessageTalk(34);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f04_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageTalk(35);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.PlayAnimation(ID_SHOP, "fn01", 0.5, true);
		this.WaitFrame(2.0);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m02", true);
		this.Talk.PlayAnimation(ID_SHOP, "fn11", 0.5, true);
		this.MessageTalk(36);
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_m01", true);
		this.MessageTalk(37);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_e03", true);
		this.Talk.MovePosition(ID_SHOP, 2131, 0.5, 1);
		this.WaitFrame(0.5);
		this.Sound.PlaySE("ev_056", false);
		this.Talk.PlayAnimation(ID_SHOP, "fw01", 0.5, true);
		this.Talk.MovePosition(ID_SHOP, 2114, 3.0, 1);
		this.Talk.MovePosition(ID_PLAYER, 2134, 3.0, 1);
		this.WaitFrame(2.5);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f02_m01", true);
		this.Talk.PlayAnimation(ID_SHOP, "fn01", 0.5, true);
		this.Sound.StopSE("ev_056", 0.5);
		this.WaitFrame(1.0);
		this.Talk.MovePosition(ID_SHOP, 2111, 1.0, 1);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f02_m02", true);
		this.MessageTalk(38);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f02_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f13_m01", true);
		this.Talk.MovePosition(ID_PLAYER, 2131, 1.0, 1);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
		this.Talk.PlayAnimation(ID_SHOP, "ft01", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m02", true);
		this.MessageTalk(39);
		this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.PlayAnimation(ID_SHOP, "fn01", 0.40000001, true);
		this.Talk.MovePosition(ID_SHOP, 2114, 0.5, 1);
		this.WaitFrame(0.5);
		this.Sound.PlaySE("ev_056", false);
		this.Talk.PlayAnimation(ID_SHOP, "fw01", 0.5, true);
		this.Talk.MovePosition(ID_SHOP, 2116, 1.5, 1);
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_m01", true);
		this.WaitFrame(1.5);
		this.Sound.StopSE("ev_056", 0.5);
		this.MessageTalk(40);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.MovePosition(ID_PLAYER, 2134, 0.5, 1);
		this.WaitFrame(1.0);
		this.Talk.MovePosition(ID_PLAYER, 2111, 1.0, 1);
		this.Sound.PlaySE("ev_056", false);
		this.WaitFrame(0.5);
		this.Talk.PlayAnimation(ID_KOTARO, "fw01", 0.5, true);
		this.Talk.MovePosition(ID_KOTARO, 2131, 1.5, 1);
		this.WaitFrame(0.80000001);
		this.Talk.PlayAnimation(ID_KOTARO, "fn06", 0.5, true);
		this.Sound.StopSE("ev_056", 0.5);
		this.WaitFrame(0.5);
		this.Talk.PlayAnimation(ID_KOTARO, "ft01", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
		this.MessageTalk(41);
		this.MessageTalk(42);
		this.MessageTalk(43);
		this.Talk.PlayAnimation(ID_KOTARO, "fn10", 0.30000001, true);
		this.MessageTalk(44);
		this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.MovePosition(ID_KOTARO, 2134, 0.5, 1);
		this.WaitFrame(0.5);
		this.Sound.PlaySE("ev_056", false);
		this.Talk.PlayAnimation(ID_KOTARO, "fw01", 0.5, true);
		this.Talk.MovePosition(ID_KOTARO, 2136, 1.5, 1);
		this.WaitFrame(1.5);
		this.Sound.StopSE("ev_056", 0.80000001);
		this.Talk.MovePosition(ID_PLAYER, 1210, 1.0, 1);
		this.WaitFrame(1.0);
		this.Talk.PlayAnimation(ID_PLAYER, "e008", 0.5, true);
		this.Talk.PlayAnimationSlotB(ID_PLAYER, "f06_e03", true);
		this.MessageTalk(45);
		this.MessageTalk(46);
		this.Talk.SetLastTalkerManageID(-1);
		this.MessageClose();
		this.Talk.MovePosition(ID_PLAYER, 1213, 1.5, 1);
		this.Talk.HideModel(ID_PLAYER, 2, 0.5);
		this.WaitFrame(0.5);
	}

	this.TalkExit();
	this.WaitFrame(0.1);
}

function s504_d122_1001()
{
	local ID_PLAYER = 1;
	local ID_KOTARO = 2;
	local ID_ADOLISH_A = 3;
	local ID_ADOLISH_B = 4;
	this.Sound.PlayBGM("M46", 0);
	this.Talk.Load("s504_d122_1001");
	this.Talk.LoadModel(ID_PLAYER, this.Common.GetPlayerModelName(), 1);
	this.Talk.LoadModel(ID_KOTARO, "mob040", 4);
	this.Talk.LoadModel(ID_ADOLISH_A, "mob025", 3);
	this.Talk.LoadModel(ID_ADOLISH_B, "mob025", 2);
	this.Talk.LoadModelTexture(ID_ADOLISH_A, "b");
	this.Talk.LoadModelTexture(ID_ADOLISH_B, "c");
	this.Talk.LoadAnimation(ID_PLAYER, "f01_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f02_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f03_e03");
	this.Talk.LoadAnimation(ID_PLAYER, "f07_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "fn01");
	this.Talk.LoadAnimation(ID_PLAYER, "e004");
	this.Talk.LoadAnimation(ID_PLAYER, "e006");
	this.Talk.LoadAnimation(ID_PLAYER, "e112");
	this.Talk.LoadAnimation(ID_KOTARO, "f01_m01");
	this.Talk.LoadAnimation(ID_KOTARO, "fw01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn10");
	this.Talk.LoadAnimation(ID_KOTARO, "ft01");
	this.Talk.LoadAnimation(ID_KOTARO, "e517");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "f01_m01");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "fr01");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "fn01");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "fn02");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "ft01");
	this.Talk.LoadAnimation(ID_ADOLISH_A, "e517");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "f01_m01");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "fr01");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "fn01");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "fn02");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "fn11");
	this.Talk.LoadAnimation(ID_ADOLISH_B, "e517");
	this.WaitTalkLoadModel();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(ID_PLAYER, 4133, 1, 0);
	this.Talk.ShowModel(ID_KOTARO, 4113, 1, 0);
	this.Talk.ShowModel(ID_ADOLISH_A, 4113, 1, 0);
	this.Talk.ShowModel(ID_ADOLISH_B, 4133, 1, 0);
	this.Talk.ChangeTextureModel(ID_ADOLISH_A, "b");
	this.Talk.ChangeTextureModel(ID_ADOLISH_B, "c");
	this.Talk.SetOutlineModel(ID_PLAYER, 1);
	this.Talk.SetOutlineModel(ID_KOTARO, 1);
	this.Talk.SetOutlineModel(ID_ADOLISH_A, 1);
	this.Talk.SetOutlineModel(ID_ADOLISH_B, 1);
	this.Talk.PlayAnimation(ID_PLAYER, "fn01", 0, true);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f03_e03", true);
	this.Talk.MovePosition(ID_PLAYER, 4132, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
	this.Talk.PlayAnimation(ID_KOTARO, "fn02", 0, true);
	this.Talk.MovePosition(ID_KOTARO, 4111, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_ADOLISH_A, "f01_m01", true);
	this.Talk.PlayAnimation(ID_ADOLISH_A, "fn01", 0, true);
	this.Talk.MovePosition(ID_ADOLISH_A, 4112, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_ADOLISH_B, "f01_m01", true);
	this.Talk.PlayAnimation(ID_ADOLISH_B, "fn11", 0, true);
	this.Talk.MovePosition(ID_ADOLISH_B, 4131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(ID_PLAYER, "e004", 0.2, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimation(ID_KOTARO, "e517", 0.2, true);
	this.MessageTalk(2);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_ADOLISH_A, "e517", 0.2, true);
	this.Talk.PlayAnimation(ID_ADOLISH_B, "e517", 0.2, true);
	this.WaitFrame(0.5);
	this.Fade.Out(0, 0.5);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f01_m01", true);
	this.Talk.PlayAnimation(ID_PLAYER, "fn01", 0, true);
	this.Talk.MovePosition(ID_PLAYER, 2113, 0, 1);
	this.Talk.PlayAnimation(ID_ADOLISH_A, "fn01", 0, true);
	this.Talk.MovePosition(ID_ADOLISH_A, 2137, 0, 1);
	this.Talk.PlayAnimation(ID_ADOLISH_B, "fn01", 0, true);
	this.Talk.MovePosition(ID_ADOLISH_B, 2137, 0, 1);
	this.Talk.PlayAnimation(ID_KOTARO, "fn10", 0, true);
	this.Talk.MovePosition(ID_KOTARO, 4110, 1.0, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_035", true);
	this.WaitFrame(1.5);
	this.Sound.PlaySE("ev_047", false);
	this.WaitFrame(1.0);
	this.Sound.PlaySE("ev_049", false);
	this.WaitFrame(0.5);
	this.Sound.StopSE("ev_035", 1.5);
	this.WaitFrame(0.5);
	this.Fade.In(0, 1.5);
	this.WaitFrame(1.0);
	this.Sound.PlaySE("ev_057", false);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(ID_ADOLISH_A, "fr01", 0, true);
	this.Talk.StartFrameModel(ID_ADOLISH_A, "fr01", 35);
	this.Talk.MovePosition(ID_ADOLISH_A, 4131, 1.5, 1);
	this.Talk.PlayAnimation(ID_ADOLISH_B, "fr01", 0, true);
	this.Talk.MovePosition(ID_ADOLISH_B, 4132, 1.5, 1);
	this.WaitFrame(0.80000001);
	this.Sound.StopSE("ev_057", 0.5);
	this.Talk.PlayAnimation(ID_ADOLISH_A, "fn01", 0.5, true);
	this.Talk.PlayAnimation(ID_ADOLISH_B, "fn02", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_ADOLISH_A, "f01_m02", true);
	this.MessageTalk(3);
	this.Talk.PlayAnimationSlotB(ID_ADOLISH_A, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(ID_KOTARO, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
	this.MessageTalk(4);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f02_m01", true);
	this.Talk.MovePosition(ID_KOTARO, 4151, 0.5, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(ID_KOTARO, "fw01", 0.5, true);
	this.Talk.MovePosition(ID_KOTARO, 4131, 1.5, 1);
	this.Talk.MovePosition(ID_ADOLISH_A, 4133, 1.5, 1);
	this.Talk.MovePosition(ID_ADOLISH_B, 4133, 1.5, 1);
	this.WaitFrame(1.5);
	this.Talk.MovePosition(ID_PLAYER, 2111, 1.0, 1);
	this.Talk.MovePosition(ID_KOTARO, 2131, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.5, true);
	this.Sound.StopSE("ev_056", 0.5);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_KOTARO, "ft01", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
	this.MessageTalk(5);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f03_e03", true);
	this.Talk.PlayAnimation(ID_PLAYER, "e112", 0.2, true);
	this.MessageTalk(6);
	this.Talk.PlayAnimation(ID_PLAYER, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f02_m01", true);
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.5, true);
	this.MessageTalk(7);
	this.Talk.PlayAnimation(ID_KOTARO, "fn02", 0.5, true);
	this.MessageTalk(8);
	this.MessageTalk(9);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.INFO_GET_ITEM(377, 1);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f07_m01", true);
	this.Talk.PlayAnimation(ID_PLAYER, "e006", 0.2, true);
	this.WaitFrame(0.5);
	this.Talk.PlayAnimation(ID_KOTARO, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m02", true);
	this.MessageTalk(10);
	this.Talk.PlayAnimation(ID_PLAYER, "fn01", 0.5, true);
	this.Talk.PlayAnimation(ID_KOTARO, "fn10", 0.30000001, true);
	this.MessageTalk(11);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.40000001, true);
	this.Talk.MovePosition(ID_KOTARO, 2134, 0.5, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(ID_KOTARO, "fw01", 0.5, true);
	this.Talk.MovePosition(ID_KOTARO, 2136, 1.5, 1);
	this.WaitFrame(1.5);
	this.Sound.StopSE("ev_056", 1.2);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(ID_PLAYER, 2113, 1.5, 1);
	this.Talk.HideModel(ID_PLAYER, 2, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.WaitFrame(0.1);
}

function s504_d122_1101()
{
	local ID_PLAYER = 1;
	local ID_KOTARO = 2;
	local ID_SOSUKE = 3;
	local ID_SHOP = 4;
	this.Sound.PlayBGM("M46", 0);
	this.Talk.Load("s504_d122_1101");
	this.Talk.LoadModel(ID_PLAYER, this.Common.GetPlayerModelName(), 1);
	this.Talk.LoadModel(ID_KOTARO, "mob040", 3);
	this.Talk.LoadModel(ID_SOSUKE, "mob003", 3);
	this.Talk.LoadModel(ID_SHOP, "mob027", 2);
	this.Talk.LoadAnimation(ID_PLAYER, "f01_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "f02_m01");
	this.Talk.LoadAnimation(ID_PLAYER, "fn01");
	this.Talk.LoadAnimation(ID_PLAYER, "e009");
	this.Talk.LoadAnimation(ID_KOTARO, "f01_m01");
	this.Talk.LoadAnimation(ID_KOTARO, "f03_m01");
	this.Talk.LoadAnimation(ID_KOTARO, "fn03");
	this.Talk.LoadAnimation(ID_KOTARO, "fr01");
	this.Talk.LoadAnimation(ID_KOTARO, "ft01");
	this.Talk.LoadAnimation(ID_KOTARO, "e007");
	this.Talk.LoadAnimation(ID_SOSUKE, "f01_m01");
	this.Talk.LoadAnimation(ID_SOSUKE, "f02_m01");
	this.Talk.LoadAnimation(ID_SOSUKE, "fw01");
	this.Talk.LoadAnimation(ID_SOSUKE, "fn01");
	this.Talk.LoadAnimation(ID_SOSUKE, "fn02");
	this.Talk.LoadAnimation(ID_SOSUKE, "fn09");
	this.Talk.LoadAnimation(ID_SOSUKE, "ft01");
	this.Talk.LoadAnimation(ID_SHOP, "f01_m01");
	this.Talk.LoadAnimation(ID_SHOP, "f03_m01");
	this.Talk.LoadAnimation(ID_SHOP, "f04_m01");
	this.Talk.LoadAnimation(ID_SHOP, "fw01");
	this.Talk.LoadAnimation(ID_SHOP, "fn01");
	this.Talk.LoadAnimation(ID_SHOP, "fn02");
	this.Talk.LoadAnimation(ID_SHOP, "fn11");
	this.Talk.LoadAnimation(ID_SHOP, "ft01");
	this.WaitTalkLoadModel();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(ID_PLAYER, 2113, 1, 0);
	this.Talk.ShowModel(ID_KOTARO, 2133, 1, 0);
	this.Talk.ShowModel(ID_SOSUKE, 2113, 1, 0);
	this.Talk.ShowModel(ID_SHOP, 2137, 1, 0);
	this.Talk.SetOutlineModel(ID_PLAYER, 1);
	this.Talk.SetOutlineModel(ID_KOTARO, 1);
	this.Talk.SetOutlineModel(ID_SOSUKE, 1);
	this.Talk.SetOutlineModel(ID_SHOP, 1);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0, true);
	this.Talk.MovePosition(ID_SOSUKE, 2111, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.PlayAnimation(ID_KOTARO, "fn03", 0, true);
	this.Talk.MovePosition(ID_KOTARO, 2131, 1.0, 1);
	this.WaitFrame(1.5);
	this.Talk.PlayAnimation(ID_SOSUKE, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn01", 0.40000001, true);
	this.WaitFrame(0.30000001);
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m02", true);
	this.MessageTalk(2);
	this.Talk.PlayAnimation(ID_KOTARO, "e007", 0.2, true);
	this.MessageTalk(3);
	this.Talk.PlayAnimationSlotB(ID_KOTARO, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(ID_KOTARO, 2134, 0.5, 1);
	this.Talk.PlayAnimation(ID_KOTARO, "fn01", 0.40000001, true);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_057", false);
	this.Talk.PlayAnimation(ID_KOTARO, "fr01", 0.5, true);
	this.Talk.MovePosition(ID_KOTARO, 2136, 1.5, 1);
	this.WaitFrame(1.5);
	this.Sound.StopSE("ev_057", 0.5);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn02", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m02", true);
	this.MessageTalk(4);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
	this.Talk.PlayAnimation(ID_SHOP, "fw01", 0.5, true);
	this.Talk.MovePosition(ID_SHOP, 2131, 1.5, 1);
	this.WaitFrame(0.80000001);
	this.Sound.StopSE("ev_056", 0.5);
	this.Talk.PlayAnimation(ID_SHOP, "fn01", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_SHOP, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m02", true);
	this.MessageTalk(5);
	this.MessageTalk(6);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f01_m01", true);
	this.Talk.PlayAnimation(ID_SHOP, "fn02", 0.5, true);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m02", true);
	this.MessageTalk(7);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
	this.MessageTalk(8);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
	this.Talk.PlayAnimation(ID_SHOP, "fn11", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f03_m02", true);
	this.MessageTalk(9);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(ID_SOSUKE, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
	this.MessageTalk(10);
	this.MessageTalk(11);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m02", true);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0.5, true);
	this.MessageTalk(12);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f04_m02", true);
	this.Talk.PlayAnimation(ID_SHOP, "fn01", 0.5, true);
	this.MessageTalk(13);
	this.Talk.PlayAnimationSlotB(ID_SHOP, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(ID_SHOP, 2134, 0.5, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(ID_SHOP, "fw01", 0.5, true);
	this.Talk.MovePosition(ID_SHOP, 2136, 1.5, 1);
	this.WaitFrame(1.5);
	this.Sound.StopSE("ev_056", 0.80000001);
	this.Talk.MovePosition(ID_SOSUKE, 2134, 1.0, 1);
	this.Talk.PlayAnimationSlotB(ID_PLAYER, "f02_m01", true);
	this.Talk.MovePosition(ID_PLAYER, 2111, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.MovePosition(ID_SOSUKE, 2131, 1.0, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
	this.Talk.PlayAnimation(ID_SOSUKE, "ft01", 0.5, true);
	this.MessageTalk(14);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0.40000001, true);
	this.MessageTalk(15);
	this.MessageTalk(16);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn02", 0.5, true);
	this.MessageTalk(17);
	this.MessageTalk(18);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_PLAYER, "e009", 0.5, true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(ID_SOSUKE, "fn09", 0.5, true);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m02", true);
	this.MessageTalk(19);
	this.MessageTalk(20);
	this.Talk.PlayAnimationSlotB(ID_SOSUKE, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(ID_SOSUKE, "fn01", 0.5, true);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(ID_SOSUKE, 2134, 0.5, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(ID_SOSUKE, "fw01", 0.5, true);
	this.Talk.MovePosition(ID_SOSUKE, 2136, 1.5, 1);
	this.WaitFrame(1.5);
	this.Sound.StopSE("ev_056", 1.0);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(ID_PLAYER, 2113, 1.5, 1);
	this.Talk.HideModel(ID_PLAYER, 2, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.WaitFrame(0.1);
}

function s563_d122_0201()
{
	this.Talk.Load("s563_d122_0201");
	this.Talk.LoadModel(1, this.Common.GetPlayerModelName(), 1);
	this.Talk.LoadModel(2, "mob025", 2);
	this.Talk.LoadAnimation(1, "fn01");
	this.Talk.LoadAnimation(2, "fn01");
	this.Talk.LoadModelTexture(2, "c");
	this.WaitTalkLoadModel();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 2113, 1, 0);
	this.Talk.ShowModel(2, 2133, 1, 0);
	this.Talk.PlayAnimation(2, "fn11", 0, true);
	this.Talk.ChangeTextureModel(2, "c");
	this.Talk.SetOutlineModel(1, 1);
	this.Talk.SetOutlineModel(2, 1);
	this.Talk.PlayAnimation(1, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.MovePosition(1, 2111, 1.0, 1);
	this.Talk.MovePosition(2, 2131, 1.0, 1);
	this.WaitFrame(0.5);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e002", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimation(1, "e002_end", 0.5, false);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(2);
	this.MessageTalk(3);
	this.MessageTalk(4);
	this.Talk.PlayAnimation(1, "e114", 0.40000001, true);
	this.MessageTalk(5);
	this.MessageTalk(6);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e002", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimation(1, "e002_end", 0.5, false);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(7);
	this.MessageTalk(8);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.INFO_WINDOW(7232);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(9);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(2, "fw01", 0.5, true);
	this.Talk.MovePosition(2, 2135, 1.5, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.MovePosition(2, 2136, 3.0, 1);
	this.Talk.HideModel(2, 2, 0.5);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(1, 1212, 1.0, 1);
	this.Talk.PlayAnimation(1, "e008", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
	this.MessageTalk(10);
	this.MessageClose();
	this.Talk.MovePosition(1, 2113, 1.5, 1);
	this.Talk.HideModel(1, 2, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.WaitFrame(0.1);
}

function s539_t50_0801()
{
	this.Sound.PlayBGM("M102", 0);
	this.Talk.Load("s539_t50_0801");
	this.Talk.LoadModel(1, this.Common.GetPlayerModelName(), 1);
	this.Talk.LoadModel(2, "mob026", 2);
	this.Talk.LoadModel(3, "mob027", 3);
	this.Talk.LoadModel(4, "chr011", 4);
	this.Talk.LoadModelTexture(2, "b");
	this.Talk.LoadAnimation(1, "fn01");
	this.Talk.LoadAnimation(2, "fn01");
	this.Talk.LoadAnimation(3, "fn01");
	this.Talk.LoadAnimation(4, "bn01");
	this.WaitTalkLoadModel();
	this.Talk.SetMode(2);
	this.Talk.SetCamera("talkCamera01");
	this.Talk.SetLight("talkLight01");
	this.Talk.ShowModel(1, 4113, 1, 0);
	this.Talk.ShowModel(2, 4133, 1, 0);
	this.Talk.ShowModel(3, 4133, 1, 0);
	this.Talk.ShowModel(4, 4113, 1, 0);
	this.Talk.ChangeTextureModel(2, "b");
	this.Talk.SetOutlineModel(1, 1);
	this.Talk.SetOutlineModel(2, 1);
	this.Talk.SetOutlineModel(3, 1);
	this.Talk.SetOutlineModel(4, 1);
	this.Talk.PlayAnimation(3, "fn11", 0, true);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.WaitFrame(0.30000001);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.MovePosition(1, 4112, 1.5, 1);
	this.Talk.MovePosition(4, 4111, 1.5, 1);
	this.Talk.PlayAnimation(1, "fw01", 0, true);
	this.Talk.PlayAnimation(4, "br01", 0, true);
	this.WaitFrame(2.0);
	this.Talk.MovePosition(2, 4131, 1.5, 1);
	this.Talk.MovePosition(3, 4132, 1.5, 1);
	this.WaitFrame(1.0);
	this.Sound.StopSE("ev_056", 0.5);
	this.Talk.PlayAnimation(1, "fn01", 0.44999999, true);
	this.Talk.PlayAnimation(4, "bn01", 0.5, true);
	this.WaitFrame(0.30000001);
	this.Talk.PlayAnimation(2, "fn02", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(1);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(3, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(2);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(1, "e010", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f06_m01", true);
	this.Talk.PlayAnimation(3, "fn01", 0.40000001, true);
	this.MessageTalk(3);
	this.Talk.PlayAnimation(3, "fn11", 0.5, true);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(4);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e009", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(1, "e002", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f01_m02", true);
	this.WaitFrame(1.2);
	this.Talk.PlayAnimation(1, "e002_end", 0.2, false);
	this.Talk.PlayAnimationSlotB(1, "f01_m01", true);
	this.Talk.PlayAnimation(2, "fn03", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.MessageTalk(5);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageTalk(6);
	this.MessageTalk(7);
	this.Talk.PlayAnimation(2, "fn01", 0.44999999, true);
	this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
	this.MessageTalk(8);
	this.Talk.PlayAnimationSlotB(2, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageTalk(9);
	this.MessageTalk(10);
	this.MessageTalk(11);
	this.MessageTalk(12);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.MessageTalk(13);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageTalk(14);
	this.Talk.PlayAnimation(2, "fn02", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(2, "f03_m02", true);
	this.MessageTalk(15);
	this.MessageTalk(16);
	this.Talk.PlayAnimationSlotB(2, "f03_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
	this.MessageTalk(17);
	this.MessageTalk(18);
	this.Talk.PlayAnimation(2, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(19);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(2, "fn01", 0.5, true);
	this.MessageTalk(20);
	this.MessageTalk(21);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e003", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f03_e03", true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(2, "fn02", 0.44999999, true);
	this.Talk.PlayAnimationSlotB(2, "f04_m02", true);
	this.MessageTalk(22);
	this.Talk.PlayAnimationSlotB(2, "f04_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(23);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(2, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(2, "f02_m02", true);
	this.MessageTalk(24);
	this.Talk.PlayAnimationSlotB(2, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(25);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(1, "e003_end", 0.2, false);
	this.WaitFrame(0.30000001);
	this.Talk.PlayAnimation(1, "e009", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(1, "f02_m01", true);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(2, "ft01", 0.5, true);
	this.Talk.PlayAnimationSlotB(2, "f01_m02", true);
	this.MessageTalk(26);
	this.Talk.PlayAnimationSlotB(2, "f01_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimation(2, "fn01", 0.5, true);
	this.MessageTalk(27);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.MovePosition(2, 4171, 0.5, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(2, "fw01", 0.2, true);
	this.Talk.PlayAnimation(4, "br01", 0.2, true);
	this.Talk.MovePosition(2, 4173, 2.0, 1);
	this.Talk.MovePosition(4, 4173, 2.0, 1);
	this.WaitFrame(1.0);
	this.Sound.StopSE("ev_056", 1.2);
	this.Talk.HideModel(2, 2, 0.5);
	this.Talk.HideModel(4, 2, 0.5);
	this.WaitFrame(0.5);
	this.Talk.MovePosition(1, 2111, 1.5, 1);
	this.Talk.MovePosition(3, 2131, 1.5, 1);
	this.WaitFrame(1.0);
	this.Talk.PlayAnimation(3, "fn01", 0.5, true);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(28);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(1, "f04_m01", true);
	this.MessageTalk(29);
	this.Talk.PlayAnimation(3, "fn11", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(30);
	this.MessageTalk(31);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.Talk.PlayAnimationSlotB(1, "f08_m01", true);
	this.MessageTalk(32);
	this.Talk.PlayAnimation(3, "ft01", 0.40000001, true);
	this.Talk.PlayAnimationSlotB(3, "f02_m02", true);
	this.MessageTalk(33);
	this.MessageTalk(34);
	this.Talk.PlayAnimationSlotB(3, "f02_m01", true);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.Talk.PlayAnimation(3, "fn01", 0.44999999, true);
	this.Talk.MovePosition(3, 2135, 0.5, 1);
	this.WaitFrame(0.5);
	this.Sound.PlaySE("ev_056", false);
	this.Talk.PlayAnimation(3, "fw01", 0.2, true);
	this.Talk.MovePosition(3, 2136, 2.0, 1);
	this.WaitFrame(0.5);
	this.Sound.StopSE("ev_056", 1.0);
	this.Talk.HideModel(3, 2, 0.5);
	this.WaitFrame(0.80000001);
	this.Talk.PlayAnimation(1, "e008", 0.2, true);
	this.Talk.PlayAnimationSlotB(1, "f01_e03", true);
	this.MessageTalk(35);
	this.MessageTalk(36);
	this.Sound.StopBGM(1.5);
	this.Talk.SetLastTalkerManageID(-1);
	this.MessageClose();
	this.WaitFrame(0.30000001);
	this.Talk.MovePosition(1, 2113, 1.5, 1);
	this.Talk.HideModel(1, 2, 0.5);
	this.WaitFrame(0.5);
	this.TalkExit();
	this.WaitFrame(0.1);
}

function Message( a_message_id )
{
	this.Talk.Message(a_message_id);
	this.WaitMessage();
}

function Message_Center( a_message_id )
{
	this.Talk.Message_C(a_message_id);
	this.WaitMessage();
}

function Message_wait( a_message_id, a_wait )
{
	this.Talk.Message_Auto(a_message_id);
	this.SetWaitMessage(a_wait);
}

function Message_Center_wait( a_message_id, a_wait )
{
	this.Talk.Message_C_Auto(a_message_id);
	this.SetWaitMessage(a_wait);
}

function MessageComic( a_message_id, a_position )
{
	this.Talk.MessageComic(a_message_id, a_position);
	this.WaitMessage();
}

function MessageTalk( a_message_id )
{
	this.Talk.MessageTalk(a_message_id);
	this.WaitMessage();
}

function MessageTalk_wait( a_message_id, a_wait )
{
	this.Talk.MessageTalk_Auto(a_message_id);
	this.SetWaitMessage(a_wait);
}

function MessageSel( a_sel_num, a_message_id )
{
	this.Talk.MessageSel(a_sel_num, a_message_id);
	this.WaitMessage();
	this.Talk.ResultSelectedNum();
}

function MessageTalkSel( a_sel_num, a_message_id )
{
	this.Talk.MessageTalkSel(a_sel_num, a_message_id);
	this.WaitMessage();
	this.Talk.ResultSelectedNum();
}

function TalkCommunication( a_position, a_disp_model, a_animation )
{
	this.Talk.TalkCommunication(a_position, a_disp_model, a_animation);
	this.WaitCommunication();
}

function ShowCommunication( a_animation )
{
	this.Talk.ShowCommunication(a_animation);
	this.Sound.PlaySE("ev_101", false);
	this.WaitCommunication();
}

function YesNoInfo( a_para_id )
{
	this.Window.OpenYesNoInfo(a_para_id);
	this.WaitYesNoInfoWindow();
}

function YesNoSystem( a_para_id )
{
	this.Window.OpenYesNoSystem(a_para_id);
	this.WaitYesNoSystemWindow();
}

function OpenTutorial( a_tutorial_id )
{
	this.Window.OpenTutorial(a_tutorial_id);
	this.WaitTutorialWindow();
	this.Window.CloseTutorial();
	this.WaitCloseTutorialWindow();
}

function OpenCutin()
{
	this.Talk.OpenCutin();
	this.WaitOpenTalkCutin();
}

function WaitMessage()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsNext())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function SetWaitMessage( Wait )
{
	this.Talk.SetWait(Wait);
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsWait())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseTalkWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsClose())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCommunication()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsOpenTalkCommunication())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseTalkCommunication()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsCommunicationClose())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitOpenTalkCutin()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsOpenCutin())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseTalkCutin()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsCloseCutin())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitEffect( a_effectId )
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsEffect(a_effectId))
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitInfoWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsNextInfo())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseInfoWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsEndCloseInfo())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitSystemWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsNextSystemWindow())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseSystemWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsEndCloseSystemWindow())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitYesNoInfoWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsNextYesNoInfo())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseYesNoInfoWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsEndCloseYesNoInfo())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitYesNoSystemWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsNextYesNoSystem())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseYesNoSystemWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsEndCloseYesNoSystem())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitTutorialWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsNextTutorial())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseTutorialWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsEndCloseTutorial())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitMultiSelectWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsNextMultiSelect())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseMultiSelectWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsEndCloseMultiSelect())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitCloseMoneyWindow()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Window.IsEndMoneyWindow())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function MessageClose()
{
	this.Talk.Close();
	this.WaitCloseTalkWindow();
}

function CommunicationClose()
{
	this.Talk.CommunicationClose();
	this.Sound.PlaySE("ev_102", false);
	this.WaitCloseTalkCommunication();
}

function YesNoInfoClose()
{
	this.Window.CloseYesNoInfo();
	this.WaitCloseYesNoInfoWindow();
}

function YesNoSystemClose()
{
	this.Window.CloseYesNoSystem();
	this.WaitCloseYesNoSystemWindow();
}

function CloseCutin()
{
	this.Talk.CloseCutin();
	this.WaitCloseTalkCutin();
}

function WaitTalkLoadModel()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsEndLoadModel())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitTalkLoadEffect()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsEndLoadEffect())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitTalkLoadModelCommunication()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsLoadCommunication())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitTalkLoadCutin()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Talk.IsEndLoadCutin())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitVistaLoad()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Vista.IsEndLoad())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitVistaBGMovie()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (this.Vista.IsReadyBGMovie())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function TalkExit()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));
	this.Talk.Exit();

	while (!this.Talk.IsExit())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	this.Talk.End();
}

function TalkExit2()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));
	this.Talk.Exit();

	while (!this.Talk.IsExit())
	{
		this.Field.CloseUI(false);
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	this.Talk.End();
}

function VistaExit()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));
	this.Vista.Exit();

	while (!this.Vista.IsExit())
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	this.Vista.End();
}

function MovieIsPlay()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));

	while (1)
	{
		if (!this.Movie.IsPlay())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function FADE_IN( type, time )
{
	this.Fade.In(type, time);

	while (!this.Fade.IsEndType(type))
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function FADE_OUT( type, time )
{
	this.Fade.Out(type, time);

	while (!this.Fade.IsEndType(type))
	{
		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function INFO_WINDOW( mesNo )
{
	this.Window.OpenInfo(mesNo);
	this.WaitInfoWindow();
	this.Window.CloseInfo();
	this.WaitCloseInfoWindow();
}

function INFO_WINDOW_WITH_CLOSE_MONEY( mesNo )
{
	this.Window.OpenInfo(mesNo);
	this.WaitInfoWindow();
	this.Window.CloseMoneyWindow();
	this.Window.CloseInfo();
	this.WaitCloseInfoWindow();
	this.WaitCloseMoneyWindow();
}

function INFO_GET_ITEM( ItemNo, num )
{
	this.Sound.PlaySE("com_033", false);
	this.Window.OpenInfoGetItem(ItemNo, num);
	this.WaitInfoWindow();
	this.Window.CloseInfo();
	this.WaitCloseInfoWindow();
}

function INFO_DEL_ITEM( ItemNo, num )
{
	this.Window.OpenInfoReleaseItem(ItemNo, num);
	this.WaitInfoWindow();
	this.Window.CloseInfo();
	this.WaitCloseInfoWindow();
}

function SE_PLAY( fileName, type )
{
	this.Sound.PlaySE(fileName, type);

	while (1)
	{
		if (!this.Sound.IsPlaySE(fileName))
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function WaitVoicePlay()
{
	this.WaitFrame(this.Util.SecondFromFrame(1));
	local waittime = 10 * 30;

	while (1)
	{
		if (!this.Sound.IsPlaying(2))
		{
			break;
		}

		if (waittime <= 0)
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));

		if (waittime > 0)
		{
			waittime = waittime - 1;
		}
	}

	this.WaitFrame(this.Util.SecondFromFrame(3));
}

function NPC_MESSAGE( fileName, msgNo )
{
	this.Field.MoveOffPlayer();
	this.Talk.Load(fileName);
	this.Talk.SetMode(1);
	this.Message(msgNo);
	this.MessageClose();
	this.TalkExit();
	this.Field.MoveOnPlayer();
}

function debagMesssage( npcNo )
{
	this.Talk.Load("debug_message");
	this.Talk.SetMode(1);
	this.Talk.Message(npcNo);
	this.WaitMessage();
	this.MessageClose();
	this.TalkExit();
}

function KEYWORD_GET( keyNo )
{
	this.Window.OpenInfoGetKeyword(keyNo);
	this.WaitInfoWindow();
	this.Window.CloseInfo();
	this.WaitCloseInfoWindow();
}

function MessageTalkDelaySlotBAnimation( a_message_id, a_wait_frame, a_manage_id, a_animation_name, a_is_loop )
{
	this.Talk.MessageTalk(a_message_id);

	for( local slot_b_wait_count = a_wait_frame; 1;  )
	{
		if (slot_b_wait_count >= 0)
		{
			slot_b_wait_count = slot_b_wait_count - 1;

			if (slot_b_wait_count < 0)
			{
				this.Talk.PlayAnimationSlotB(a_manage_id, a_animation_name, a_is_loop);
			}
		}

		if (this.Talk.IsNext())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}
}

function d12201()
{
	this.HM_field_init();
	this.HM_Play_BGM_load_set(22, "none");
	this.SET_d12201_STATUS();
	this.HM_EDEN_LANDING(1);
	this.Event_m51_d122_0801();
	this.Event_m51_d122_1101();
	this.Event_m51_d122_0901();
	this.Event_m53_t21_0701_01();
	this.Event_s504_d122_0101();
	this.Event_s504_d122_1001();
	this.Event_s504_d122_0901();
	this.Event_s539_t50_0801();
	this.Event_Quest_100_02();
	this.HM_map_release();
	this.HM_Play_BGM(this.Work.Get(40), 0.0);
}

function d12201_load_skip()
{
	this.HM_field_load_skip_init();

	if (this.Flag.Check(10021))
	{
		this.Field.SetWarpEffectOff();
	}
}

function next_00()
{
	if (this.Flag.Check(11105) && !this.Flag.Check(11199))
	{
		while (this.Field.IsHitEvent())
		{
			if (this.Work.IsPushKey("DECIDE"))
			{
				this.HM_map_move_limit("field_text_add", 20000, true, "p_move_0000");
			}

			this.WaitFrame(this.Util.SecondFromFrame(0.1));
		}
	}
	else
	{
		this.HM_EDEN_LEAVING(1);
	}
}

function SET_d12201_STATUS()
{
	this.HM_MAP_SET_INVISIBLE(true, true, true, true, true);

	if (!this.Flag.Check(11114))
	{
		this.Field.EffectVisible("obj_ef_0000", true);
		this.Field.EffectVisible("obj_ef_0001", true);
		this.Field.SetGimmickVisible("obj_gk_0001", true);
		this.Field.SetGimmickVisible("obj_gk_0002", true);
		this.Field.ColOn("plan_cl_0000");
		this.Field.ColOn("plan_cl_0001");
		this.Field.SetTBoxVisible(1220101, false);
	}
	else
	{
		this.Field.EffectVisible("obj_ef_0000", false);
		this.Field.EffectVisible("obj_ef_0001", false);
		this.Field.SetGimmickVisible("obj_gk_0001", false);
		this.Field.SetGimmickVisible("obj_gk_0002", false);
		this.Field.ColOff("plan_cl_0000");
		this.Field.ColOff("plan_cl_0001");
	}

	if (!this.Flag.Check(10513) && this.Quest.GetProgressIgnoreStatus(4) >= 7)
	{
		this.Field.SetNpcVisible("npc_0000", false);
	}
	else if (this.Flag.Check(11107))
	{
		this.Field.SetNpcVisible("npc_0000", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0000", false);
	}

	if (this.Quest.GetProgress(63) >= 2 && this.Quest.GetProgress(63) <= 6)
	{
		this.Field.SetNpcVisible("npc_0001", false);
		this.Field.SetNpcVisible("npc_0006", false);
		this.Field.SetNpcVisible("npc_0007", false);
		this.Field.SetNpcVisible("npc_0008", false);
		this.Field.SetNpcVisible("npc_0009", false);
		this.Field.SetNpcVisible("npc_0010", false);
		this.Field.SetNpcVisible("npc_0011", false);
		this.Field.SetNpcVisible("npc_0018", false);
		this.Field.SetNpcVisible("npc_0019", false);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0001", true);
		this.Field.SetNpcVisible("npc_0006", true);
		this.Field.SetNpcVisible("npc_0007", true);
		this.Field.SetNpcVisible("npc_0008", true);
		this.Field.SetNpcVisible("npc_0009", true);
		this.Field.SetNpcVisible("npc_0010", true);
		this.Field.SetNpcVisible("npc_0011", true);
		this.Field.SetNpcVisible("npc_0018", true);
		this.Field.SetNpcVisible("npc_0019", true);

		if (this.Flag.Check(11199) && !this.Flag.Check(10513) && this.Quest.GetProgressIgnoreStatus(4) >= 7)
		{
			this.Field.SetNpcVisible("npc_0001", false);
		}
	}

	if (this.Quest.GetProgress(63) >= 2 && this.Quest.GetProgress(63) <= 6)
	{
		this.Field.SetNpcVisible("npc_0002", false);
	}
	else if (!this.Flag.Check(12199))
	{
		this.Field.SetNpcVisible("npc_0002", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0002", false);
	}

	if (!this.Flag.Check(11107))
	{
		this.Field.SetNpcVisible("npc_0012", true);
		this.Field.SetNpcVisible("npc_0013", true);
		this.Field.SetNpcVisible("npc_0014", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0012", false);
		this.Field.SetNpcVisible("npc_0013", false);
		this.Field.SetNpcVisible("npc_0014", false);
	}

	if (!this.Flag.Check(11114))
	{
		this.Field.SetNpcVisible("npc_0007", true);
		this.Field.SetNpcVisible("npc_0008", true);
		this.Field.SetNpcVisible("npc_0009", true);
		this.Field.SetNpcVisible("npc_0010", true);
		this.Field.SetNpcVisible("npc_0011", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0007", false);
		this.Field.SetNpcVisible("npc_0008", false);
		this.Field.SetNpcVisible("npc_0009", false);
		this.Field.SetNpcVisible("npc_0010", false);
		this.Field.SetNpcVisible("npc_0011", false);
	}

	if (this.Flag.Check(11306) && !this.Flag.Check(11399))
	{
		this.Field.SetNpcVisible("npc_0003", false);
		this.Field.SetNpcVisible("npc_0004", false);
		this.Field.SetNpcVisible("npc_0005", false);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0003", false);
		this.Field.SetNpcVisible("npc_0004", false);
		this.Field.SetNpcVisible("npc_0005", false);
	}

	if (this.Quest.GetProgress(39) == 6)
	{
		this.Field.SetNpcVisible("npc_0020", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0020", false);
	}

	if (this.Quest.GetProgress(4) == 3 || this.Quest.GetProgress(4) == 6 || this.Quest.GetProgress(4) == 7)
	{
		this.Field.SetNpcVisible("npc_0023", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0023", false);
	}

	if (this.Quest.GetProgress(4) == 6 || this.Quest.GetProgress(4) == 7)
	{
		this.Field.SetNpcVisible("npc_0024", true);
		this.Field.SetNpcVisible("npc_0025", true);
		this.Field.SetNpcVisible("npc_0026", true);
		this.Field.SetNpcVisible("npc_0027", true);
		this.Field.SetNpcVisible("npc_0028", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0024", false);
		this.Field.SetNpcVisible("npc_0025", false);
		this.Field.SetNpcVisible("npc_0026", false);
		this.Field.SetNpcVisible("npc_0027", false);
		this.Field.SetNpcVisible("npc_0028", false);
	}

	if (this.Quest.GetProgress(63) >= 2 && this.Quest.GetProgress(63) <= 6)
	{
		this.Field.SetNpcVisible("npc_0015", true);
		this.Field.SetNpcVisible("npc_0016", true);
		this.Field.SetNpcVisible("npc_0017", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0015", false);
		this.Field.SetNpcVisible("npc_0016", false);
		this.Field.SetNpcVisible("npc_0017", false);
	}

	if (this.Quest.GetReceiveStatus(100) == 1)
	{
		this.Field.SetNpcVisible("npc_0021", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0021", false);
	}

	if (this.Flag.Check(11299))
	{
		this.Field.SetNpcVisible("npc_0022", true);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0022", false);
	}

	if (!this.Flag.Check(11129))
	{
		this.Field.IconOnID("npc_0001", 4, 0.0, 0.0);
	}
	else
	{
		this.Field.IconOffID("npc_0001", 4);
	}

	if (this.Flag.Check(11129) && !this.Flag.Check(11107))
	{
		this.Field.IconOnID("npc_0002", 4, 0.0, 0.0);
	}
	else
	{
		this.Field.IconOffID("npc_0002", 4);
	}

	if (this.Quest.GetProgress(4) == 3)
	{
		this.Field.IconOnID("npc_0023", 4, 0.0, 0.0);
	}
	else
	{
		this.Field.IconOffID("npc_0023", 4);
	}

	if (this.Quest.GetReceiveStatus(63) == 1 && !this.Flag.Check(15711))
	{
		this.Field.IconOnID("npc_0015", 4, 0.0, 0.0);
	}
	else
	{
		this.Field.IconOffID("npc_0015", 4);
	}

	if (this.Quest.GetReceiveStatus(63) == 1 && !this.Flag.Check(15712))
	{
		this.Field.IconOnID("npc_0016", 4, 0.0, 0.0);
	}
	else
	{
		this.Field.IconOffID("npc_0016", 4);
	}

	if (this.Quest.GetProgress(63) == 2)
	{
		this.Field.IconOnID("npc_0017", 4, 0.0, 0.0);
	}
	else
	{
		this.Field.IconOffID("npc_0017", 4);
	}

	if (this.Quest.GetProgress(100) == 1)
	{
		this.Field.IconOnID("npc_0021", 4, 0.0, 0.0);
	}
	else
	{
		this.Field.IconOffID("npc_0021", 4);
	}

	this.Keyword.SetNpcKeywordIcon();

	if (this.Flag.Check(12799))
	{
		this.Field.SetNpcVisible("npc_0029", true);
		this.Field.IconOnID("npc_0029", 13, 0.0, 0.0);
	}
	else
	{
		this.Field.SetNpcVisible("npc_0029", false);
		this.Field.IconOffID("npc_0029", 13);
	}
}

function d12201_npc_0000()
{
	this.Talk.Load("d12201");
	this.Talk.SetMode(1);

	if (!this.Flag.Check(12199))
	{
		this.Message(0);
		this.MessageClose();
		this.TalkExit();
	}
	else
	{
		this.Message(100);
		this.MessageClose();
		this.TalkExit();
	}
}

function d12201_npc_0001()
{
	this.Talk.Load("d12201");
	this.Talk.SetMode(1);

	if (!this.Flag.Check(11199))
	{
		if (!this.Flag.Check(11129))
		{
			this.Flag.Set(11129);
			this.Message(306);
			this.Message(307);
			this.MessageClose();
			this.Field.MoveOffPlayer();
			this.FADE_OUT(0, 0.5);
			this.Field.ScriptCamera("d122_npc_look_camera", 0, true);
			this.FADE_IN(0, 0.5);
			this.WaitFrame(1.0);
			this.Message(308);
			this.MessageClose();
			this.TalkExit();
			this.Field.MoveOffPlayer();
			this.FADE_OUT(0, 0.5);
			this.Field.ScriptCameraStill(false);
			this.SET_d12201_STATUS();
			this.FADE_IN(0, 0.5);
			this.Field.MoveOnPlayer();
		}
		else
		{
			this.Message(309);
			this.MessageClose();
			this.TalkExit();
		}
	}
	else if (!this.Flag.Check(12199))
	{
		this.Message(1);
		this.MessageClose();
		this.TalkExit();
	}
	else
	{
		this.Message(101);
		this.MessageClose();
		this.TalkExit();
	}
}

function d12201_npc_0002()
{
	this.Talk.Load("d12201");
	this.Talk.SetMode(1);

	if (!this.Flag.Check(11199))
	{
		if (!this.Flag.Check(11129))
		{
			this.Message(304);
			this.Message(305);
			this.MessageClose();
			this.TalkExit();
		}
		else
		{
			this.Message(310);
			this.Message(311);
			this.Message(312);
			this.MessageClose();
			this.TalkExit();
			this.Flag.Set(11130);
			this.HM_EVENT_START_SET(1);
			this.HM_ChangeField("d122", 1, "start_01", 180);
		}
	}
	else
	{
		this.Message(2);
		this.MessageClose();
		this.TalkExit();
	}
}

function d12201_npc_0006()
{
	if (this.Keyword.GetActiveID() != -1)
	{
		this.KEYWORD_TALK(this.Keyword.GetActiveID());

		if (this.Flag.Check(11327))
		{
			this.Flag.Clear(11327);
			this.Battle.Encount(7010, 817);
		}

		return;
	}
	else
	{
		this.Talk.Load("d12201");
		this.Talk.SetMode(1);

		if (!this.Flag.Check(11199))
		{
			this.Message(303);
			this.MessageClose();
			this.TalkExit();
		}
		else if (!this.Flag.Check(12199))
		{
			this.Message(3);
			this.MessageClose();
			this.TalkExit();
		}
		else
		{
			this.Message(103);
			this.MessageClose();
			this.TalkExit();
		}
	}
}

function d12201_npc_0015()
{
	if (!this.Flag.Check(15711))
	{
		this.Field.IconOffID("npc_0015", 4);
		this.Flag.Set(15711);
	}

	this.Talk.Load("HM_quest_message");
	this.Talk.SetMode(1);
	this.Message(6310);
	this.Message(6311);
	this.MessageClose();
	this.TalkExit();
}

function d12201_npc_0016()
{
	if (!this.Flag.Check(15712))
	{
		this.Field.IconOffID("npc_0016", 4);
		this.Flag.Set(15712);
	}

	this.Talk.Load("HM_quest_message");
	this.Talk.SetMode(1);
	this.Message(6312);
	this.Message(6313);
	this.Message(6314);
	this.MessageClose();
	this.TalkExit();
}

function d12201_npc_0017()
{
	this.Event_s563_d122_0201();
}

function d12201_npc_0018()
{
	if (this.Keyword.GetActiveID() != -1)
	{
		this.KEYWORD_TALK(this.Keyword.GetActiveID());
		this.Event_m53_t21_0701();
		return;
	}
	else
	{
		this.d12201_npc_0019();
	}
}

function d12201_npc_0019()
{
	this.Talk.Load("d12201");
	this.Talk.SetMode(1);

	if (!this.Flag.Check(12199))
	{
		this.Message(4);
		this.Message(5);
		this.MessageClose();
		this.TalkExit();
	}
	else
	{
		this.Message(104);
		this.Message(105);
		this.Message(106);
		this.MessageClose();
		this.TalkExit();
	}
}

function d12201_npc_0021()
{
	this.Event_Quest_100_01();
}

function d12201_npc_0022()
{
	this.Talk.Load("t5002");
	this.Talk.SetMode(1);
	this.Message(9);
	this.Message(10);
	this.MessageClose();
	this.TalkExit();

	if (!this.Flag.Check(14343))
	{
		this.TUTORIAL_WINDOW(35);
		this.Flag.Set(14343);
	}
}

function d12201_npc_0023()
{
	this.Event_s504_d122_0501();
}

function d12201_npc_0029()
{
	this.Shop.Open(58);

	while (1)
	{
		if (this.Shop.IsEnd())
		{
			break;
		}

		this.WaitFrame(this.Util.SecondFromFrame(1));
	}

	this.Shop.Close();
}

function evt_0000()
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			if (!this.Flag.Check(11199))
			{
				this.Field.MoveOffPlayer();
				this.Talk.Load("d12201");
				this.Talk.SetMode(1);
				this.Message(201);
				this.MessageClose();
				this.TalkExit();
				this.Field.PlayerIconVisible(true);
				this.Field.MoveOnPlayer();
			}
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function evt_0001()
{
	while (this.Field.IsHitEvent())
	{
		if (this.Work.IsPushKey("DECIDE"))
		{
			if (!this.Flag.Check(11199))
			{
				this.Field.MoveOffPlayer();
				this.Talk.Load("d12201");
				this.Talk.SetMode(1);
				this.Message(201);
				this.MessageClose();
				this.TalkExit();
				this.Field.PlayerIconVisible(true);
				this.Field.MoveOnPlayer();
			}
		}

		this.WaitFrame(this.Util.SecondFromFrame(0.1));
	}
}

function Event_m51_d122_0801()
{
	if (this.Flag.Check(11105) && !this.Flag.Check(11106))
	{
		this.Common.SetControlPlayerType(8);
		this.HM_TALK_TO_VISTA_EVENT();
		this.m51_d122_0801();
		this.Flag.Set(11106);
		this.SET_d12201_STATUS();
		this.Field.SetVisible(true);
		this.Field.SetPlayerVisible(true);
		this.Field.SetDigimonVisible(true);
		this.HM_Play_BGM(this.Work.Get(40), 0.0);
		this.Field.SetTBoxVisible(-1, true);
		this.Field.SetTBoxVisible(1220101, false);
		this.FADE_IN(0, 0.5);
		this.WaitFrame(0.1);
		this.Field.MoveOnPlayer();
	}
}

function Event_m51_d122_0901()
{
	if (this.Flag.Check(11130) && !this.Flag.Check(11107))
	{
		this.HM_TALK_TO_VISTA_EVENT();
		this.m51_d122_0901();
		this.m51_d122_1001();
		this.Flag.Set(11107);
		this.Flag.Set(11108);
		local is_get_digimon = true;

		if (this.Common.GetPartyEmptyNum() < 1)
		{
			is_get_digimon = false;
			this.Debug.Log("Digimon not get(Party full).");
			this.Flag.Set(10503);
		}
		else
		{
			local add_digimon_memory = 0;

			if (this.Flag.Check(10500))
			{
				add_digimon_memory = this.Digimon.GetMemory(389);
			}
			else if (this.Flag.Check(10501))
			{
				add_digimon_memory = this.Digimon.GetMemory(303);
			}
			else if (this.Flag.Check(10502))
			{
				add_digimon_memory = this.Digimon.GetMemory(595);
			}

			if (this.Common.GetFreePartyMemory() < add_digimon_memory)
			{
				is_get_digimon = false;
				this.Debug.Log("Digimon not get(Memory over). Add memory:" + add_digimon_memory);
				this.Flag.Set(10504);
			}
		}

		if (is_get_digimon)
		{
			if (this.Flag.Check(10500))
			{
				this.Field.AddPartyFormal(this.Math.Rand(1, 332));
			}
			else if (this.Flag.Check(10501))
			{
				this.Field.AddPartyFormal(this.Math.Rand(1, 332));
			}
			else if (this.Flag.Check(10502))
			{
				this.Field.AddPartyFormal(this.Math.Rand(1, 332));
			}
		}

		this.Common.SetFieldGuest(3026);
		this.Field.AddGuestFormal(0, 101);
		this.HM_emblem_main_story_gest_save(3026, 101, 0);
		this.Battle.Encount(4000, 817);
		this.Flag.Set(19252);
	}
}

function Event_m51_d122_1101()
{
	if (this.Flag.Check(11108) && !this.Flag.Check(11109))
	{
		this.HM_EVENT_START_SET(0);
		this.m51_d122_1101();
		this.Flag.Set(11109);
		this.Common.SetControlPlayerType(1);
		this.HM_ChangeField("d131", 2, "start_00", 0);
	}
}

function Event_m53_t21_0701()
{
	if (this.Flag.Check(11308) && this.Flag.Check(11309) && this.Flag.Check(11323) && this.Flag.Check(11324) && this.Flag.Check(11325) && !this.Flag.Check(11307))
	{
		this.Flag.Set(19271);
		this.HM_EVENT_START_SET(2);
		this.m53_t21_0701();
		this.Flag.Set(11307);
		this.Flag.Set(10511);
		this.Flag.Set(14038);
		this.Flag.Set(14502);
		this.HM_EVENT_END_SET(0);
		this.Keyword.Delete(3400);
		this.HM_map_release();
	}
}

function Event_m53_t21_0701_01()
{
	if (this.Flag.Check(11308) && this.Flag.Check(11309) && this.Flag.Check(11323) && this.Flag.Check(11324) && this.Flag.Check(11325) && !this.Flag.Check(11307))
	{
		this.Flag.Set(19271);
		this.HM_EVENT_START_SET(0);
		this.m53_t21_0701();
		this.Flag.Set(11307);
		this.Flag.Set(10511);
		this.Flag.Set(14038);
		this.Flag.Set(14502);
		this.HM_EVENT_END_SET(0);
		this.Keyword.Delete(3400);
		this.HM_map_release();
	}
}

function Event_s504_d122_0101()
{
	if (this.Quest.GetReceiveStatus(6) == 2 && !this.Flag.Check(15543))
	{
		this.HM_EVENT_START_SET(2);
		this.s504_d122_0101();
		this.Flag.Set(15543);
		this.HM_EVENT_END_SET(0);
	}
}

function Event_s504_d122_0501()
{
	if (this.Quest.GetProgress(4) == 3)
	{
		this.HM_EVENT_START_SET(2);
		this.Field.IconOffID("npc_0023", 4);
		this.s504_d122_0501();
		this.Quest.AdvanceProgress(4);
		this.HM_EVENT_END_SET(0);
	}
	else
	{
		this.HM_EVENT_START_SET(2);
		this.Talk.Load("HM_quest_message");
		this.Talk.SetMode(1);
		this.Message(410);
		this.MessageClose();
		this.TalkExit();
		this.HM_EVENT_END_SET(0);
	}
}

function Event_s504_d122_0901()
{
	if (this.Quest.GetProgress(4) == 6)
	{
		this.HM_EVENT_START_SET(2);
		this.s504_d122_0901();
		this.Quest.AdvanceProgress(4);

		if (this.Flag.Check(17402))
		{
			this.Flag.Clear(10513);
			this.Domination.Encount(63);
			this.Flag.Set(19252);
		}
		else if (this.Flag.Check(17403))
		{
			this.Domination.Encount(64);
			this.Flag.Set(19252);
		}
		else
		{
			this.Flag.Clear(10513);
			this.HM_ChangeField("t50", 4, "start_00", 90);
		}
	}
}

function Event_s504_d122_1001()
{
	if (this.Quest.GetProgress(4) == 7 && this.Flag.Check(17402))
	{
		this.HM_EVENT_START_SET(0);
		this.s504_d122_1001();
		this.HM_ChangeField("t50", 4, "start_00", 90);
	}

	if (this.Quest.GetProgress(4) == 7 && this.Flag.Check(17403))
	{
		this.HM_EVENT_START_SET(0);
		this.s504_d122_1101();
		this.HM_ChangeField("t50", 4, "start_00", 90);
	}
}

function Event_s539_t50_0801()
{
	if (this.Quest.GetProgress(39) == 6)
	{
		this.HM_EVENT_START_SET(0);
		this.s539_t50_0801();
		this.Quest.AdvanceProgress(39);
		this.Flag.Set(10513);
		this.HM_ChangeField("t50", 3, "start_00", 180);
	}
}

function Event_s563_d122_0201()
{
	if (this.Quest.GetProgress(63) == 2)
	{
		this.HM_EVENT_START_SET(2);
		this.Field.IconOffID("npc_0015", 4);
		this.Field.IconOffID("npc_0016", 4);
		this.Field.IconOffID("npc_0017", 4);
		this.Flag.Set(15711);
		this.Flag.Set(15712);
		this.s563_d122_0201();
		this.Quest.AdvanceProgress(63);
		this.HM_map_release();
		this.HM_EVENT_END_SET(0);
	}
	else
	{
		this.Talk.Load("HM_quest_message");
		this.Talk.SetMode(1);
		this.Message(6323);
		this.MessageClose();
		this.TalkExit();
	}
}

function Event_Quest_100_01()
{
	if (this.Quest.GetProgress(100) == 1)
	{
		this.HM_EVENT_START_SET(2);

		switch(this.Message_Yes_No_Select(5065))
		{
		case 1:
			this.Field.IconOffID("npc_0021", 4);
			this.Talk.Load("HM_quest_hucker_event");
			this.Talk.SetMode(1);
			this.Message(600);
			this.Message(601);
			this.MessageClose();
			this.TalkExit();
			this.Quest.AdvanceProgress(100);
			this.Battle.Encount(7205, 817);
			break;

		case 2:
			this.Field.MoveOnPlayer();
			break;

		case 3:
			this.Field.MoveOnPlayer();
			break;
		}
	}
	else
	{
		this.HM_EVENT_START_SET(2);
		this.Talk.Load("HM_quest_hucker_event");
		this.Talk.SetMode(1);
		this.Message(603);
		this.MessageClose();
		this.TalkExit();
		this.HM_EVENT_END_SET(0);
	}
}

function Event_Quest_100_02()
{
	if (this.Quest.GetProgress(100) == 2)
	{
		this.HM_EVENT_START_SET(0);
		this.HM_Play_BGM(this.Work.Get(40), 0.0);
		this.Talk.Load("HM_quest_hucker_event");
		this.Talk.SetMode(1);
		this.Message(602);
		this.MessageClose();
		this.TalkExit();
		this.Quest.AdvanceProgress(100);
		this.HM_EVENT_END_SET(0);
	}
}

